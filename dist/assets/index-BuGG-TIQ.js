(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ii(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vf={exports:{}},$o={},Gf={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=Symbol.for("react.element"),$v=Symbol.for("react.portal"),qv=Symbol.for("react.fragment"),Vv=Symbol.for("react.strict_mode"),Gv=Symbol.for("react.profiler"),Zv=Symbol.for("react.provider"),Yv=Symbol.for("react.context"),Kv=Symbol.for("react.forward_ref"),Xv=Symbol.for("react.suspense"),Qv=Symbol.for("react.memo"),Jv=Symbol.for("react.lazy"),Ud=Symbol.iterator;function e0(t){return t===null||typeof t!="object"?null:(t=Ud&&t[Ud]||t["@@iterator"],typeof t=="function"?t:null)}var Zf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yf=Object.assign,Kf={};function ts(t,e,r){this.props=t,this.context=e,this.refs=Kf,this.updater=r||Zf}ts.prototype.isReactComponent={};ts.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ts.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xf(){}Xf.prototype=ts.prototype;function vc(t,e,r){this.props=t,this.context=e,this.refs=Kf,this.updater=r||Zf}var yc=vc.prototype=new Xf;yc.constructor=vc;Yf(yc,ts.prototype);yc.isPureReactComponent=!0;var Wd=Array.isArray,Qf=Object.prototype.hasOwnProperty,xc={current:null},Jf={key:!0,ref:!0,__self:!0,__source:!0};function ep(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Qf.call(e,n)&&!Jf.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:oa,type:t,key:s,ref:a,props:i,_owner:xc.current}}function t0(t,e){return{$$typeof:oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bc(t){return typeof t=="object"&&t!==null&&t.$$typeof===oa}function r0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Hd=/\/+/g;function kl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r0(""+t.key):e.toString(36)}function Wa(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case oa:case $v:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+kl(a,0):n,Wd(i)?(r="",t!=null&&(r=t.replace(Hd,"$&/")+"/"),Wa(i,e,r,"",function(c){return c})):i!=null&&(bc(i)&&(i=t0(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Hd,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Wd(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+kl(s,o);a+=Wa(s,e,r,l,i)}else if(l=e0(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+kl(s,o++),a+=Wa(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wa(t,e,r){if(t==null)return t;var n=[],i=0;return Wa(t,n,"","",function(s){return e.call(r,s,i++)}),n}function n0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Ha={transition:null},i0={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:xc};function tp(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:wa,forEach:function(t,e,r){wa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wa(t,function(){e++}),e},toArray:function(t){return wa(t,function(e){return e})||[]},only:function(t){if(!bc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=ts;Le.Fragment=qv;Le.Profiler=Gv;Le.PureComponent=vc;Le.StrictMode=Vv;Le.Suspense=Xv;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i0;Le.act=tp;Le.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Yf({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=xc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Qf.call(e,l)&&!Jf.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:oa,type:t.type,key:i,ref:s,props:n,_owner:a}};Le.createContext=function(t){return t={$$typeof:Yv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zv,_context:t},t.Consumer=t};Le.createElement=ep;Le.createFactory=function(t){var e=ep.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:Kv,render:t}};Le.isValidElement=bc;Le.lazy=function(t){return{$$typeof:Jv,_payload:{_status:-1,_result:t},_init:n0}};Le.memo=function(t,e){return{$$typeof:Qv,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};Le.unstable_act=tp;Le.useCallback=function(t,e){return Ht.current.useCallback(t,e)};Le.useContext=function(t){return Ht.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};Le.useEffect=function(t,e){return Ht.current.useEffect(t,e)};Le.useId=function(){return Ht.current.useId()};Le.useImperativeHandle=function(t,e,r){return Ht.current.useImperativeHandle(t,e,r)};Le.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return Ht.current.useMemo(t,e)};Le.useReducer=function(t,e,r){return Ht.current.useReducer(t,e,r)};Le.useRef=function(t){return Ht.current.useRef(t)};Le.useState=function(t){return Ht.current.useState(t)};Le.useSyncExternalStore=function(t,e,r){return Ht.current.useSyncExternalStore(t,e,r)};Le.useTransition=function(){return Ht.current.useTransition()};Le.version="18.3.1";Gf.exports=Le;var $=Gf.exports;const rp=ii($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0=$,a0=Symbol.for("react.element"),o0=Symbol.for("react.fragment"),l0=Object.prototype.hasOwnProperty,u0=s0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c0={key:!0,ref:!0,__self:!0,__source:!0};function np(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)l0.call(e,n)&&!c0.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:a0,type:t,key:s,ref:a,props:i,_owner:u0.current}}$o.Fragment=o0;$o.jsx=np;$o.jsxs=np;Vf.exports=$o;var u=Vf.exports,ip={exports:{}},lr={},sp={exports:{}},ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,he){var ve=V.length;V.push(he);e:for(;0<ve;){var re=ve-1>>>1,pe=V[re];if(0<i(pe,he))V[re]=he,V[ve]=pe,ve=re;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var he=V[0],ve=V.pop();if(ve!==he){V[0]=ve;e:for(var re=0,pe=V.length,Ae=pe>>>1;re<Ae;){var Se=2*(re+1)-1,Ve=V[Se],H=Se+1,X=V[H];if(0>i(Ve,ve))H<pe&&0>i(X,Ve)?(V[re]=X,V[H]=ve,re=H):(V[re]=Ve,V[Se]=ve,re=Se);else if(H<pe&&0>i(X,ve))V[re]=X,V[H]=ve,re=H;else break e}}return he}function i(V,he){var ve=V.sortIndex-he.sortIndex;return ve!==0?ve:V.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,h=null,v=3,b=!1,N=!1,k=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(V){for(var he=r(c);he!==null;){if(he.callback===null)n(c);else if(he.startTime<=V)n(c),he.sortIndex=he.expirationTime,e(l,he);else break;he=r(c)}}function w(V){if(k=!1,g(V),!N)if(r(l)!==null)N=!0,ue(x);else{var he=r(c);he!==null&&le(w,he.startTime-V)}}function x(V,he){N=!1,k&&(k=!1,p(S),S=-1),b=!0;var ve=v;try{for(g(he),h=r(l);h!==null&&(!(h.expirationTime>he)||V&&!B());){var re=h.callback;if(typeof re=="function"){h.callback=null,v=h.priorityLevel;var pe=re(h.expirationTime<=he);he=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===r(l)&&n(l),g(he)}else n(l);h=r(l)}if(h!==null)var Ae=!0;else{var Se=r(c);Se!==null&&le(w,Se.startTime-he),Ae=!1}return Ae}finally{h=null,v=ve,b=!1}}var C=!1,E=null,S=-1,I=5,R=-1;function B(){return!(t.unstable_now()-R<I)}function U(){if(E!==null){var V=t.unstable_now();R=V;var he=!0;try{he=E(!0,V)}finally{he?Q():(C=!1,E=null)}}else C=!1}var Q;if(typeof m=="function")Q=function(){m(U)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,oe=fe.port2;fe.port1.onmessage=U,Q=function(){oe.postMessage(null)}}else Q=function(){y(U,0)};function ue(V){E=V,C||(C=!0,Q())}function le(V,he){S=y(function(){V(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){N||b||(N=!0,ue(x))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var ve=v;v=he;try{return V()}finally{v=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,he){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ve=v;v=V;try{return he()}finally{v=ve}},t.unstable_scheduleCallback=function(V,he,ve){var re=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?re+ve:re):ve=re,V){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ve+pe,V={id:d++,callback:he,priorityLevel:V,startTime:ve,expirationTime:pe,sortIndex:-1},ve>re?(V.sortIndex=ve,e(c,V),r(l)===null&&V===r(c)&&(k?(p(S),S=-1):k=!0,le(w,ve-re))):(V.sortIndex=pe,e(l,V),N||b||(N=!0,ue(x))),V},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(V){var he=v;return function(){var ve=v;v=he;try{return V.apply(this,arguments)}finally{v=ve}}}})(ap);sp.exports=ap;var d0=sp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=$,or=d0;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var op=new Set,zs={};function si(t,e){Hi(t,e),Hi(t+"Capture",e)}function Hi(t,e){for(zs[t]=e,t=0;t<e.length;t++)op.add(e[t])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lu=Object.prototype.hasOwnProperty,f0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$d={},qd={};function p0(t){return lu.call(qd,t)?!0:lu.call($d,t)?!1:f0.test(t)?qd[t]=!0:($d[t]=!0,!1)}function m0(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g0(t,e,r,n){if(e===null||typeof e>"u"||m0(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var wc=/[\-:]([a-z])/g;function kc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wc,kc);jt[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wc,kc);jt[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wc,kc);jt[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cc(t,e,r,n){var i=jt.hasOwnProperty(e)?jt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g0(e,r,i,n)&&(r=null),n||i===null?p0(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var gn=h0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ka=Symbol.for("react.element"),bi=Symbol.for("react.portal"),wi=Symbol.for("react.fragment"),Ec=Symbol.for("react.strict_mode"),uu=Symbol.for("react.profiler"),lp=Symbol.for("react.provider"),up=Symbol.for("react.context"),Sc=Symbol.for("react.forward_ref"),cu=Symbol.for("react.suspense"),du=Symbol.for("react.suspense_list"),_c=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),cp=Symbol.for("react.offscreen"),Vd=Symbol.iterator;function os(t){return t===null||typeof t!="object"?null:(t=Vd&&t[Vd]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,Cl;function bs(t){if(Cl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Cl=e&&e[1]||""}return`
`+Cl+t}var El=!1;function Sl(t,e){if(!t||El)return"";El=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{El=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?bs(t):""}function v0(t){switch(t.tag){case 5:return bs(t.type);case 16:return bs("Lazy");case 13:return bs("Suspense");case 19:return bs("SuspenseList");case 0:case 2:case 15:return t=Sl(t.type,!1),t;case 11:return t=Sl(t.type.render,!1),t;case 1:return t=Sl(t.type,!0),t;default:return""}}function hu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wi:return"Fragment";case bi:return"Portal";case uu:return"Profiler";case Ec:return"StrictMode";case cu:return"Suspense";case du:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case up:return(t.displayName||"Context")+".Consumer";case lp:return(t._context.displayName||"Context")+".Provider";case Sc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _c:return e=t.displayName||null,e!==null?e:hu(t.type)||"Memo";case bn:e=t._payload,t=t._init;try{return hu(t(e))}catch{}}return null}function y0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hu(e);case 8:return e===Ec?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x0(t){var e=dp(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ca(t){t._valueTracker||(t._valueTracker=x0(t))}function hp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=dp(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ao(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fu(t,e){var r=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Gd(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=zn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fp(t,e){e=e.checked,e!=null&&Cc(t,"checked",e,!1)}function pu(t,e){fp(t,e);var r=zn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mu(t,e.type,r):e.hasOwnProperty("defaultValue")&&mu(t,e.type,zn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zd(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function mu(t,e,r){(e!=="number"||ao(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ws=Array.isArray;function Li(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+zn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yd(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ie(92));if(ws(r)){if(1<r.length)throw Error(ie(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:zn(r)}}function pp(t,e){var r=zn(e.value),n=zn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Kd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ea,gp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ea=Ea||document.createElement("div"),Ea.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ea.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ps(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b0=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(t){b0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Es[e]=Es[t]})});function vp(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Es.hasOwnProperty(t)&&Es[t]?(""+e).trim():e+"px"}function yp(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=vp(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var w0=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yu(t,e){if(e){if(w0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function xu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu=null;function Nc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wu=null,Ii=null,Ri=null;function Xd(t){if(t=ca(t)){if(typeof wu!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=Yo(e),wu(t.stateNode,t.type,e))}}function xp(t){Ii?Ri?Ri.push(t):Ri=[t]:Ii=t}function bp(){if(Ii){var t=Ii,e=Ri;if(Ri=Ii=null,Xd(t),e)for(t=0;t<e.length;t++)Xd(e[t])}}function wp(t,e){return t(e)}function kp(){}var _l=!1;function Cp(t,e,r){if(_l)return t(e,r);_l=!0;try{return wp(t,e,r)}finally{_l=!1,(Ii!==null||Ri!==null)&&(kp(),bp())}}function Fs(t,e){var r=t.stateNode;if(r===null)return null;var n=Yo(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ie(231,e,typeof r));return r}var ku=!1;if(on)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){ku=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{ku=!1}function k0(t,e,r,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Ss=!1,oo=null,lo=!1,Cu=null,C0={onError:function(t){Ss=!0,oo=t}};function E0(t,e,r,n,i,s,a,o,l){Ss=!1,oo=null,k0.apply(C0,arguments)}function S0(t,e,r,n,i,s,a,o,l){if(E0.apply(this,arguments),Ss){if(Ss){var c=oo;Ss=!1,oo=null}else throw Error(ie(198));lo||(lo=!0,Cu=c)}}function ai(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Ep(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qd(t){if(ai(t)!==t)throw Error(ie(188))}function _0(t){var e=t.alternate;if(!e){if(e=ai(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Qd(i),t;if(s===n)return Qd(i),e;s=s.sibling}throw Error(ie(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(ie(189))}}if(r.alternate!==n)throw Error(ie(190))}if(r.tag!==3)throw Error(ie(188));return r.stateNode.current===r?t:e}function Sp(t){return t=_0(t),t!==null?_p(t):null}function _p(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_p(t);if(e!==null)return e;t=t.sibling}return null}var Np=or.unstable_scheduleCallback,Jd=or.unstable_cancelCallback,N0=or.unstable_shouldYield,D0=or.unstable_requestPaint,ut=or.unstable_now,T0=or.unstable_getCurrentPriorityLevel,Dc=or.unstable_ImmediatePriority,Dp=or.unstable_UserBlockingPriority,uo=or.unstable_NormalPriority,A0=or.unstable_LowPriority,Tp=or.unstable_IdlePriority,qo=null,Hr=null;function j0(t){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(qo,t,void 0,(t.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:I0,B0=Math.log,L0=Math.LN2;function I0(t){return t>>>=0,t===0?32:31-(B0(t)/L0|0)|0}var Sa=64,_a=4194304;function ks(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function co(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=ks(o):(s&=a,s!==0&&(n=ks(s)))}else a=r&~i,a!==0?n=ks(a):s!==0&&(n=ks(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ir(e),i=1<<r,n|=t[r],e&=~i;return n}function R0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z0(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ir(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=R0(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function Eu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ap(){var t=Sa;return Sa<<=1,!(Sa&4194240)&&(Sa=64),t}function Nl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function la(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ir(e),t[e]=r}function P0(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Ir(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Tc(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ir(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var $e=0;function jp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bp,Ac,Lp,Ip,Rp,Su=!1,Na=[],Dn=null,Tn=null,An=null,Os=new Map,Ms=new Map,kn=[],F0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eh(t,e){switch(t){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Os.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(e.pointerId)}}function us(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ca(e),e!==null&&Ac(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function O0(t,e,r,n,i){switch(e){case"focusin":return Dn=us(Dn,t,e,r,n,i),!0;case"dragenter":return Tn=us(Tn,t,e,r,n,i),!0;case"mouseover":return An=us(An,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Os.set(s,us(Os.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Ms.set(s,us(Ms.get(s)||null,t,e,r,n,i)),!0}return!1}function zp(t){var e=qn(t.target);if(e!==null){var r=ai(e);if(r!==null){if(e=r.tag,e===13){if(e=Ep(r),e!==null){t.blockedOn=e,Rp(t.priority,function(){Lp(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=_u(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);bu=n,r.target.dispatchEvent(n),bu=null}else return e=ca(r),e!==null&&Ac(e),t.blockedOn=r,!1;e.shift()}return!0}function th(t,e,r){$a(t)&&r.delete(e)}function M0(){Su=!1,Dn!==null&&$a(Dn)&&(Dn=null),Tn!==null&&$a(Tn)&&(Tn=null),An!==null&&$a(An)&&(An=null),Os.forEach(th),Ms.forEach(th)}function cs(t,e){t.blockedOn===e&&(t.blockedOn=null,Su||(Su=!0,or.unstable_scheduleCallback(or.unstable_NormalPriority,M0)))}function Us(t){function e(i){return cs(i,t)}if(0<Na.length){cs(Na[0],t);for(var r=1;r<Na.length;r++){var n=Na[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Dn!==null&&cs(Dn,t),Tn!==null&&cs(Tn,t),An!==null&&cs(An,t),Os.forEach(e),Ms.forEach(e),r=0;r<kn.length;r++)n=kn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<kn.length&&(r=kn[0],r.blockedOn===null);)zp(r),r.blockedOn===null&&kn.shift()}var zi=gn.ReactCurrentBatchConfig,ho=!0;function U0(t,e,r,n){var i=$e,s=zi.transition;zi.transition=null;try{$e=1,jc(t,e,r,n)}finally{$e=i,zi.transition=s}}function W0(t,e,r,n){var i=$e,s=zi.transition;zi.transition=null;try{$e=4,jc(t,e,r,n)}finally{$e=i,zi.transition=s}}function jc(t,e,r,n){if(ho){var i=_u(t,e,r,n);if(i===null)Pl(t,e,n,fo,r),eh(t,n);else if(O0(i,t,e,r,n))n.stopPropagation();else if(eh(t,n),e&4&&-1<F0.indexOf(t)){for(;i!==null;){var s=ca(i);if(s!==null&&Bp(s),s=_u(t,e,r,n),s===null&&Pl(t,e,n,fo,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Pl(t,e,n,null,r)}}var fo=null;function _u(t,e,r,n){if(fo=null,t=Nc(n),t=qn(t),t!==null)if(e=ai(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Ep(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fo=t,null}function Pp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T0()){case Dc:return 1;case Dp:return 4;case uo:case A0:return 16;case Tp:return 536870912;default:return 16}default:return 16}}var En=null,Bc=null,qa=null;function Fp(){if(qa)return qa;var t,e=Bc,r=e.length,n,i="value"in En?En.value:En.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return qa=i.slice(t,1<n?1-n:void 0)}function Va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Da(){return!0}function rh(){return!1}function ur(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Da:rh,this.isPropagationStopped=rh,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),e}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lc=ur(rs),ua=rt({},rs,{view:0,detail:0}),H0=ur(ua),Dl,Tl,ds,Vo=rt({},ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ds&&(ds&&t.type==="mousemove"?(Dl=t.screenX-ds.screenX,Tl=t.screenY-ds.screenY):Tl=Dl=0,ds=t),Dl)},movementY:function(t){return"movementY"in t?t.movementY:Tl}}),nh=ur(Vo),$0=rt({},Vo,{dataTransfer:0}),q0=ur($0),V0=rt({},ua,{relatedTarget:0}),Al=ur(V0),G0=rt({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Z0=ur(G0),Y0=rt({},rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K0=ur(Y0),X0=rt({},rs,{data:0}),ih=ur(X0),Q0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ty(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ey[t])?!!e[t]:!1}function Ic(){return ty}var ry=rt({},ua,{key:function(t){if(t.key){var e=Q0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?J0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(t){return t.type==="keypress"?Va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ny=ur(ry),iy=rt({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sh=ur(iy),sy=rt({},ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),ay=ur(sy),oy=rt({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ly=ur(oy),uy=rt({},Vo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cy=ur(uy),dy=[9,13,27,32],Rc=on&&"CompositionEvent"in window,_s=null;on&&"documentMode"in document&&(_s=document.documentMode);var hy=on&&"TextEvent"in window&&!_s,Op=on&&(!Rc||_s&&8<_s&&11>=_s),ah=" ",oh=!1;function Mp(t,e){switch(t){case"keyup":return dy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ki=!1;function fy(t,e){switch(t){case"compositionend":return Up(e);case"keypress":return e.which!==32?null:(oh=!0,ah);case"textInput":return t=e.data,t===ah&&oh?null:t;default:return null}}function py(t,e){if(ki)return t==="compositionend"||!Rc&&Mp(t,e)?(t=Fp(),qa=Bc=En=null,ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Op&&e.locale!=="ko"?null:e.data;default:return null}}var my={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!my[t.type]:e==="textarea"}function Wp(t,e,r,n){xp(n),e=po(e,"onChange"),0<e.length&&(r=new Lc("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ns=null,Ws=null;function gy(t){Jp(t,0)}function Go(t){var e=Si(t);if(hp(e))return t}function vy(t,e){if(t==="change")return e}var Hp=!1;if(on){var jl;if(on){var Bl="oninput"in document;if(!Bl){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),Bl=typeof uh.oninput=="function"}jl=Bl}else jl=!1;Hp=jl&&(!document.documentMode||9<document.documentMode)}function ch(){Ns&&(Ns.detachEvent("onpropertychange",$p),Ws=Ns=null)}function $p(t){if(t.propertyName==="value"&&Go(Ws)){var e=[];Wp(e,Ws,t,Nc(t)),Cp(gy,e)}}function yy(t,e,r){t==="focusin"?(ch(),Ns=e,Ws=r,Ns.attachEvent("onpropertychange",$p)):t==="focusout"&&ch()}function xy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Go(Ws)}function by(t,e){if(t==="click")return Go(e)}function wy(t,e){if(t==="input"||t==="change")return Go(e)}function ky(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fr=typeof Object.is=="function"?Object.is:ky;function Hs(t,e){if(Fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!lu.call(e,i)||!Fr(t[i],e[i]))return!1}return!0}function dh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hh(t,e){var r=dh(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dh(r)}}function qp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vp(){for(var t=window,e=ao();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ao(t.document)}return e}function zc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cy(t){var e=Vp(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&qp(r.ownerDocument.documentElement,r)){if(n!==null&&zc(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=hh(r,s);var a=hh(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ey=on&&"documentMode"in document&&11>=document.documentMode,Ci=null,Nu=null,Ds=null,Du=!1;function fh(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Du||Ci==null||Ci!==ao(n)||(n=Ci,"selectionStart"in n&&zc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ds&&Hs(Ds,n)||(Ds=n,n=po(Nu,"onSelect"),0<n.length&&(e=new Lc("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ci)))}function Ta(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ei={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionend:Ta("Transition","TransitionEnd")},Ll={},Gp={};on&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function Zo(t){if(Ll[t])return Ll[t];if(!Ei[t])return t;var e=Ei[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Gp)return Ll[t]=e[r];return t}var Zp=Zo("animationend"),Yp=Zo("animationiteration"),Kp=Zo("animationstart"),Xp=Zo("transitionend"),Qp=new Map,ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(t,e){Qp.set(t,e),si(e,[t])}for(var Il=0;Il<ph.length;Il++){var Rl=ph[Il],Sy=Rl.toLowerCase(),_y=Rl[0].toUpperCase()+Rl.slice(1);Fn(Sy,"on"+_y)}Fn(Zp,"onAnimationEnd");Fn(Yp,"onAnimationIteration");Fn(Kp,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(Xp,"onTransitionEnd");Hi("onMouseEnter",["mouseout","mouseover"]);Hi("onMouseLeave",["mouseout","mouseover"]);Hi("onPointerEnter",["pointerout","pointerover"]);Hi("onPointerLeave",["pointerout","pointerover"]);si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));si("onBeforeInput",["compositionend","keypress","textInput","paste"]);si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cs));function mh(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,S0(n,e,void 0,t),t.currentTarget=null}function Jp(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;mh(i,o,c),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;mh(i,o,c),s=l}}}if(lo)throw t=Cu,lo=!1,Cu=null,t}function Ke(t,e){var r=e[Lu];r===void 0&&(r=e[Lu]=new Set);var n=t+"__bubble";r.has(n)||(em(e,t,2,!1),r.add(n))}function zl(t,e,r){var n=0;e&&(n|=4),em(r,t,n,e)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function $s(t){if(!t[Aa]){t[Aa]=!0,op.forEach(function(r){r!=="selectionchange"&&(Ny.has(r)||zl(r,!1,t),zl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Aa]||(e[Aa]=!0,zl("selectionchange",!1,e))}}function em(t,e,r,n){switch(Pp(e)){case 1:var i=U0;break;case 4:i=W0;break;default:i=jc}r=i.bind(null,e,r,t),i=void 0,!ku||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Pl(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=qn(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}Cp(function(){var c=s,d=Nc(r),h=[];e:{var v=Qp.get(t);if(v!==void 0){var b=Lc,N=t;switch(t){case"keypress":if(Va(r)===0)break e;case"keydown":case"keyup":b=ny;break;case"focusin":N="focus",b=Al;break;case"focusout":N="blur",b=Al;break;case"beforeblur":case"afterblur":b=Al;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=ay;break;case Zp:case Yp:case Kp:b=Z0;break;case Xp:b=ly;break;case"scroll":b=H0;break;case"wheel":b=cy;break;case"copy":case"cut":case"paste":b=K0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=sh}var k=(e&4)!==0,y=!k&&t==="scroll",p=k?v!==null?v+"Capture":null:v;k=[];for(var m=c,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=Fs(m,p),w!=null&&k.push(qs(m,w,g)))),y)break;m=m.return}0<k.length&&(v=new b(v,N,null,r,d),h.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",v&&r!==bu&&(N=r.relatedTarget||r.fromElement)&&(qn(N)||N[ln]))break e;if((b||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,b?(N=r.relatedTarget||r.toElement,b=c,N=N?qn(N):null,N!==null&&(y=ai(N),N!==y||N.tag!==5&&N.tag!==6)&&(N=null)):(b=null,N=c),b!==N)){if(k=nh,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(k=sh,w="onPointerLeave",p="onPointerEnter",m="pointer"),y=b==null?v:Si(b),g=N==null?v:Si(N),v=new k(w,m+"leave",b,r,d),v.target=y,v.relatedTarget=g,w=null,qn(d)===c&&(k=new k(p,m+"enter",N,r,d),k.target=g,k.relatedTarget=y,w=k),y=w,b&&N)t:{for(k=b,p=N,m=0,g=k;g;g=di(g))m++;for(g=0,w=p;w;w=di(w))g++;for(;0<m-g;)k=di(k),m--;for(;0<g-m;)p=di(p),g--;for(;m--;){if(k===p||p!==null&&k===p.alternate)break t;k=di(k),p=di(p)}k=null}else k=null;b!==null&&gh(h,v,b,k,!1),N!==null&&y!==null&&gh(h,y,N,k,!0)}}e:{if(v=c?Si(c):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var x=vy;else if(lh(v))if(Hp)x=wy;else{x=xy;var C=yy}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(x=by);if(x&&(x=x(t,c))){Wp(h,x,r,d);break e}C&&C(t,v,c),t==="focusout"&&(C=v._wrapperState)&&C.controlled&&v.type==="number"&&mu(v,"number",v.value)}switch(C=c?Si(c):window,t){case"focusin":(lh(C)||C.contentEditable==="true")&&(Ci=C,Nu=c,Ds=null);break;case"focusout":Ds=Nu=Ci=null;break;case"mousedown":Du=!0;break;case"contextmenu":case"mouseup":case"dragend":Du=!1,fh(h,r,d);break;case"selectionchange":if(Ey)break;case"keydown":case"keyup":fh(h,r,d)}var E;if(Rc)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ki?Mp(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(Op&&r.locale!=="ko"&&(ki||S!=="onCompositionStart"?S==="onCompositionEnd"&&ki&&(E=Fp()):(En=d,Bc="value"in En?En.value:En.textContent,ki=!0)),C=po(c,S),0<C.length&&(S=new ih(S,t,null,r,d),h.push({event:S,listeners:C}),E?S.data=E:(E=Up(r),E!==null&&(S.data=E)))),(E=hy?fy(t,r):py(t,r))&&(c=po(c,"onBeforeInput"),0<c.length&&(d=new ih("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=E))}Jp(h,e)})}function qs(t,e,r){return{instance:t,listener:e,currentTarget:r}}function po(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Fs(t,r),s!=null&&n.unshift(qs(t,s,i)),s=Fs(t,e),s!=null&&n.push(qs(t,s,i))),t=t.return}return n}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gh(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=Fs(r,s),l!=null&&a.unshift(qs(r,l,o))):i||(l=Fs(r,s),l!=null&&a.push(qs(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Dy=/\r\n?/g,Ty=/\u0000|\uFFFD/g;function vh(t){return(typeof t=="string"?t:""+t).replace(Dy,`
`).replace(Ty,"")}function ja(t,e,r){if(e=vh(e),vh(t)!==e&&r)throw Error(ie(425))}function mo(){}var Tu=null,Au=null;function ju(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bu=typeof setTimeout=="function"?setTimeout:void 0,Ay=typeof clearTimeout=="function"?clearTimeout:void 0,yh=typeof Promise=="function"?Promise:void 0,jy=typeof queueMicrotask=="function"?queueMicrotask:typeof yh<"u"?function(t){return yh.resolve(null).then(t).catch(By)}:Bu;function By(t){setTimeout(function(){throw t})}function Fl(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Us(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Us(e)}function jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ns=Math.random().toString(36).slice(2),Wr="__reactFiber$"+ns,Vs="__reactProps$"+ns,ln="__reactContainer$"+ns,Lu="__reactEvents$"+ns,Ly="__reactListeners$"+ns,Iy="__reactHandles$"+ns;function qn(t){var e=t[Wr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ln]||r[Wr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=xh(t);t!==null;){if(r=t[Wr])return r;t=xh(t)}return e}t=r,r=t.parentNode}return null}function ca(t){return t=t[Wr]||t[ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function Yo(t){return t[Vs]||null}var Iu=[],_i=-1;function On(t){return{current:t}}function Xe(t){0>_i||(t.current=Iu[_i],Iu[_i]=null,_i--)}function Ye(t,e){_i++,Iu[_i]=t.current,t.current=e}var Pn={},Pt=On(Pn),Qt=On(!1),Qn=Pn;function $i(t,e){var r=t.type.contextTypes;if(!r)return Pn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(t){return t=t.childContextTypes,t!=null}function go(){Xe(Qt),Xe(Pt)}function bh(t,e,r){if(Pt.current!==Pn)throw Error(ie(168));Ye(Pt,e),Ye(Qt,r)}function tm(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ie(108,y0(t)||"Unknown",i));return rt({},r,n)}function vo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pn,Qn=Pt.current,Ye(Pt,t),Ye(Qt,Qt.current),!0}function wh(t,e,r){var n=t.stateNode;if(!n)throw Error(ie(169));r?(t=tm(t,e,Qn),n.__reactInternalMemoizedMergedChildContext=t,Xe(Qt),Xe(Pt),Ye(Pt,t)):Xe(Qt),Ye(Qt,r)}var en=null,Ko=!1,Ol=!1;function rm(t){en===null?en=[t]:en.push(t)}function Ry(t){Ko=!0,rm(t)}function Mn(){if(!Ol&&en!==null){Ol=!0;var t=0,e=$e;try{var r=en;for($e=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}en=null,Ko=!1}catch(i){throw en!==null&&(en=en.slice(t+1)),Np(Dc,Mn),i}finally{$e=e,Ol=!1}}return null}var Ni=[],Di=0,yo=null,xo=0,fr=[],pr=0,Jn=null,tn=1,rn="";function Hn(t,e){Ni[Di++]=xo,Ni[Di++]=yo,yo=t,xo=e}function nm(t,e,r){fr[pr++]=tn,fr[pr++]=rn,fr[pr++]=Jn,Jn=t;var n=tn;t=rn;var i=32-Ir(n)-1;n&=~(1<<i),r+=1;var s=32-Ir(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,tn=1<<32-Ir(e)+i|r<<i|n,rn=s+t}else tn=1<<s|r<<i|n,rn=t}function Pc(t){t.return!==null&&(Hn(t,1),nm(t,1,0))}function Fc(t){for(;t===yo;)yo=Ni[--Di],Ni[Di]=null,xo=Ni[--Di],Ni[Di]=null;for(;t===Jn;)Jn=fr[--pr],fr[pr]=null,rn=fr[--pr],fr[pr]=null,tn=fr[--pr],fr[pr]=null}var ar=null,ir=null,Je=!1,Lr=null;function im(t,e){var r=gr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function kh(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ar=t,ir=jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ar=t,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Jn!==null?{id:tn,overflow:rn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=gr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ar=t,ir=null,!0):!1;default:return!1}}function Ru(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zu(t){if(Je){var e=ir;if(e){var r=e;if(!kh(t,e)){if(Ru(t))throw Error(ie(418));e=jn(r.nextSibling);var n=ar;e&&kh(t,e)?im(n,r):(t.flags=t.flags&-4097|2,Je=!1,ar=t)}}else{if(Ru(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Je=!1,ar=t}}}function Ch(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ar=t}function Ba(t){if(t!==ar)return!1;if(!Je)return Ch(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ju(t.type,t.memoizedProps)),e&&(e=ir)){if(Ru(t))throw sm(),Error(ie(418));for(;e;)im(t,e),e=jn(e.nextSibling)}if(Ch(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ir=jn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ir=null}}else ir=ar?jn(t.stateNode.nextSibling):null;return!0}function sm(){for(var t=ir;t;)t=jn(t.nextSibling)}function qi(){ir=ar=null,Je=!1}function Oc(t){Lr===null?Lr=[t]:Lr.push(t)}var zy=gn.ReactCurrentBatchConfig;function hs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ie(309));var n=r.stateNode}if(!n)throw Error(ie(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ie(284));if(!r._owner)throw Error(ie(290,t))}return t}function La(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Eh(t){var e=t._init;return e(t._payload)}function am(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function r(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=Rn(p,m),p.index=0,p.sibling=null,p}function s(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,m,g,w){return m===null||m.tag!==6?(m=Vl(g,p.mode,w),m.return=p,m):(m=i(m,g),m.return=p,m)}function l(p,m,g,w){var x=g.type;return x===wi?d(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===bn&&Eh(x)===m.type)?(w=i(m,g.props),w.ref=hs(p,m,g),w.return=p,w):(w=Ja(g.type,g.key,g.props,null,p.mode,w),w.ref=hs(p,m,g),w.return=p,w)}function c(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Gl(g,p.mode,w),m.return=p,m):(m=i(m,g.children||[]),m.return=p,m)}function d(p,m,g,w,x){return m===null||m.tag!==7?(m=Yn(g,p.mode,w,x),m.return=p,m):(m=i(m,g),m.return=p,m)}function h(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Vl(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ka:return g=Ja(m.type,m.key,m.props,null,p.mode,g),g.ref=hs(p,null,m),g.return=p,g;case bi:return m=Gl(m,p.mode,g),m.return=p,m;case bn:var w=m._init;return h(p,w(m._payload),g)}if(ws(m)||os(m))return m=Yn(m,p.mode,g,null),m.return=p,m;La(p,m)}return null}function v(p,m,g,w){var x=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return x!==null?null:o(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ka:return g.key===x?l(p,m,g,w):null;case bi:return g.key===x?c(p,m,g,w):null;case bn:return x=g._init,v(p,m,x(g._payload),w)}if(ws(g)||os(g))return x!==null?null:d(p,m,g,w,null);La(p,g)}return null}function b(p,m,g,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,o(m,p,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ka:return p=p.get(w.key===null?g:w.key)||null,l(m,p,w,x);case bi:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,x);case bn:var C=w._init;return b(p,m,g,C(w._payload),x)}if(ws(w)||os(w))return p=p.get(g)||null,d(m,p,w,x,null);La(m,w)}return null}function N(p,m,g,w){for(var x=null,C=null,E=m,S=m=0,I=null;E!==null&&S<g.length;S++){E.index>S?(I=E,E=null):I=E.sibling;var R=v(p,E,g[S],w);if(R===null){E===null&&(E=I);break}t&&E&&R.alternate===null&&e(p,E),m=s(R,m,S),C===null?x=R:C.sibling=R,C=R,E=I}if(S===g.length)return r(p,E),Je&&Hn(p,S),x;if(E===null){for(;S<g.length;S++)E=h(p,g[S],w),E!==null&&(m=s(E,m,S),C===null?x=E:C.sibling=E,C=E);return Je&&Hn(p,S),x}for(E=n(p,E);S<g.length;S++)I=b(E,p,S,g[S],w),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?S:I.key),m=s(I,m,S),C===null?x=I:C.sibling=I,C=I);return t&&E.forEach(function(B){return e(p,B)}),Je&&Hn(p,S),x}function k(p,m,g,w){var x=os(g);if(typeof x!="function")throw Error(ie(150));if(g=x.call(g),g==null)throw Error(ie(151));for(var C=x=null,E=m,S=m=0,I=null,R=g.next();E!==null&&!R.done;S++,R=g.next()){E.index>S?(I=E,E=null):I=E.sibling;var B=v(p,E,R.value,w);if(B===null){E===null&&(E=I);break}t&&E&&B.alternate===null&&e(p,E),m=s(B,m,S),C===null?x=B:C.sibling=B,C=B,E=I}if(R.done)return r(p,E),Je&&Hn(p,S),x;if(E===null){for(;!R.done;S++,R=g.next())R=h(p,R.value,w),R!==null&&(m=s(R,m,S),C===null?x=R:C.sibling=R,C=R);return Je&&Hn(p,S),x}for(E=n(p,E);!R.done;S++,R=g.next())R=b(E,p,S,R.value,w),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?S:R.key),m=s(R,m,S),C===null?x=R:C.sibling=R,C=R);return t&&E.forEach(function(U){return e(p,U)}),Je&&Hn(p,S),x}function y(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===wi&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ka:e:{for(var x=g.key,C=m;C!==null;){if(C.key===x){if(x=g.type,x===wi){if(C.tag===7){r(p,C.sibling),m=i(C,g.props.children),m.return=p,p=m;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===bn&&Eh(x)===C.type){r(p,C.sibling),m=i(C,g.props),m.ref=hs(p,C,g),m.return=p,p=m;break e}r(p,C);break}else e(p,C);C=C.sibling}g.type===wi?(m=Yn(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=Ja(g.type,g.key,g.props,null,p.mode,w),w.ref=hs(p,m,g),w.return=p,p=w)}return a(p);case bi:e:{for(C=g.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(p,m.sibling),m=i(m,g.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else e(p,m);m=m.sibling}m=Gl(g,p.mode,w),m.return=p,p=m}return a(p);case bn:return C=g._init,y(p,m,C(g._payload),w)}if(ws(g))return N(p,m,g,w);if(os(g))return k(p,m,g,w);La(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(r(p,m.sibling),m=i(m,g),m.return=p,p=m):(r(p,m),m=Vl(g,p.mode,w),m.return=p,p=m),a(p)):r(p,m)}return y}var Vi=am(!0),om=am(!1),bo=On(null),wo=null,Ti=null,Mc=null;function Uc(){Mc=Ti=wo=null}function Wc(t){var e=bo.current;Xe(bo),t._currentValue=e}function Pu(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Pi(t,e){wo=t,Mc=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(Mc!==t)if(t={context:t,memoizedValue:e,next:null},Ti===null){if(wo===null)throw Error(ie(308));Ti=t,wo.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return e}var Vn=null;function Hc(t){Vn===null?Vn=[t]:Vn.push(t)}function lm(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Hc(e)):(r.next=i.next,i.next=r),e.interleaved=r,un(t,n)}function un(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var wn=!1;function $c(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function um(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Me&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,un(t,r)}return i=n.interleaved,i===null?(e.next=e,Hc(n)):(e.next=i.next,i.next=e),n.interleaved=e,un(t,r)}function Ga(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Tc(t,r)}}function Sh(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ko(t,e,r,n){var i=t.updateQueue;wn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;a=0,d=c=l=null,o=s;do{var v=o.lane,b=o.eventTime;if((n&v)===v){d!==null&&(d=d.next={eventTime:b,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=t,k=o;switch(v=e,b=r,k.tag){case 1:if(N=k.payload,typeof N=="function"){h=N.call(b,h,v);break e}h=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,v=typeof N=="function"?N.call(b,h,v):N,v==null)break e;h=rt({},h,v);break e;case 2:wn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[o]:v.push(o))}else b={eventTime:b,lane:v,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=b,l=h):d=d.next=b,a|=v;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;v=o,o=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ti|=a,t.lanes=a,t.memoizedState=h}}function _h(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ie(191,i));i.call(n)}}}var da={},$r=On(da),Gs=On(da),Zs=On(da);function Gn(t){if(t===da)throw Error(ie(174));return t}function qc(t,e){switch(Ye(Zs,e),Ye(Gs,t),Ye($r,da),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vu(e,t)}Xe($r),Ye($r,e)}function Gi(){Xe($r),Xe(Gs),Xe(Zs)}function cm(t){Gn(Zs.current);var e=Gn($r.current),r=vu(e,t.type);e!==r&&(Ye(Gs,t),Ye($r,r))}function Vc(t){Gs.current===t&&(Xe($r),Xe(Gs))}var et=On(0);function Co(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ml=[];function Gc(){for(var t=0;t<Ml.length;t++)Ml[t]._workInProgressVersionPrimary=null;Ml.length=0}var Za=gn.ReactCurrentDispatcher,Ul=gn.ReactCurrentBatchConfig,ei=0,tt=null,vt=null,kt=null,Eo=!1,Ts=!1,Ys=0,Py=0;function It(){throw Error(ie(321))}function Zc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Fr(t[r],e[r]))return!1;return!0}function Yc(t,e,r,n,i,s){if(ei=s,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Za.current=t===null||t.memoizedState===null?Uy:Wy,t=r(n,i),Ts){s=0;do{if(Ts=!1,Ys=0,25<=s)throw Error(ie(301));s+=1,kt=vt=null,e.updateQueue=null,Za.current=Hy,t=r(n,i)}while(Ts)}if(Za.current=So,e=vt!==null&&vt.next!==null,ei=0,kt=vt=tt=null,Eo=!1,e)throw Error(ie(300));return t}function Kc(){var t=Ys!==0;return Ys=0,t}function Ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?tt.memoizedState=kt=t:kt=kt.next=t,kt}function br(){if(vt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=kt===null?tt.memoizedState:kt.next;if(e!==null)kt=e,vt=t;else{if(t===null)throw Error(ie(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},kt===null?tt.memoizedState=kt=t:kt=kt.next=t}return kt}function Ks(t,e){return typeof e=="function"?e(t):e}function Wl(t){var e=br(),r=e.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=t;var n=vt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,c=s;do{var d=c.lane;if((ei&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,tt.lanes|=d,ti|=d}c=c.next}while(c!==null&&c!==s);l===null?a=n:l.next=o,Fr(n,e.memoizedState)||(Xt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,tt.lanes|=s,ti|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Hl(t){var e=br(),r=e.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Fr(s,e.memoizedState)||(Xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function dm(){}function hm(t,e){var r=tt,n=br(),i=e(),s=!Fr(n.memoizedState,i);if(s&&(n.memoizedState=i,Xt=!0),n=n.queue,Xc(mm.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||kt!==null&&kt.memoizedState.tag&1){if(r.flags|=2048,Xs(9,pm.bind(null,r,n,i,e),void 0,null),Et===null)throw Error(ie(349));ei&30||fm(r,e,i)}return i}function fm(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function pm(t,e,r,n){e.value=r,e.getSnapshot=n,gm(e)&&vm(t)}function mm(t,e,r){return r(function(){gm(e)&&vm(t)})}function gm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Fr(t,r)}catch{return!0}}function vm(t){var e=un(t,1);e!==null&&Rr(e,t,1,-1)}function Nh(t){var e=Ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},e.queue=t,t=t.dispatch=My.bind(null,tt,t),[e.memoizedState,t]}function Xs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ym(){return br().memoizedState}function Ya(t,e,r,n){var i=Ur();tt.flags|=t,i.memoizedState=Xs(1|e,r,void 0,n===void 0?null:n)}function Xo(t,e,r,n){var i=br();n=n===void 0?null:n;var s=void 0;if(vt!==null){var a=vt.memoizedState;if(s=a.destroy,n!==null&&Zc(n,a.deps)){i.memoizedState=Xs(e,r,s,n);return}}tt.flags|=t,i.memoizedState=Xs(1|e,r,s,n)}function Dh(t,e){return Ya(8390656,8,t,e)}function Xc(t,e){return Xo(2048,8,t,e)}function xm(t,e){return Xo(4,2,t,e)}function bm(t,e){return Xo(4,4,t,e)}function wm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function km(t,e,r){return r=r!=null?r.concat([t]):null,Xo(4,4,wm.bind(null,e,t),r)}function Qc(){}function Cm(t,e){var r=br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Zc(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Em(t,e){var r=br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Zc(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Sm(t,e,r){return ei&21?(Fr(r,e)||(r=Ap(),tt.lanes|=r,ti|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=r)}function Fy(t,e){var r=$e;$e=r!==0&&4>r?r:4,t(!0);var n=Ul.transition;Ul.transition={};try{t(!1),e()}finally{$e=r,Ul.transition=n}}function _m(){return br().memoizedState}function Oy(t,e,r){var n=In(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Nm(t))Dm(e,r);else if(r=lm(t,e,r,n),r!==null){var i=Wt();Rr(r,t,n,i),Tm(r,e,n)}}function My(t,e,r){var n=In(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nm(t))Dm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,Fr(o,a)){var l=e.interleaved;l===null?(i.next=i,Hc(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=lm(t,e,i,n),r!==null&&(i=Wt(),Rr(r,t,n,i),Tm(r,e,n))}}function Nm(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function Dm(t,e){Ts=Eo=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Tm(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Tc(t,r)}}var So={readContext:xr,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},Uy={readContext:xr,useCallback:function(t,e){return Ur().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:Dh,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ya(4194308,4,wm.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var r=Ur();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ur();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Oy.bind(null,tt,t),[n.memoizedState,t]},useRef:function(t){var e=Ur();return t={current:t},e.memoizedState=t},useState:Nh,useDebugValue:Qc,useDeferredValue:function(t){return Ur().memoizedState=t},useTransition:function(){var t=Nh(!1),e=t[0];return t=Fy.bind(null,t[1]),Ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=tt,i=Ur();if(Je){if(r===void 0)throw Error(ie(407));r=r()}else{if(r=e(),Et===null)throw Error(ie(349));ei&30||fm(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Dh(mm.bind(null,n,s,t),[t]),n.flags|=2048,Xs(9,pm.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ur(),e=Et.identifierPrefix;if(Je){var r=rn,n=tn;r=(n&~(1<<32-Ir(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ys++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Py++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Wy={readContext:xr,useCallback:Cm,useContext:xr,useEffect:Xc,useImperativeHandle:km,useInsertionEffect:xm,useLayoutEffect:bm,useMemo:Em,useReducer:Wl,useRef:ym,useState:function(){return Wl(Ks)},useDebugValue:Qc,useDeferredValue:function(t){var e=br();return Sm(e,vt.memoizedState,t)},useTransition:function(){var t=Wl(Ks)[0],e=br().memoizedState;return[t,e]},useMutableSource:dm,useSyncExternalStore:hm,useId:_m,unstable_isNewReconciler:!1},Hy={readContext:xr,useCallback:Cm,useContext:xr,useEffect:Xc,useImperativeHandle:km,useInsertionEffect:xm,useLayoutEffect:bm,useMemo:Em,useReducer:Hl,useRef:ym,useState:function(){return Hl(Ks)},useDebugValue:Qc,useDeferredValue:function(t){var e=br();return vt===null?e.memoizedState=t:Sm(e,vt.memoizedState,t)},useTransition:function(){var t=Hl(Ks)[0],e=br().memoizedState;return[t,e]},useMutableSource:dm,useSyncExternalStore:hm,useId:_m,unstable_isNewReconciler:!1};function Tr(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Fu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:rt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Qo={isMounted:function(t){return(t=t._reactInternals)?ai(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Wt(),i=In(t),s=sn(n,i);s.payload=e,r!=null&&(s.callback=r),e=Bn(t,s,i),e!==null&&(Rr(e,t,i,n),Ga(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Wt(),i=In(t),s=sn(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Bn(t,s,i),e!==null&&(Rr(e,t,i,n),Ga(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Wt(),n=In(t),i=sn(r,n);i.tag=2,e!=null&&(i.callback=e),e=Bn(t,i,n),e!==null&&(Rr(e,t,n,r),Ga(e,t,n))}};function Th(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Hs(r,n)||!Hs(i,s):!0}function Am(t,e,r){var n=!1,i=Pn,s=e.contextType;return typeof s=="object"&&s!==null?s=xr(s):(i=Jt(e)?Qn:Pt.current,n=e.contextTypes,s=(n=n!=null)?$i(t,i):Pn),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ah(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Qo.enqueueReplaceState(e,e.state,null)}function Ou(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},$c(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xr(s):(s=Jt(e)?Qn:Pt.current,i.context=$i(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fu(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qo.enqueueReplaceState(i,i.state,null),ko(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zi(t,e){try{var r="",n=e;do r+=v0(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function $l(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Mu(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var $y=typeof WeakMap=="function"?WeakMap:Map;function jm(t,e,r){r=sn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){No||(No=!0,Ku=n),Mu(t,e)},r}function Bm(t,e,r){r=sn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Mu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Mu(t,e),typeof n!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function jh(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new $y;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=i2.bind(null,t,e,r),e.then(t,t))}function Bh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Lh(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sn(-1,1),e.tag=2,Bn(r,e,1))),r.lanes|=1),t)}var qy=gn.ReactCurrentOwner,Xt=!1;function Ut(t,e,r,n){e.child=t===null?om(e,null,r,n):Vi(e,t.child,r,n)}function Ih(t,e,r,n,i){r=r.render;var s=e.ref;return Pi(e,i),n=Yc(t,e,r,n,s,i),r=Kc(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,cn(t,e,i)):(Je&&r&&Pc(e),e.flags|=1,Ut(t,e,n,i),e.child)}function Rh(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!ad(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Lm(t,e,s,n,i)):(t=Ja(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Hs,r(a,n)&&t.ref===e.ref)return cn(t,e,i)}return e.flags|=1,t=Rn(s,n),t.ref=e.ref,t.return=e,e.child=t}function Lm(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Hs(s,n)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,cn(t,e,i)}return Uu(t,e,r,n,i)}function Im(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ji,nr),nr|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(ji,nr),nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ye(ji,nr),nr|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ye(ji,nr),nr|=n;return Ut(t,e,i,r),e.child}function Rm(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Uu(t,e,r,n,i){var s=Jt(r)?Qn:Pt.current;return s=$i(e,s),Pi(e,i),r=Yc(t,e,r,n,s,i),n=Kc(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,cn(t,e,i)):(Je&&n&&Pc(e),e.flags|=1,Ut(t,e,r,i),e.child)}function zh(t,e,r,n,i){if(Jt(r)){var s=!0;vo(e)}else s=!1;if(Pi(e,i),e.stateNode===null)Ka(t,e),Am(e,r,n),Ou(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=xr(c):(c=Jt(r)?Qn:Pt.current,c=$i(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&Ah(e,a,n,c),wn=!1;var v=e.memoizedState;a.state=v,ko(e,n,a,i),l=e.memoizedState,o!==n||v!==l||Qt.current||wn?(typeof d=="function"&&(Fu(e,r,d,n),l=e.memoizedState),(o=wn||Th(e,r,o,n,v,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,um(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Tr(e.type,o),a.props=c,h=e.pendingProps,v=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=xr(l):(l=Jt(r)?Qn:Pt.current,l=$i(e,l));var b=r.getDerivedStateFromProps;(d=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||v!==l)&&Ah(e,a,n,l),wn=!1,v=e.memoizedState,a.state=v,ko(e,n,a,i);var N=e.memoizedState;o!==h||v!==N||Qt.current||wn?(typeof b=="function"&&(Fu(e,r,b,n),N=e.memoizedState),(c=wn||Th(e,r,c,n,v,N,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,N,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,N,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=N),a.props=n,a.state=N,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),n=!1)}return Wu(t,e,r,n,s,i)}function Wu(t,e,r,n,i,s){Rm(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&wh(e,r,!1),cn(t,e,s);n=e.stateNode,qy.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Vi(e,t.child,null,s),e.child=Vi(e,null,o,s)):Ut(t,e,o,s),e.memoizedState=n.state,i&&wh(e,r,!0),e.child}function zm(t){var e=t.stateNode;e.pendingContext?bh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bh(t,e.context,!1),qc(t,e.containerInfo)}function Ph(t,e,r,n,i){return qi(),Oc(i),e.flags|=256,Ut(t,e,r,n),e.child}var Hu={dehydrated:null,treeContext:null,retryLane:0};function $u(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pm(t,e,r){var n=e.pendingProps,i=et.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(et,i&1),t===null)return zu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=tl(a,n,0,null),t=Yn(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$u(r),e.memoizedState=Hu,t):Jc(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Vy(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Rn(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Rn(o,s):(s=Yn(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?$u(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=Hu,n}return s=t.child,t=s.sibling,n=Rn(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Jc(t,e){return e=tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ia(t,e,r,n){return n!==null&&Oc(n),Vi(e,t.child,null,r),t=Jc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Vy(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=$l(Error(ie(422))),Ia(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=tl({mode:"visible",children:n.children},i,0,null),s=Yn(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Vi(e,t.child,null,a),e.child.memoizedState=$u(a),e.memoizedState=Hu,s);if(!(e.mode&1))return Ia(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(ie(419)),n=$l(s,n,void 0),Ia(t,e,a,n)}if(o=(a&t.childLanes)!==0,Xt||o){if(n=Et,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,un(t,i),Rr(n,t,i,-1))}return sd(),n=$l(Error(ie(421))),Ia(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ir=jn(i.nextSibling),ar=e,Je=!0,Lr=null,t!==null&&(fr[pr++]=tn,fr[pr++]=rn,fr[pr++]=Jn,tn=t.id,rn=t.overflow,Jn=e),e=Jc(e,n.children),e.flags|=4096,e)}function Fh(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Pu(t.return,e,r)}function ql(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Fm(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ut(t,e,n.children,r),n=et.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fh(t,r,e);else if(t.tag===19)Fh(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ye(et,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Co(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),ql(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Co(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}ql(e,!0,r,null,s);break;case"together":ql(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ka(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ti|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,r=Rn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Rn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Gy(t,e,r){switch(e.tag){case 3:zm(e),qi();break;case 5:cm(e);break;case 1:Jt(e.type)&&vo(e);break;case 4:qc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ye(bo,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ye(et,et.current&1),e.flags|=128,null):r&e.child.childLanes?Pm(t,e,r):(Ye(et,et.current&1),t=cn(t,e,r),t!==null?t.sibling:null);Ye(et,et.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Fm(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(et,et.current),n)break;return null;case 22:case 23:return e.lanes=0,Im(t,e,r)}return cn(t,e,r)}var Om,qu,Mm,Um;Om=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};qu=function(){};Mm=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Gn($r.current);var s=null;switch(r){case"input":i=fu(t,i),n=fu(t,n),s=[];break;case"select":i=rt({},i,{value:void 0}),n=rt({},n,{value:void 0}),s=[];break;case"textarea":i=gu(t,i),n=gu(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=mo)}yu(r,n);var a;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zs.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ke("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Um=function(t,e,r,n){r!==n&&(e.flags|=4)};function fs(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Zy(t,e,r){var n=e.pendingProps;switch(Fc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return Jt(e.type)&&go(),Rt(e),null;case 3:return n=e.stateNode,Gi(),Xe(Qt),Xe(Pt),Gc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(Ju(Lr),Lr=null))),qu(t,e),Rt(e),null;case 5:Vc(e);var i=Gn(Zs.current);if(r=e.type,t!==null&&e.stateNode!=null)Mm(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ie(166));return Rt(e),null}if(t=Gn($r.current),Ba(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Wr]=e,n[Vs]=s,t=(e.mode&1)!==0,r){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(i=0;i<Cs.length;i++)Ke(Cs[i],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":Gd(n,s),Ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",n);break;case"textarea":Yd(n,s),Ke("invalid",n)}yu(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&ja(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ja(n.textContent,o,t),i=["children",""+o]):zs.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ke("scroll",n)}switch(r){case"input":Ca(n),Zd(n,s,!0);break;case"textarea":Ca(n),Kd(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=mo)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mp(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Wr]=e,t[Vs]=n,Om(t,e,!1,!1),e.stateNode=t;e:{switch(a=xu(r,n),r){case"dialog":Ke("cancel",t),Ke("close",t),i=n;break;case"iframe":case"object":case"embed":Ke("load",t),i=n;break;case"video":case"audio":for(i=0;i<Cs.length;i++)Ke(Cs[i],t);i=n;break;case"source":Ke("error",t),i=n;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=n;break;case"details":Ke("toggle",t),i=n;break;case"input":Gd(t,n),i=fu(t,n),Ke("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=rt({},n,{value:void 0}),Ke("invalid",t);break;case"textarea":Yd(t,n),i=gu(t,n),Ke("invalid",t);break;default:i=n}yu(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?yp(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gp(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ps(t,l):typeof l=="number"&&Ps(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ke("scroll",t):l!=null&&Cc(t,s,l,a))}switch(r){case"input":Ca(t),Zd(t,n,!1);break;case"textarea":Ca(t),Kd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+zn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Li(t,!!n.multiple,s,!1):n.defaultValue!=null&&Li(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)Um(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ie(166));if(r=Gn(Zs.current),Gn($r.current),Ba(e)){if(n=e.stateNode,r=e.memoizedProps,n[Wr]=e,(s=n.nodeValue!==r)&&(t=ar,t!==null))switch(t.tag){case 3:ja(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wr]=e,e.stateNode=n}return Rt(e),null;case 13:if(Xe(et),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&ir!==null&&e.mode&1&&!(e.flags&128))sm(),qi(),e.flags|=98560,s=!1;else if(s=Ba(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ie(317));s[Wr]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),s=!1}else Lr!==null&&(Ju(Lr),Lr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?yt===0&&(yt=3):sd())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return Gi(),qu(t,e),t===null&&$s(e.stateNode.containerInfo),Rt(e),null;case 10:return Wc(e.type._context),Rt(e),null;case 17:return Jt(e.type)&&go(),Rt(e),null;case 19:if(Xe(et),s=e.memoizedState,s===null)return Rt(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)fs(s,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Co(t),a!==null){for(e.flags|=128,fs(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ye(et,et.current&1|2),e.child}t=t.sibling}s.tail!==null&&ut()>Yi&&(e.flags|=128,n=!0,fs(s,!1),e.lanes=4194304)}else{if(!n)if(t=Co(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Je)return Rt(e),null}else 2*ut()-s.renderingStartTime>Yi&&r!==1073741824&&(e.flags|=128,n=!0,fs(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ut(),e.sibling=null,r=et.current,Ye(et,n?r&1|2:r&1),e):(Rt(e),null);case 22:case 23:return id(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?nr&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function Yy(t,e){switch(Fc(e),e.tag){case 1:return Jt(e.type)&&go(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gi(),Xe(Qt),Xe(Pt),Gc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vc(e),null;case 13:if(Xe(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(et),null;case 4:return Gi(),null;case 10:return Wc(e.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var Ra=!1,zt=!1,Ky=typeof WeakSet=="function"?WeakSet:Set,be=null;function Ai(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){it(t,e,n)}else r.current=null}function Vu(t,e,r){try{r()}catch(n){it(t,e,n)}}var Oh=!1;function Xy(t,e){if(Tu=ho,t=Vp(),zc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,d=0,h=t,v=null;t:for(;;){for(var b;h!==r||i!==0&&h.nodeType!==3||(o=a+i),h!==s||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(b=h.firstChild)!==null;)v=h,h=b;for(;;){if(h===t)break t;if(v===r&&++c===i&&(o=a),v===s&&++d===n&&(l=a),(b=h.nextSibling)!==null)break;h=v,v=h.parentNode}h=b}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Au={focusedElem:t,selectionRange:r},ho=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var k=N.memoizedProps,y=N.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?k:Tr(e.type,k),y);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(w){it(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return N=Oh,Oh=!1,N}function As(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Vu(e,r,s)}i=i.next}while(i!==n)}}function Jo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Gu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Wm(t){var e=t.alternate;e!==null&&(t.alternate=null,Wm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wr],delete e[Vs],delete e[Lu],delete e[Ly],delete e[Iy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hm(t){return t.tag===5||t.tag===3||t.tag===4}function Mh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=mo));else if(n!==4&&(t=t.child,t!==null))for(Zu(t,e,r),t=t.sibling;t!==null;)Zu(t,e,r),t=t.sibling}function Yu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Yu(t,e,r),t=t.sibling;t!==null;)Yu(t,e,r),t=t.sibling}var Nt=null,jr=!1;function yn(t,e,r){for(r=r.child;r!==null;)$m(t,e,r),r=r.sibling}function $m(t,e,r){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(qo,r)}catch{}switch(r.tag){case 5:zt||Ai(r,e);case 6:var n=Nt,i=jr;Nt=null,yn(t,e,r),Nt=n,jr=i,Nt!==null&&(jr?(t=Nt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Nt.removeChild(r.stateNode));break;case 18:Nt!==null&&(jr?(t=Nt,r=r.stateNode,t.nodeType===8?Fl(t.parentNode,r):t.nodeType===1&&Fl(t,r),Us(t)):Fl(Nt,r.stateNode));break;case 4:n=Nt,i=jr,Nt=r.stateNode.containerInfo,jr=!0,yn(t,e,r),Nt=n,jr=i;break;case 0:case 11:case 14:case 15:if(!zt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Vu(r,e,a),i=i.next}while(i!==n)}yn(t,e,r);break;case 1:if(!zt&&(Ai(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){it(r,e,o)}yn(t,e,r);break;case 21:yn(t,e,r);break;case 22:r.mode&1?(zt=(n=zt)||r.memoizedState!==null,yn(t,e,r),zt=n):yn(t,e,r);break;default:yn(t,e,r)}}function Uh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Ky),e.forEach(function(n){var i=a2.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Nr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Nt=o.stateNode,jr=!1;break e;case 3:Nt=o.stateNode.containerInfo,jr=!0;break e;case 4:Nt=o.stateNode.containerInfo,jr=!0;break e}o=o.return}if(Nt===null)throw Error(ie(160));$m(s,a,i),Nt=null,jr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){it(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qm(e,t),e=e.sibling}function qm(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nr(e,t),Or(t),n&4){try{As(3,t,t.return),Jo(3,t)}catch(k){it(t,t.return,k)}try{As(5,t,t.return)}catch(k){it(t,t.return,k)}}break;case 1:Nr(e,t),Or(t),n&512&&r!==null&&Ai(r,r.return);break;case 5:if(Nr(e,t),Or(t),n&512&&r!==null&&Ai(r,r.return),t.flags&32){var i=t.stateNode;try{Ps(i,"")}catch(k){it(t,t.return,k)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&fp(i,s),xu(o,a);var c=xu(o,s);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?yp(i,h):d==="dangerouslySetInnerHTML"?gp(i,h):d==="children"?Ps(i,h):Cc(i,d,h,c)}switch(o){case"input":pu(i,s);break;case"textarea":pp(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?Li(i,!!s.multiple,b,!1):v!==!!s.multiple&&(s.defaultValue!=null?Li(i,!!s.multiple,s.defaultValue,!0):Li(i,!!s.multiple,s.multiple?[]:"",!1))}i[Vs]=s}catch(k){it(t,t.return,k)}}break;case 6:if(Nr(e,t),Or(t),n&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){it(t,t.return,k)}}break;case 3:if(Nr(e,t),Or(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Us(e.containerInfo)}catch(k){it(t,t.return,k)}break;case 4:Nr(e,t),Or(t);break;case 13:Nr(e,t),Or(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rd=ut())),n&4&&Uh(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(zt=(c=zt)||d,Nr(e,t),zt=c):Nr(e,t),Or(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(h=be=d;be!==null;){switch(v=be,b=v.child,v.tag){case 0:case 11:case 14:case 15:As(4,v,v.return);break;case 1:Ai(v,v.return);var N=v.stateNode;if(typeof N.componentWillUnmount=="function"){n=v,r=v.return;try{e=n,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(k){it(n,r,k)}}break;case 5:Ai(v,v.return);break;case 22:if(v.memoizedState!==null){Hh(h);continue}}b!==null?(b.return=v,be=b):Hh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=vp("display",a))}catch(k){it(t,t.return,k)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(k){it(t,t.return,k)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nr(e,t),Or(t),n&4&&Uh(t);break;case 21:break;default:Nr(e,t),Or(t)}}function Or(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Hm(r)){var n=r;break e}r=r.return}throw Error(ie(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ps(i,""),n.flags&=-33);var s=Mh(t);Yu(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Mh(t);Zu(t,o,a);break;default:throw Error(ie(161))}}catch(l){it(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qy(t,e,r){be=t,Vm(t)}function Vm(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Ra;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||zt;o=Ra;var c=zt;if(Ra=a,(zt=l)&&!c)for(be=i;be!==null;)a=be,l=a.child,a.tag===22&&a.memoizedState!==null?$h(i):l!==null?(l.return=a,be=l):$h(i);for(;s!==null;)be=s,Vm(s),s=s.sibling;be=i,Ra=o,zt=c}Wh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):Wh(t)}}function Wh(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||Jo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!zt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Tr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_h(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}_h(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Us(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}zt||e.flags&512&&Gu(e)}catch(v){it(e,e.return,v)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function Hh(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function $h(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Jo(4,e)}catch(l){it(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){it(e,i,l)}}var s=e.return;try{Gu(e)}catch(l){it(e,s,l)}break;case 5:var a=e.return;try{Gu(e)}catch(l){it(e,a,l)}}}catch(l){it(e,e.return,l)}if(e===t){be=null;break}var o=e.sibling;if(o!==null){o.return=e.return,be=o;break}be=e.return}}var Jy=Math.ceil,_o=gn.ReactCurrentDispatcher,ed=gn.ReactCurrentOwner,yr=gn.ReactCurrentBatchConfig,Me=0,Et=null,ht=null,Tt=0,nr=0,ji=On(0),yt=0,Qs=null,ti=0,el=0,td=0,js=null,Yt=null,rd=0,Yi=1/0,Jr=null,No=!1,Ku=null,Ln=null,za=!1,Sn=null,Do=0,Bs=0,Xu=null,Xa=-1,Qa=0;function Wt(){return Me&6?ut():Xa!==-1?Xa:Xa=ut()}function In(t){return t.mode&1?Me&2&&Tt!==0?Tt&-Tt:zy.transition!==null?(Qa===0&&(Qa=Ap()),Qa):(t=$e,t!==0||(t=window.event,t=t===void 0?16:Pp(t.type)),t):1}function Rr(t,e,r,n){if(50<Bs)throw Bs=0,Xu=null,Error(ie(185));la(t,r,n),(!(Me&2)||t!==Et)&&(t===Et&&(!(Me&2)&&(el|=r),yt===4&&Cn(t,Tt)),er(t,n),r===1&&Me===0&&!(e.mode&1)&&(Yi=ut()+500,Ko&&Mn()))}function er(t,e){var r=t.callbackNode;z0(t,e);var n=co(t,t===Et?Tt:0);if(n===0)r!==null&&Jd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Jd(r),e===1)t.tag===0?Ry(qh.bind(null,t)):rm(qh.bind(null,t)),jy(function(){!(Me&6)&&Mn()}),r=null;else{switch(jp(n)){case 1:r=Dc;break;case 4:r=Dp;break;case 16:r=uo;break;case 536870912:r=Tp;break;default:r=uo}r=eg(r,Gm.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Gm(t,e){if(Xa=-1,Qa=0,Me&6)throw Error(ie(327));var r=t.callbackNode;if(Fi()&&t.callbackNode!==r)return null;var n=co(t,t===Et?Tt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=To(t,n);else{e=n;var i=Me;Me|=2;var s=Ym();(Et!==t||Tt!==e)&&(Jr=null,Yi=ut()+500,Zn(t,e));do try{r2();break}catch(o){Zm(t,o)}while(!0);Uc(),_o.current=s,Me=i,ht!==null?e=0:(Et=null,Tt=0,e=yt)}if(e!==0){if(e===2&&(i=Eu(t),i!==0&&(n=i,e=Qu(t,i))),e===1)throw r=Qs,Zn(t,0),Cn(t,n),er(t,ut()),r;if(e===6)Cn(t,n);else{if(i=t.current.alternate,!(n&30)&&!e2(i)&&(e=To(t,n),e===2&&(s=Eu(t),s!==0&&(n=s,e=Qu(t,s))),e===1))throw r=Qs,Zn(t,0),Cn(t,n),er(t,ut()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ie(345));case 2:$n(t,Yt,Jr);break;case 3:if(Cn(t,n),(n&130023424)===n&&(e=rd+500-ut(),10<e)){if(co(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bu($n.bind(null,t,Yt,Jr),e);break}$n(t,Yt,Jr);break;case 4:if(Cn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Ir(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=ut()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jy(n/1960))-n,10<n){t.timeoutHandle=Bu($n.bind(null,t,Yt,Jr),n);break}$n(t,Yt,Jr);break;case 5:$n(t,Yt,Jr);break;default:throw Error(ie(329))}}}return er(t,ut()),t.callbackNode===r?Gm.bind(null,t):null}function Qu(t,e){var r=js;return t.current.memoizedState.isDehydrated&&(Zn(t,e).flags|=256),t=To(t,e),t!==2&&(e=Yt,Yt=r,e!==null&&Ju(e)),t}function Ju(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function e2(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Fr(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~td,e&=~el,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ir(e),n=1<<r;t[r]=-1,e&=~n}}function qh(t){if(Me&6)throw Error(ie(327));Fi();var e=co(t,0);if(!(e&1))return er(t,ut()),null;var r=To(t,e);if(t.tag!==0&&r===2){var n=Eu(t);n!==0&&(e=n,r=Qu(t,n))}if(r===1)throw r=Qs,Zn(t,0),Cn(t,e),er(t,ut()),r;if(r===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$n(t,Yt,Jr),er(t,ut()),null}function nd(t,e){var r=Me;Me|=1;try{return t(e)}finally{Me=r,Me===0&&(Yi=ut()+500,Ko&&Mn())}}function ri(t){Sn!==null&&Sn.tag===0&&!(Me&6)&&Fi();var e=Me;Me|=1;var r=yr.transition,n=$e;try{if(yr.transition=null,$e=1,t)return t()}finally{$e=n,yr.transition=r,Me=e,!(Me&6)&&Mn()}}function id(){nr=ji.current,Xe(ji)}function Zn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Ay(r)),ht!==null)for(r=ht.return;r!==null;){var n=r;switch(Fc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&go();break;case 3:Gi(),Xe(Qt),Xe(Pt),Gc();break;case 5:Vc(n);break;case 4:Gi();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:Wc(n.type._context);break;case 22:case 23:id()}r=r.return}if(Et=t,ht=t=Rn(t.current,null),Tt=nr=e,yt=0,Qs=null,td=el=ti=0,Yt=js=null,Vn!==null){for(e=0;e<Vn.length;e++)if(r=Vn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Vn=null}return t}function Zm(t,e){do{var r=ht;try{if(Uc(),Za.current=So,Eo){for(var n=tt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Eo=!1}if(ei=0,kt=vt=tt=null,Ts=!1,Ys=0,ed.current=null,r===null||r.return===null){yt=1,Qs=e,ht=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=Tt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var b=Bh(a);if(b!==null){b.flags&=-257,Lh(b,a,o,s,e),b.mode&1&&jh(s,c,e),e=b,l=c;var N=e.updateQueue;if(N===null){var k=new Set;k.add(l),e.updateQueue=k}else N.add(l);break e}else{if(!(e&1)){jh(s,c,e),sd();break e}l=Error(ie(426))}}else if(Je&&o.mode&1){var y=Bh(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Lh(y,a,o,s,e),Oc(Zi(l,o));break e}}s=l=Zi(l,o),yt!==4&&(yt=2),js===null?js=[s]:js.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=jm(s,l,e);Sh(s,p);break e;case 1:o=l;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ln===null||!Ln.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Bm(s,o,e);Sh(s,w);break e}}s=s.return}while(s!==null)}Xm(r)}catch(x){e=x,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(!0)}function Ym(){var t=_o.current;return _o.current=So,t===null?So:t}function sd(){(yt===0||yt===3||yt===2)&&(yt=4),Et===null||!(ti&268435455)&&!(el&268435455)||Cn(Et,Tt)}function To(t,e){var r=Me;Me|=2;var n=Ym();(Et!==t||Tt!==e)&&(Jr=null,Zn(t,e));do try{t2();break}catch(i){Zm(t,i)}while(!0);if(Uc(),Me=r,_o.current=n,ht!==null)throw Error(ie(261));return Et=null,Tt=0,yt}function t2(){for(;ht!==null;)Km(ht)}function r2(){for(;ht!==null&&!N0();)Km(ht)}function Km(t){var e=Jm(t.alternate,t,nr);t.memoizedProps=t.pendingProps,e===null?Xm(t):ht=e,ed.current=null}function Xm(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Yy(r,e),r!==null){r.flags&=32767,ht=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ht=null;return}}else if(r=Zy(r,e,nr),r!==null){ht=r;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);yt===0&&(yt=5)}function $n(t,e,r){var n=$e,i=yr.transition;try{yr.transition=null,$e=1,n2(t,e,r,n)}finally{yr.transition=i,$e=n}return null}function n2(t,e,r,n){do Fi();while(Sn!==null);if(Me&6)throw Error(ie(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(P0(t,s),t===Et&&(ht=Et=null,Tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||za||(za=!0,eg(uo,function(){return Fi(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=yr.transition,yr.transition=null;var a=$e;$e=1;var o=Me;Me|=4,ed.current=null,Xy(t,r),qm(r,t),Cy(Au),ho=!!Tu,Au=Tu=null,t.current=r,Qy(r),D0(),Me=o,$e=a,yr.transition=s}else t.current=r;if(za&&(za=!1,Sn=t,Do=i),s=t.pendingLanes,s===0&&(Ln=null),j0(r.stateNode),er(t,ut()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(No)throw No=!1,t=Ku,Ku=null,t;return Do&1&&t.tag!==0&&Fi(),s=t.pendingLanes,s&1?t===Xu?Bs++:(Bs=0,Xu=t):Bs=0,Mn(),null}function Fi(){if(Sn!==null){var t=jp(Do),e=yr.transition,r=$e;try{if(yr.transition=null,$e=16>t?16:t,Sn===null)var n=!1;else{if(t=Sn,Sn=null,Do=0,Me&6)throw Error(ie(331));var i=Me;for(Me|=4,be=t.current;be!==null;){var s=be,a=s.child;if(be.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:As(8,d,s)}var h=d.child;if(h!==null)h.return=d,be=h;else for(;be!==null;){d=be;var v=d.sibling,b=d.return;if(Wm(d),d===c){be=null;break}if(v!==null){v.return=b,be=v;break}be=b}}}var N=s.alternate;if(N!==null){var k=N.child;if(k!==null){N.child=null;do{var y=k.sibling;k.sibling=null,k=y}while(k!==null)}}be=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,be=a;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:As(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,be=p;break e}be=s.return}}var m=t.current;for(be=m;be!==null;){a=be;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,be=g;else e:for(a=m;be!==null;){if(o=be,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Jo(9,o)}}catch(x){it(o,o.return,x)}if(o===a){be=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,be=w;break e}be=o.return}}if(Me=i,Mn(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(qo,t)}catch{}n=!0}return n}finally{$e=r,yr.transition=e}}return!1}function Vh(t,e,r){e=Zi(r,e),e=jm(t,e,1),t=Bn(t,e,1),e=Wt(),t!==null&&(la(t,1,e),er(t,e))}function it(t,e,r){if(t.tag===3)Vh(t,t,r);else for(;e!==null;){if(e.tag===3){Vh(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ln===null||!Ln.has(n))){t=Zi(r,t),t=Bm(e,t,1),e=Bn(e,t,1),t=Wt(),e!==null&&(la(e,1,t),er(e,t));break}}e=e.return}}function i2(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&r,Et===t&&(Tt&r)===r&&(yt===4||yt===3&&(Tt&130023424)===Tt&&500>ut()-rd?Zn(t,0):td|=r),er(t,e)}function Qm(t,e){e===0&&(t.mode&1?(e=_a,_a<<=1,!(_a&130023424)&&(_a=4194304)):e=1);var r=Wt();t=un(t,e),t!==null&&(la(t,e,r),er(t,r))}function s2(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Qm(t,r)}function a2(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ie(314))}n!==null&&n.delete(e),Qm(t,r)}var Jm;Jm=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Xt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Xt=!1,Gy(t,e,r);Xt=!!(t.flags&131072)}else Xt=!1,Je&&e.flags&1048576&&nm(e,xo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ka(t,e),t=e.pendingProps;var i=$i(e,Pt.current);Pi(e,r),i=Yc(null,e,n,t,i,r);var s=Kc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(n)?(s=!0,vo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$c(e),i.updater=Qo,e.stateNode=i,i._reactInternals=e,Ou(e,n,t,r),e=Wu(null,e,n,!0,s,r)):(e.tag=0,Je&&s&&Pc(e),Ut(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ka(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=l2(n),t=Tr(n,t),i){case 0:e=Uu(null,e,n,t,r);break e;case 1:e=zh(null,e,n,t,r);break e;case 11:e=Ih(null,e,n,t,r);break e;case 14:e=Rh(null,e,n,Tr(n.type,t),r);break e}throw Error(ie(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Tr(n,i),Uu(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Tr(n,i),zh(t,e,n,i,r);case 3:e:{if(zm(e),t===null)throw Error(ie(387));n=e.pendingProps,s=e.memoizedState,i=s.element,um(t,e),ko(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zi(Error(ie(423)),e),e=Ph(t,e,n,r,i);break e}else if(n!==i){i=Zi(Error(ie(424)),e),e=Ph(t,e,n,r,i);break e}else for(ir=jn(e.stateNode.containerInfo.firstChild),ar=e,Je=!0,Lr=null,r=om(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qi(),n===i){e=cn(t,e,r);break e}Ut(t,e,n,r)}e=e.child}return e;case 5:return cm(e),t===null&&zu(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,ju(n,i)?a=null:s!==null&&ju(n,s)&&(e.flags|=32),Rm(t,e),Ut(t,e,a,r),e.child;case 6:return t===null&&zu(e),null;case 13:return Pm(t,e,r);case 4:return qc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Vi(e,null,n,r):Ut(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Tr(n,i),Ih(t,e,n,i,r);case 7:return Ut(t,e,e.pendingProps,r),e.child;case 8:return Ut(t,e,e.pendingProps.children,r),e.child;case 12:return Ut(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ye(bo,n._currentValue),n._currentValue=a,s!==null)if(Fr(s.value,a)){if(s.children===i.children&&!Qt.current){e=cn(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=sn(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Pu(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ie(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Pu(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ut(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Pi(e,r),i=xr(i),n=n(i),e.flags|=1,Ut(t,e,n,r),e.child;case 14:return n=e.type,i=Tr(n,e.pendingProps),i=Tr(n.type,i),Rh(t,e,n,i,r);case 15:return Lm(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Tr(n,i),Ka(t,e),e.tag=1,Jt(n)?(t=!0,vo(e)):t=!1,Pi(e,r),Am(e,n,i),Ou(e,n,i,r),Wu(null,e,n,!0,t,r);case 19:return Fm(t,e,r);case 22:return Im(t,e,r)}throw Error(ie(156,e.tag))};function eg(t,e){return Np(t,e)}function o2(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(t,e,r,n){return new o2(t,e,r,n)}function ad(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l2(t){if(typeof t=="function")return ad(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sc)return 11;if(t===_c)return 14}return 2}function Rn(t,e){var r=t.alternate;return r===null?(r=gr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ja(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")ad(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case wi:return Yn(r.children,i,s,e);case Ec:a=8,i|=8;break;case uu:return t=gr(12,r,e,i|2),t.elementType=uu,t.lanes=s,t;case cu:return t=gr(13,r,e,i),t.elementType=cu,t.lanes=s,t;case du:return t=gr(19,r,e,i),t.elementType=du,t.lanes=s,t;case cp:return tl(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lp:a=10;break e;case up:a=9;break e;case Sc:a=11;break e;case _c:a=14;break e;case bn:a=16,n=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=gr(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Yn(t,e,r,n){return t=gr(7,t,n,e),t.lanes=r,t}function tl(t,e,r,n){return t=gr(22,t,n,e),t.elementType=cp,t.lanes=r,t.stateNode={isHidden:!1},t}function Vl(t,e,r){return t=gr(6,t,null,e),t.lanes=r,t}function Gl(t,e,r){return e=gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u2(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function od(t,e,r,n,i,s,a,o,l){return t=new u2(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(s),t}function c2(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function tg(t){if(!t)return Pn;t=t._reactInternals;e:{if(ai(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var r=t.type;if(Jt(r))return tm(t,r,e)}return e}function rg(t,e,r,n,i,s,a,o,l){return t=od(r,n,!0,t,i,s,a,o,l),t.context=tg(null),r=t.current,n=Wt(),i=In(r),s=sn(n,i),s.callback=e??null,Bn(r,s,i),t.current.lanes=i,la(t,i,n),er(t,n),t}function rl(t,e,r,n){var i=e.current,s=Wt(),a=In(i);return r=tg(r),e.context===null?e.context=r:e.pendingContext=r,e=sn(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bn(i,e,a),t!==null&&(Rr(t,i,a,s),Ga(t,i,a)),a}function Ao(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ld(t,e){Gh(t,e),(t=t.alternate)&&Gh(t,e)}function d2(){return null}var ng=typeof reportError=="function"?reportError:function(t){console.error(t)};function ud(t){this._internalRoot=t}nl.prototype.render=ud.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));rl(t,e,null,null)};nl.prototype.unmount=ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){rl(null,t,null,null)}),e[ln]=null}};function nl(t){this._internalRoot=t}nl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ip();t={blockedOn:null,target:t,priority:e};for(var r=0;r<kn.length&&e!==0&&e<kn[r].priority;r++);kn.splice(r,0,t),r===0&&zp(t)}};function cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zh(){}function h2(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Ao(a);s.call(c)}}var a=rg(e,n,t,0,null,!1,!1,"",Zh);return t._reactRootContainer=a,t[ln]=a.current,$s(t.nodeType===8?t.parentNode:t),ri(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=Ao(l);o.call(c)}}var l=od(t,0,!1,null,null,!1,!1,"",Zh);return t._reactRootContainer=l,t[ln]=l.current,$s(t.nodeType===8?t.parentNode:t),ri(function(){rl(e,l,r,n)}),l}function sl(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Ao(a);o.call(l)}}rl(e,a,t,i)}else a=h2(r,e,t,i,n);return Ao(a)}Bp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ks(e.pendingLanes);r!==0&&(Tc(e,r|1),er(e,ut()),!(Me&6)&&(Yi=ut()+500,Mn()))}break;case 13:ri(function(){var n=un(t,1);if(n!==null){var i=Wt();Rr(n,t,1,i)}}),ld(t,1)}};Ac=function(t){if(t.tag===13){var e=un(t,134217728);if(e!==null){var r=Wt();Rr(e,t,134217728,r)}ld(t,134217728)}};Lp=function(t){if(t.tag===13){var e=In(t),r=un(t,e);if(r!==null){var n=Wt();Rr(r,t,e,n)}ld(t,e)}};Ip=function(){return $e};Rp=function(t,e){var r=$e;try{return $e=t,e()}finally{$e=r}};wu=function(t,e,r){switch(e){case"input":if(pu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Yo(n);if(!i)throw Error(ie(90));hp(n),pu(n,i)}}}break;case"textarea":pp(t,r);break;case"select":e=r.value,e!=null&&Li(t,!!r.multiple,e,!1)}};wp=nd;kp=ri;var f2={usingClientEntryPoint:!1,Events:[ca,Si,Yo,xp,bp,nd]},ps={findFiberByHostInstance:qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p2={bundleType:ps.bundleType,version:ps.version,rendererPackageName:ps.rendererPackageName,rendererConfig:ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sp(t),t===null?null:t.stateNode},findFiberByHostInstance:ps.findFiberByHostInstance||d2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pa.isDisabled&&Pa.supportsFiber)try{qo=Pa.inject(p2),Hr=Pa}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f2;lr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cd(e))throw Error(ie(200));return c2(t,e,null,r)};lr.createRoot=function(t,e){if(!cd(t))throw Error(ie(299));var r=!1,n="",i=ng;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=od(t,1,!1,null,null,r,!1,n,i),t[ln]=e.current,$s(t.nodeType===8?t.parentNode:t),new ud(e)};lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=Sp(e),t=t===null?null:t.stateNode,t};lr.flushSync=function(t){return ri(t)};lr.hydrate=function(t,e,r){if(!il(e))throw Error(ie(200));return sl(null,t,e,!0,r)};lr.hydrateRoot=function(t,e,r){if(!cd(t))throw Error(ie(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=ng;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=rg(e,null,t,1,r??null,i,!1,s,a),t[ln]=e.current,$s(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new nl(e)};lr.render=function(t,e,r){if(!il(e))throw Error(ie(200));return sl(null,t,e,!1,r)};lr.unmountComponentAtNode=function(t){if(!il(t))throw Error(ie(40));return t._reactRootContainer?(ri(function(){sl(null,null,t,!1,function(){t._reactRootContainer=null,t[ln]=null})}),!0):!1};lr.unstable_batchedUpdates=nd;lr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!il(r))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return sl(t,e,r,!1,n)};lr.version="18.3.1-next-f1338f8080-20240426";function ig(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ig)}catch(t){console.error(t)}}ig(),ip.exports=lr;var m2=ip.exports,sg,Yh=m2;sg=Yh.createRoot,Yh.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_e=(t,e)=>{const r=$.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...c},d)=>$.createElement("svg",{ref:d,...g2,width:i,height:i,stroke:n,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${v2(t)}`,o].join(" "),...c},[...e.map(([h,v])=>$.createElement(h,v)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=_e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=_e("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=_e("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=_e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=_e("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=_e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=_e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=_e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=_e("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=_e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=_e("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=_e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=_e("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=_e("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=_e("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=_e("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=_e("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=_e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=_e("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=_e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=_e("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=_e("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=_e("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=_e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=_e("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=_e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=_e("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=_e("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),rc=(t,e)=>e.some(r=>t instanceof r);let rf,nf;function O2(){return rf||(rf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function M2(){return nf||(nf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nc=new WeakMap,Zl=new WeakMap,ll=new WeakMap;function U2(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(Xn(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return ll.set(e,t),e}function W2(t){if(nc.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});nc.set(t,e)}let ic={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return nc.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Xn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cg(t){ic=t(ic)}function H2(t){return M2().includes(t)?function(...e){return t.apply(sc(this),e),Xn(this.request)}:function(...e){return Xn(t.apply(sc(this),e))}}function $2(t){return typeof t=="function"?H2(t):(t instanceof IDBTransaction&&W2(t),rc(t,O2())?new Proxy(t,ic):t)}function Xn(t){if(t instanceof IDBRequest)return U2(t);if(Zl.has(t))return Zl.get(t);const e=$2(t);return e!==t&&(Zl.set(t,e),ll.set(e,t)),e}const sc=t=>ll.get(t);function q2(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Xn(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Xn(a.result),l.oldVersion,l.newVersion,Xn(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const V2=["get","getKey","getAll","getAllKeys","count"],G2=["put","add","delete","clear"],Yl=new Map;function sf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yl.get(e))return Yl.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=G2.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||V2.includes(r)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),i&&l.done]))[0]};return Yl.set(e,s),s}cg(t=>({...t,get:(e,r,n)=>sf(e,r)||t.get(e,r,n),has:(e,r)=>!!sf(e,r)||t.has(e,r)}));const Z2=["continue","continuePrimaryKey","advance"],af={},ac=new WeakMap,dg=new WeakMap,Y2={get(t,e){if(!Z2.includes(e))return t[e];let r=af[e];return r||(r=af[e]=function(...n){ac.set(this,dg.get(this)[e](...n))}),r}};async function*K2(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,Y2);for(dg.set(r,e),ll.set(r,sc(e));e;)yield r,e=await(ac.get(r)||e.continue()),ac.delete(r)}function of(t,e){return e===Symbol.asyncIterator&&rc(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&rc(t,[IDBIndex,IDBObjectStore])}cg(t=>({...t,get(e,r,n){return of(e,r)?K2:t.get(e,r,n)},has(e,r){return of(e,r)||t.has(e,r)}}));const Js=[{id:"light",name:"Light",description:"Clean and bright interface with excellent readability",isDefault:!0,colors:{headerBackground:"#ffffff",headerText:"#1f2937",headerBorder:"#e5e7eb",panelBackground:"#ffffff",panelText:"#1f2937",panelBorder:"#e5e7eb",panelSecondaryBackground:"#f9fafb",buttonPrimary:"#007BFF",buttonPrimaryText:"#ffffff",buttonSecondary:"#f3f4f6",buttonSecondaryText:"#374151",buttonHover:"#0056b3",inputBackground:"#ffffff",inputText:"#1f2937",inputBorder:"#d1d5db",inputFocus:"#007BFF",accent:"#007BFF",accentHover:"#0056b3",success:"#10b981",warning:"#f59e0b",error:"#ef4444",textPrimary:"#1f2937",textSecondary:"#6b7280",textMuted:"#9ca3af",linkColor:"#007BFF",linkHover:"#0056b3",divider:"#e5e7eb",shadow:"rgba(0, 0, 0, 0.1)",overlay:"rgba(0, 0, 0, 0.5)"}},{id:"dark",name:"Dark",description:"Modern dark theme perfect for low-light reading",colors:{headerBackground:"#1f2937",headerText:"#f9fafb",headerBorder:"#374151",panelBackground:"#1f2937",panelText:"#f9fafb",panelBorder:"#374151",panelSecondaryBackground:"#111827",buttonPrimary:"#3b82f6",buttonPrimaryText:"#ffffff",buttonSecondary:"#374151",buttonSecondaryText:"#d1d5db",buttonHover:"#2563eb",inputBackground:"#374151",inputText:"#f9fafb",inputBorder:"#4b5563",inputFocus:"#3b82f6",accent:"#3b82f6",accentHover:"#2563eb",success:"#10b981",warning:"#f59e0b",error:"#ef4444",textPrimary:"#f9fafb",textSecondary:"#d1d5db",textMuted:"#9ca3af",linkColor:"#60a5fa",linkHover:"#3b82f6",divider:"#374151",shadow:"rgba(0, 0, 0, 0.3)",overlay:"rgba(0, 0, 0, 0.7)"}},{id:"sepia",name:"Sepia",description:"Warm, paper-like interface that reduces eye strain",colors:{headerBackground:"#f7f3e9",headerText:"#5d4e37",headerBorder:"#e6d7c3",panelBackground:"#f7f3e9",panelText:"#5d4e37",panelBorder:"#e6d7c3",panelSecondaryBackground:"#f0e6d2",buttonPrimary:"#8b4513",buttonPrimaryText:"#f7f3e9",buttonSecondary:"#e6d7c3",buttonSecondaryText:"#5d4e37",buttonHover:"#a0522d",inputBackground:"#faf6ed",inputText:"#5d4e37",inputBorder:"#d4c4a8",inputFocus:"#8b4513",accent:"#8b4513",accentHover:"#a0522d",success:"#6b8e23",warning:"#daa520",error:"#cd5c5c",textPrimary:"#5d4e37",textSecondary:"#8b7355",textMuted:"#a0916d",linkColor:"#8b4513",linkHover:"#a0522d",divider:"#e6d7c3",shadow:"rgba(93, 78, 55, 0.15)",overlay:"rgba(93, 78, 55, 0.5)"}},{id:"highcontrast",name:"High Contrast",description:"Maximum contrast for enhanced accessibility",colors:{headerBackground:"#000000",headerText:"#ffffff",headerBorder:"#ffffff",panelBackground:"#000000",panelText:"#ffffff",panelBorder:"#ffffff",panelSecondaryBackground:"#1a1a1a",buttonPrimary:"#ffffff",buttonPrimaryText:"#000000",buttonSecondary:"#333333",buttonSecondaryText:"#ffffff",buttonHover:"#cccccc",inputBackground:"#000000",inputText:"#ffffff",inputBorder:"#ffffff",inputFocus:"#ffff00",accent:"#ffff00",accentHover:"#cccc00",success:"#00ff00",warning:"#ffff00",error:"#ff0000",textPrimary:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",linkColor:"#ffff00",linkHover:"#cccc00",divider:"#ffffff",shadow:"rgba(255, 255, 255, 0.3)",overlay:"rgba(0, 0, 0, 0.8)"}},{id:"ocean",name:"Ocean",description:"Cool blue tones inspired by deep ocean waters",colors:{headerBackground:"#0f172a",headerText:"#e2e8f0",headerBorder:"#1e293b",panelBackground:"#0f172a",panelText:"#e2e8f0",panelBorder:"#1e293b",panelSecondaryBackground:"#020617",buttonPrimary:"#0ea5e9",buttonPrimaryText:"#ffffff",buttonSecondary:"#1e293b",buttonSecondaryText:"#cbd5e1",buttonHover:"#0284c7",inputBackground:"#1e293b",inputText:"#e2e8f0",inputBorder:"#334155",inputFocus:"#0ea5e9",accent:"#0ea5e9",accentHover:"#0284c7",success:"#06b6d4",warning:"#f59e0b",error:"#ef4444",textPrimary:"#e2e8f0",textSecondary:"#cbd5e1",textMuted:"#94a3b8",linkColor:"#38bdf8",linkHover:"#0ea5e9",divider:"#1e293b",shadow:"rgba(15, 23, 42, 0.4)",overlay:"rgba(15, 23, 42, 0.7)"}},{id:"forest",name:"Forest",description:"Natural green theme inspired by forest environments",colors:{headerBackground:"#14532d",headerText:"#f0fdf4",headerBorder:"#166534",panelBackground:"#14532d",panelText:"#f0fdf4",panelBorder:"#166534",panelSecondaryBackground:"#052e16",buttonPrimary:"#22c55e",buttonPrimaryText:"#ffffff",buttonSecondary:"#166534",buttonSecondaryText:"#dcfce7",buttonHover:"#16a34a",inputBackground:"#166534",inputText:"#f0fdf4",inputBorder:"#15803d",inputFocus:"#22c55e",accent:"#22c55e",accentHover:"#16a34a",success:"#10b981",warning:"#f59e0b",error:"#ef4444",textPrimary:"#f0fdf4",textSecondary:"#dcfce7",textMuted:"#bbf7d0",linkColor:"#4ade80",linkHover:"#22c55e",divider:"#166534",shadow:"rgba(20, 83, 45, 0.4)",overlay:"rgba(20, 83, 45, 0.7)"}},{id:"sunset",name:"Sunset",description:"Warm orange and purple gradients like a beautiful sunset",colors:{headerBackground:"#451a03",headerText:"#fed7aa",headerBorder:"#9a3412",panelBackground:"#451a03",panelText:"#fed7aa",panelBorder:"#9a3412",panelSecondaryBackground:"#1c0701",buttonPrimary:"#ea580c",buttonPrimaryText:"#ffffff",buttonSecondary:"#9a3412",buttonSecondaryText:"#fed7aa",buttonHover:"#dc2626",inputBackground:"#9a3412",inputText:"#fed7aa",inputBorder:"#c2410c",inputFocus:"#ea580c",accent:"#ea580c",accentHover:"#dc2626",success:"#22c55e",warning:"#f59e0b",error:"#ef4444",textPrimary:"#fed7aa",textSecondary:"#fdba74",textMuted:"#fb923c",linkColor:"#fb923c",linkHover:"#ea580c",divider:"#9a3412",shadow:"rgba(69, 26, 3, 0.4)",overlay:"rgba(69, 26, 3, 0.7)"}},{id:"lavender",name:"Lavender",description:"Soft purple theme with calming lavender tones",colors:{headerBackground:"#581c87",headerText:"#f3e8ff",headerBorder:"#7c3aed",panelBackground:"#581c87",panelText:"#f3e8ff",panelBorder:"#7c3aed",panelSecondaryBackground:"#3b0764",buttonPrimary:"#8b5cf6",buttonPrimaryText:"#ffffff",buttonSecondary:"#7c3aed",buttonSecondaryText:"#e9d5ff",buttonHover:"#7c3aed",inputBackground:"#7c3aed",inputText:"#f3e8ff",inputBorder:"#8b5cf6",inputFocus:"#a855f7",accent:"#8b5cf6",accentHover:"#7c3aed",success:"#22c55e",warning:"#f59e0b",error:"#ef4444",textPrimary:"#f3e8ff",textSecondary:"#e9d5ff",textMuted:"#d8b4fe",linkColor:"#a855f7",linkHover:"#8b5cf6",divider:"#7c3aed",shadow:"rgba(88, 28, 135, 0.4)",overlay:"rgba(88, 28, 135, 0.7)"}}],Ls=[{id:"light",name:"Light",description:"Classic black text on white background",colors:{chapterTitleColor:"#1f2937",textColor:"#000000",backgroundColor:"#ffffff"}},{id:"dark",name:"Dark",description:"White text on dark background for low-light reading",colors:{chapterTitleColor:"#e5e7eb",textColor:"#f9fafb",backgroundColor:"#1f2937"}},{id:"sepia",name:"Sepia",description:"Warm, paper-like reading experience",colors:{chapterTitleColor:"#5d4e37",textColor:"#5d4e37",backgroundColor:"#f7f3e9"}},{id:"highcontrast",name:"High Contrast",description:"Maximum contrast for accessibility",colors:{chapterTitleColor:"#ffffff",textColor:"#ffffff",backgroundColor:"#000000"}},{id:"ocean",name:"Ocean",description:"Cool blue tones for reduced eye strain",colors:{chapterTitleColor:"#e2e8f0",textColor:"#cbd5e1",backgroundColor:"#0f172a"}},{id:"forest",name:"Forest",description:"Natural green theme for comfortable reading",colors:{chapterTitleColor:"#f0fdf4",textColor:"#dcfce7",backgroundColor:"#14532d"}},{id:"sunset",name:"Sunset",description:"Warm orange tones for evening reading",colors:{chapterTitleColor:"#fed7aa",textColor:"#fdba74",backgroundColor:"#451a03"}},{id:"lavender",name:"Lavender",description:"Soft purple theme for calming reading",colors:{chapterTitleColor:"#f3e8ff",textColor:"#e9d5ff",backgroundColor:"#581c87"}},{id:"custom",name:"Custom",description:"Create your own color combination",colors:{chapterTitleColor:"#1f2937",textColor:"#000000",backgroundColor:"#ffffff"}}],Ct=t=>Js.find(e=>e.id===t)||Js[0],vr=t=>{const e=document.documentElement;Object.entries(t.colors).forEach(([r,n])=>{e.style.setProperty(`--interface-${r}`,n)})},X2="EBookReaderDB",Q2=4;let Fa=null;const eo={fontSize:38,fontFamily:"Inter",lineHeight:1.6,marginSize:.5,theme:"light",maxWidth:"full",hideMenuWhileReading:!0,colors:{chapterTitleColor:"#1f2937",textColor:"#000000",backgroundColor:"#ffffff"},interfaceTheme:"light",interfaceColors:Js[0].colors,scrollButtons:{visible:!1,size:"medium",customSize:48},cornerNavigation:{visible:!1},selectedColorTheme:"light",selectedInterfaceTheme:"light",useThemeBasedColors:!0,syncInterfaceWithReading:!0,applyFontGlobally:!1,enablePageTurning:!1,enableReadingProgress:!0,enableNightMode:!1,enableFocusMode:!1,enableTextToSpeech:!1,enableFastFavorite:!1,fastFavoriteName:"Quick Bookmark"},ft=async()=>{if(Fa)return Fa;try{return Fa=await q2(X2,Q2,{upgrade(t,e){if(!t.objectStoreNames.contains("books")){const r=t.createObjectStore("books",{keyPath:"id"});r.createIndex("title","title"),r.createIndex("author","author"),r.createIndex("lastRead","lastRead")}if(t.objectStoreNames.contains("preferences")||t.createObjectStore("preferences",{keyPath:"id"}),!t.objectStoreNames.contains("bookmarks")){const r=t.createObjectStore("bookmarks",{keyPath:"id"});r.createIndex("bookId","bookId"),r.createIndex("createdAt","createdAt")}if(t.objectStoreNames.contains("stats")||t.createObjectStore("stats",{keyPath:"id"}),t.objectStoreNames.contains("chapters")||t.createObjectStore("chapters",{keyPath:"id"}).createIndex("bookId","bookId"),t.objectStoreNames.contains("covers")||t.createObjectStore("covers",{keyPath:"bookId"}).createIndex("createdAt","createdAt"),!t.objectStoreNames.contains("navigation")){const r=t.createObjectStore("navigation",{keyPath:"id"});r.createIndex("bookId","bookId"),r.createIndex("timestamp","timestamp")}if(!t.objectStoreNames.contains("readingSessions")){const r=t.createObjectStore("readingSessions",{keyPath:"id"});r.createIndex("bookId","bookId"),r.createIndex("startTime","startTime"),r.createIndex("chapterIndex","chapterIndex")}if(!t.objectStoreNames.contains("errorLogs")){const r=t.createObjectStore("errorLogs",{keyPath:"id",autoIncrement:!0});r.createIndex("type","type"),r.createIndex("timestamp","timestamp")}}}),console.log("Database initialized successfully"),Fa}catch(t){throw console.error("Database initialization failed:",t),Oe("DB_INIT_FAILED",t),t}},Oe=async(t,e,r)=>{const n={type:t,error:e.message||e,context:r,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};console.error("Error logged:",n);try{await(await ft()).put("errorLogs",n)}catch(i){console.error("Failed to log error to database:",i)}},to=async t=>{try{await(await ft()).put("books",t)}catch(e){throw Oe("SAVE_BOOK_FAILED",e,{bookId:t.id}),e}},hg=async()=>{try{return(await ft()).getAll("books")}catch(t){return Oe("GET_BOOKS_FAILED",t),[]}},J2=async t=>{try{return(await ft()).get("books",t)}catch(e){Oe("GET_BOOK_FAILED",e,{bookId:t});return}},ex=async t=>{try{const r=(await ft()).transaction(["books","bookmarks","chapters","covers","navigation","readingSessions"],"readwrite");await Promise.all([r.objectStore("books").delete(t),r.objectStore("bookmarks").index("bookId").getAllKeys(t).then(n=>Promise.all(n.map(i=>r.objectStore("bookmarks").delete(i)))),r.objectStore("chapters").index("bookId").getAllKeys(t).then(n=>Promise.all(n.map(i=>r.objectStore("chapters").delete(i)))),r.objectStore("covers").delete(t),r.objectStore("navigation").index("bookId").getAllKeys(t).then(n=>Promise.all(n.map(i=>r.objectStore("navigation").delete(i)))),r.objectStore("readingSessions").index("bookId").getAllKeys(t).then(n=>Promise.all(n.map(i=>r.objectStore("readingSessions").delete(i))))])}catch(e){throw Oe("DELETE_BOOK_FAILED",e,{bookId:t}),e}},lf=async(t,e)=>{try{await(await ft()).put("covers",{bookId:t,imageBlob:e,createdAt:new Date})}catch(r){throw Oe("SAVE_COVER_FAILED",r,{bookId:t}),r}},uf=async t=>{try{const r=await(await ft()).get("covers",t);return r!=null&&r.imageBlob?URL.createObjectURL(r.imageBlob):null}catch(e){return Oe("GET_COVER_FAILED",e,{bookId:t}),null}},fd=async t=>{try{const e=await ft(),r=Ct(t.selectedInterfaceTheme||"light"),n={...t,interfaceColors:r.colors,interfaceTheme:r.id};await e.put("preferences",{id:"default",...n})}catch(e){throw Oe("SAVE_PREFERENCES_FAILED",e),e}},ul=async()=>{try{const e=await(await ft()).get("preferences","default");if(!e)return eo;const r=Ct(e.selectedInterfaceTheme||"light");return{...eo,...e,interfaceColors:r.colors,interfaceTheme:r.id}}catch(t){return Oe("GET_PREFERENCES_FAILED",t),eo}},tx=async()=>{try{const e=(await ft()).transaction(["preferences"],"readwrite"),n=(await e.objectStore("preferences").getAll()).filter(i=>i.id.startsWith("bookmark-state-"));await e.objectStore("preferences").clear(),await Promise.all(n.map(i=>e.objectStore("preferences").put(i))),await e.objectStore("preferences").put({id:"default",...eo}),await e.done}catch(t){throw Oe("RESET_TO_DEFAULTS_FAILED",t),t}},rx=async(t,e,r=0)=>{try{await(await ft()).put("navigation",{id:`${t}-${e}`,bookId:t,chapterIndex:e,scrollPosition:r,timestamp:new Date})}catch(n){Oe("SAVE_NAVIGATION_FAILED",n,{bookId:t,chapterIndex:e})}},oc=async t=>{try{await(await ft()).put("bookmarks",t)}catch(e){throw Oe("SAVE_BOOKMARK_FAILED",e,{bookmarkId:t.id}),e}},fg=async t=>{try{const e=await ft();return t?e.getAllFromIndex("bookmarks","bookId",t):e.getAll("bookmarks")}catch(e){return Oe("GET_BOOKMARKS_FAILED",e,{bookId:t}),[]}},nx=async t=>{try{await(await ft()).delete("bookmarks",t)}catch(e){throw Oe("DELETE_BOOKMARK_FAILED",e,{bookmarkId:t}),e}},cf=async(t,e)=>{try{await(await ft()).put("preferences",{id:`bookmark-state-${t}`,isOpen:e,lastUpdated:new Date})}catch(r){Oe("SAVE_BOOKMARK_STATE_FAILED",r,{bookId:t})}},ix=async()=>{try{return await(await ft()).get("stats","default")||{totalTimeRead:0,booksCompleted:0,pagesRead:0,averageReadingSpeed:0,streakDays:0,lastReadDate:new Date}}catch(t){return Oe("GET_STATS_FAILED",t),{totalTimeRead:0,booksCompleted:0,pagesRead:0,averageReadingSpeed:0,streakDays:0,lastReadDate:new Date}}},sx=async()=>{try{const[t,e,r,n]=await Promise.all([hg(),ul(),fg(),ix()]);return{books:t.map(i=>({...i,file:null})),preferences:e,bookmarks:r,stats:n,exportedAt:new Date().toISOString()}}catch(t){throw Oe("EXPORT_DATA_FAILED",t),t}},ax=async t=>{try{const r=(await ft()).transaction(["preferences","bookmarks","stats"],"readwrite");await Promise.all([r.objectStore("preferences").put({id:"default",...t.preferences}),...t.bookmarks.map(n=>r.objectStore("bookmarks").put(n)),r.objectStore("stats").put({id:"default",...t.stats})])}catch(e){throw Oe("IMPORT_DATA_FAILED",e),e}};var lc={exports:{}},pg={exports:{}},ox=void 0,mg=function(t){return t!==ox&&t!==null},lx=mg,ux={object:!0,function:!0,undefined:!0},cx=function(t){return lx(t)?hasOwnProperty.call(ux,typeof t):!1},dx=cx,hx=function(t){if(!dx(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},fx=hx,px=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!fx(t)},mx=px,gx=/^\s*class[\s{/}]/,vx=Function.prototype.toString,yx=function(t){return!(!mx(t)||gx.test(vx.call(t)))},xx=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},Kl,df;function bx(){return df||(df=1,Kl=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Kl}var wx=function(){},kx=wx(),pd=function(t){return t!==kx&&t!==null},Xl,hf;function Cx(){if(hf)return Xl;hf=1;var t=pd,e=Object.keys;return Xl=function(r){return e(t(r)?Object(r):r)},Xl}var Ql,ff;function Ex(){return ff||(ff=1,Ql=bx()()?Object.keys:Cx()),Ql}var Jl,pf;function Sx(){if(pf)return Jl;pf=1;var t=pd;return Jl=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},Jl}var eu,mf;function _x(){if(mf)return eu;mf=1;var t=Ex(),e=Sx(),r=Math.max;return eu=function(n,i){var s,a,o=r(arguments.length,2),l;for(n=Object(e(n)),l=function(c){try{n[c]=i[c]}catch(d){s||(s=d)}},a=1;a<o;++a)i=arguments[a],t(i).forEach(l);if(s!==void 0)throw s;return n},eu}var Nx=xx()?Object.assign:_x(),Dx=pd,Tx=Array.prototype.forEach,Ax=Object.create,jx=function(t,e){var r;for(r in t)e[r]=t[r]},Bx=function(t){var e=Ax(null);return Tx.call(arguments,function(r){Dx(r)&&jx(Object(r),e)}),e},tu="razdwatrzy",Lx=function(){return typeof tu.contains!="function"?!1:tu.contains("dwa")===!0&&tu.contains("foo")===!1},ru,gf;function Ix(){if(gf)return ru;gf=1;var t=String.prototype.indexOf;return ru=function(e){return t.call(this,e,arguments[1])>-1},ru}var Rx=Lx()?String.prototype.contains:Ix(),ro=mg,vf=yx,gg=Nx,vg=Bx,Is=Rx,zx=pg.exports=function(t,e){var r,n,i,s,a;return arguments.length<2||typeof t!="string"?(s=e,e=t,t=null):s=arguments[2],ro(t)?(r=Is.call(t,"c"),n=Is.call(t,"e"),i=Is.call(t,"w")):(r=i=!0,n=!1),a={value:e,configurable:r,enumerable:n,writable:i},s?gg(vg(s),a):a};zx.gs=function(t,e,r){var n,i,s,a;return typeof t!="string"?(s=r,r=e,e=t,t=null):s=arguments[3],ro(e)?vf(e)?ro(r)?vf(r)||(s=r,r=void 0):r=void 0:(s=e,e=r=void 0):e=void 0,ro(t)?(n=Is.call(t,"c"),i=Is.call(t,"e")):(n=!0,i=!1),a={get:e,set:r,configurable:n,enumerable:i},s?gg(vg(s),a):a};var Px=pg.exports,Fx=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var r=Px,n=Fx,i=Function.prototype.apply,s=Function.prototype.call,a=Object.create,o=Object.defineProperty,l=Object.defineProperties,c=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0},h,v,b,N,k,y,p;h=function(m,g){var w;return n(g),c.call(this,"__ee__")?w=this.__ee__:(w=d.value=a(null),o(this,"__ee__",d),d.value=null),w[m]?typeof w[m]=="object"?w[m].push(g):w[m]=[w[m],g]:w[m]=g,this},v=function(m,g){var w,x;return n(g),x=this,h.call(this,m,w=function(){b.call(x,m,w),i.call(g,this,arguments)}),w.__eeOnceListener__=g,this},b=function(m,g){var w,x,C,E;if(n(g),!c.call(this,"__ee__"))return this;if(w=this.__ee__,!w[m])return this;if(x=w[m],typeof x=="object")for(E=0;C=x[E];++E)(C===g||C.__eeOnceListener__===g)&&(x.length===2?w[m]=x[E?0:1]:x.splice(E,1));else(x===g||x.__eeOnceListener__===g)&&delete w[m];return this},N=function(m){var g,w,x,C,E;if(c.call(this,"__ee__")&&(C=this.__ee__[m],!!C))if(typeof C=="object"){for(w=arguments.length,E=new Array(w-1),g=1;g<w;++g)E[g-1]=arguments[g];for(C=C.slice(),g=0;x=C[g];++g)i.call(x,this,E)}else switch(arguments.length){case 1:s.call(C,this);break;case 2:s.call(C,this,arguments[1]);break;case 3:s.call(C,this,arguments[1],arguments[2]);break;default:for(w=arguments.length,E=new Array(w-1),g=1;g<w;++g)E[g-1]=arguments[g];i.call(C,this,E)}},k={on:h,once:v,off:b,emit:N},y={on:r(h),once:r(v),off:r(b),emit:r(N)},p=l({},y),t.exports=e=function(m){return m==null?a(p):l(Object(m),y)},e.methods=k})(lc,lc.exports);var Ox=lc.exports;const Yr=ii(Ox);var Un={},Wn={};function Mx(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(e.call(void 0,i,n,t))return i}}function md(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var yg=md({HTML:"text/html",isHTML:function(t){return t===yg.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),xg=md({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===xg.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Wn.find=Mx;Wn.freeze=md;Wn.MIME_TYPE=yg;Wn.NAMESPACE=xg;var bg=Wn,qr=bg.find,ea=bg.NAMESPACE;function Ux(t){return t!==""}function Wx(t){return t?t.split(/[\t\n\f\r ]+/).filter(Ux):[]}function Hx(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function yf(t){if(!t)return[];var e=Wx(t);return Object.keys(e.reduce(Hx,{}))}function $x(t){return function(e){return t&&t.indexOf(e)!==-1}}function ha(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function tr(t,e){var r=t.prototype;if(!(r instanceof e)){let i=function(){};var n=i;i.prototype=e.prototype,i=new i,ha(r,i),t.prototype=r=i}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var rr={},Pr=rr.ELEMENT_NODE=1,Xi=rr.ATTRIBUTE_NODE=2,jo=rr.TEXT_NODE=3,wg=rr.CDATA_SECTION_NODE=4,kg=rr.ENTITY_REFERENCE_NODE=5,qx=rr.ENTITY_NODE=6,Cg=rr.PROCESSING_INSTRUCTION_NODE=7,Eg=rr.COMMENT_NODE=8,Sg=rr.DOCUMENT_NODE=9,_g=rr.DOCUMENT_TYPE_NODE=10,hn=rr.DOCUMENT_FRAGMENT_NODE=11,Vx=rr.NOTATION_NODE=12,Ft={},St={};Ft.INDEX_SIZE_ERR=(St[1]="Index size error",1);Ft.DOMSTRING_SIZE_ERR=(St[2]="DOMString size error",2);var Kt=Ft.HIERARCHY_REQUEST_ERR=(St[3]="Hierarchy request error",3);Ft.WRONG_DOCUMENT_ERR=(St[4]="Wrong document",4);Ft.INVALID_CHARACTER_ERR=(St[5]="Invalid character",5);Ft.NO_DATA_ALLOWED_ERR=(St[6]="No data allowed",6);Ft.NO_MODIFICATION_ALLOWED_ERR=(St[7]="No modification allowed",7);var Ng=Ft.NOT_FOUND_ERR=(St[8]="Not found",8);Ft.NOT_SUPPORTED_ERR=(St[9]="Not supported",9);var xf=Ft.INUSE_ATTRIBUTE_ERR=(St[10]="Attribute in use",10);Ft.INVALID_STATE_ERR=(St[11]="Invalid state",11);Ft.SYNTAX_ERR=(St[12]="Syntax error",12);Ft.INVALID_MODIFICATION_ERR=(St[13]="Invalid modification",13);Ft.NAMESPACE_ERR=(St[14]="Invalid namespace",14);Ft.INVALID_ACCESS_ERR=(St[15]="Invalid access",15);function ct(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,St[t]),this.message=St[t],Error.captureStackTrace&&Error.captureStackTrace(this,ct);return r.code=t,e&&(this.message=this.message+": "+e),r}ct.prototype=Error.prototype;ha(Ft,ct);function an(){}an.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)Bi(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Qi(t,e){this._node=t,this._refresh=e,gd(this)}function gd(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var r=t._refresh(t._node);if(Og(t,"length",r.length),!t.$$length||r.length<t.$$length)for(var n=r.length;n in t;n++)Object.prototype.hasOwnProperty.call(t,n)&&delete t[n];ha(r,t),t._inc=e}}Qi.prototype.item=function(t){return gd(this),this[t]||null};tr(Qi,an);function Bo(){}function Dg(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function bf(t,e,r,n){if(n?e[Dg(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var i=t.ownerDocument;i&&(n&&jg(i,t,n),Gx(i,t,r))}}function wf(t,e,r){var n=Dg(e,r);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,t){var s=t.ownerDocument;s&&(jg(s,t,r),r.ownerElement=null)}}else throw new ct(Ng,new Error(t.tagName+"@"+r))}Bo.prototype={length:0,item:an.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new ct(xf);var r=this.getNamedItem(t.nodeName);return bf(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new ct(xf);return r=this.getNamedItemNS(t.namespaceURI,t.localName),bf(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return wf(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return wf(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function Tg(){}Tg.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new fa;if(n.implementation=this,n.childNodes=new an,n.doctype=r||null,r&&n.appendChild(r),e){var i=n.createElementNS(t,e);n.appendChild(i)}return n},createDocumentType:function(t,e,r){var n=new cl;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}};function qe(){}qe.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Lo(this,t,e)},replaceChild:function(t,e){Lo(this,t,e,Lg),e&&this.removeChild(e)},removeChild:function(t){return Bg(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return uc(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==jo&&t.nodeType==jo?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n}e=e.nodeType==Xi?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&t in r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==Xi?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function Ag(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}ha(rr,qe);ha(rr,qe.prototype);function ta(t,e){if(e(t))return!0;if(t=t.firstChild)do if(ta(t,e))return!0;while(t=t.nextSibling)}function fa(){this.ownerDocument=this}function Gx(t,e,r){t&&t._inc++;var n=r.namespaceURI;n===ea.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function jg(t,e,r,n){t&&t._inc++;var i=r.namespaceURI;i===ea.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function vd(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var i=e.firstChild,s=0;i;)n[s++]=i,i=i.nextSibling;n.length=s,delete n[n.length]}}}function Bg(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,vd(t.ownerDocument,t),e}function Zx(t){return t&&(t.nodeType===qe.DOCUMENT_NODE||t.nodeType===qe.DOCUMENT_FRAGMENT_NODE||t.nodeType===qe.ELEMENT_NODE)}function Yx(t){return t&&(Vr(t)||yd(t)||fn(t)||t.nodeType===qe.DOCUMENT_FRAGMENT_NODE||t.nodeType===qe.COMMENT_NODE||t.nodeType===qe.PROCESSING_INSTRUCTION_NODE)}function fn(t){return t&&t.nodeType===qe.DOCUMENT_TYPE_NODE}function Vr(t){return t&&t.nodeType===qe.ELEMENT_NODE}function yd(t){return t&&t.nodeType===qe.TEXT_NODE}function kf(t,e){var r=t.childNodes||[];if(qr(r,Vr)||fn(e))return!1;var n=qr(r,fn);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function Cf(t,e){var r=t.childNodes||[];function n(s){return Vr(s)&&s!==e}if(qr(r,n))return!1;var i=qr(r,fn);return!(e&&i&&r.indexOf(i)>r.indexOf(e))}function Kx(t,e,r){if(!Zx(t))throw new ct(Kt,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new ct(Ng,"child not in parent");if(!Yx(e)||fn(e)&&t.nodeType!==qe.DOCUMENT_NODE)throw new ct(Kt,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Xx(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===qe.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Vr);if(s.length>1||qr(i,yd))throw new ct(Kt,"More than one element or text in fragment");if(s.length===1&&!kf(t,r))throw new ct(Kt,"Element in fragment can not be inserted before doctype")}if(Vr(e)&&!kf(t,r))throw new ct(Kt,"Only one element can be added and only after doctype");if(fn(e)){if(qr(n,fn))throw new ct(Kt,"Only one doctype is allowed");var a=qr(n,Vr);if(r&&n.indexOf(a)<n.indexOf(r))throw new ct(Kt,"Doctype can only be inserted before an element");if(!r&&a)throw new ct(Kt,"Doctype can not be appended since element is present")}}function Lg(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===qe.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Vr);if(s.length>1||qr(i,yd))throw new ct(Kt,"More than one element or text in fragment");if(s.length===1&&!Cf(t,r))throw new ct(Kt,"Element in fragment can not be inserted before doctype")}if(Vr(e)&&!Cf(t,r))throw new ct(Kt,"Only one element can be added and only after doctype");if(fn(e)){let l=function(c){return fn(c)&&c!==r};var o=l;if(qr(n,l))throw new ct(Kt,"Only one doctype is allowed");var a=qr(n,Vr);if(r&&n.indexOf(a)<n.indexOf(r))throw new ct(Kt,"Doctype can only be inserted before an element")}}function Lo(t,e,r,n){Kx(t,e,r),t.nodeType===qe.DOCUMENT_NODE&&(n||Xx)(t,e,r);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===hn){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=r?r.previousSibling:t.lastChild;s.previousSibling=o,a.nextSibling=r,o?o.nextSibling=s:t.firstChild=s,r==null?t.lastChild=a:r.previousSibling=a;do s.parentNode=t;while(s!==a&&(s=s.nextSibling));return vd(t.ownerDocument||t,t),e.nodeType==hn&&(e.firstChild=e.lastChild=null),e}function Qx(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,vd(t.ownerDocument,t,e),e}fa.prototype={nodeName:"#document",nodeType:Sg,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==hn){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return Lo(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Pr&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Bg(this,t)},replaceChild:function(t,e){Lo(this,t,e,Lg),t.ownerDocument=this,e&&this.removeChild(e),Vr(t)&&(this.documentElement=t)},importNode:function(t,e){return Fg(this,t,e)},getElementById:function(t){var e=null;return ta(this.documentElement,function(r){if(r.nodeType==Pr&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=yf(t);return new Qi(this,function(r){var n=[];return e.length>0&&ta(r.documentElement,function(i){if(i!==r&&i.nodeType===Pr){var s=i.getAttribute("class");if(s){var a=t===s;if(!a){var o=yf(s);a=e.every($x(o))}a&&n.push(i)}}}),n})},createElement:function(t){var e=new ni;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new an;var r=e.attributes=new Bo;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new dl;return t.ownerDocument=this,t.childNodes=new an,t},createTextNode:function(t){var e=new xd;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new bd;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new wd;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new Cd;return r.ownerDocument=this,r.tagName=r.nodeName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new Io;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new kd;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new ni,n=e.split(":"),i=r.attributes=new Bo;return r.childNodes=new an,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,i._ownerElement=r,r},createAttributeNS:function(t,e){var r=new Io,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}};tr(fa,qe);function ni(){this._nsMap={}}ni.prototype={nodeType:Pr,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===hn?this.insertBefore(t,null):Qx(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Qi(this,function(e){var r=[];return ta(e,function(n){n!==e&&n.nodeType==Pr&&(t==="*"||n.tagName==t)&&r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new Qi(this,function(r){var n=[];return ta(r,function(i){i!==r&&i.nodeType===Pr&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};fa.prototype.getElementsByTagName=ni.prototype.getElementsByTagName;fa.prototype.getElementsByTagNameNS=ni.prototype.getElementsByTagNameNS;tr(ni,qe);function Io(){}Io.prototype.nodeType=Xi;tr(Io,qe);function pa(){}pa.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(St[Kt])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var n=this.data.substring(0,t),i=this.data.substring(t+e);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};tr(pa,qe);function xd(){}xd.prototype={nodeName:"#text",nodeType:jo,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};tr(xd,pa);function bd(){}bd.prototype={nodeName:"#comment",nodeType:Eg};tr(bd,pa);function wd(){}wd.prototype={nodeName:"#cdata-section",nodeType:wg};tr(wd,pa);function cl(){}cl.prototype.nodeType=_g;tr(cl,qe);function Ig(){}Ig.prototype.nodeType=Vx;tr(Ig,qe);function Rg(){}Rg.prototype.nodeType=qx;tr(Rg,qe);function kd(){}kd.prototype.nodeType=kg;tr(kd,qe);function dl(){}dl.prototype.nodeName="#document-fragment";dl.prototype.nodeType=hn;tr(dl,qe);function Cd(){}Cd.prototype.nodeType=Cg;tr(Cd,qe);function zg(){}zg.prototype.serializeToString=function(t,e,r){return Pg.call(t,e,r)};qe.prototype.toString=Pg;function Pg(t,e){var r=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,s=n.namespaceURI;if(s&&i==null){var i=n.lookupPrefix(s);if(i==null)var a=[{namespace:s,prefix:null}]}return Bi(this,r,t,e,a),r.join("")}function Ef(t,e,r){var n=t.prefix||"",i=t.namespaceURI;if(!i||n==="xml"&&i===ea.XML||i===ea.XMLNS)return!1;for(var s=r.length;s--;){var a=r[s];if(a.prefix===n)return a.namespace!==i}return!0}function nu(t,e,r){t.push(" ",e,'="',r.replace(/[<&"]/g,Ag),'"')}function Bi(t,e,r,n,i){if(i||(i=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Pr:var s=t.attributes,a=s.length,p=t.firstChild,o=t.tagName;r=ea.isHTML(t.namespaceURI)||r;var l=o;if(!r&&!t.prefix&&t.namespaceURI){for(var c,d=0;d<s.length;d++)if(s.item(d).name==="xmlns"){c=s.item(d).value;break}if(!c)for(var h=i.length-1;h>=0;h--){var v=i[h];if(v.prefix===""&&v.namespace===t.namespaceURI){c=v.namespace;break}}if(c!==t.namespaceURI)for(var h=i.length-1;h>=0;h--){var v=i[h];if(v.namespace===t.namespaceURI){v.prefix&&(l=v.prefix+":"+o);break}}}e.push("<",l);for(var b=0;b<a;b++){var N=s.item(b);N.prefix=="xmlns"?i.push({prefix:N.localName,namespace:N.value}):N.nodeName=="xmlns"&&i.push({prefix:"",namespace:N.value})}for(var b=0;b<a;b++){var N=s.item(b);if(Ef(N,r,i)){var k=N.prefix||"",y=N.namespaceURI;nu(e,k?"xmlns:"+k:"xmlns",y),i.push({prefix:k,namespace:y})}Bi(N,e,r,n,i)}if(o===l&&Ef(t,r,i)){var k=t.prefix||"",y=t.namespaceURI;nu(e,k?"xmlns:"+k:"xmlns",y),i.push({prefix:k,namespace:y})}if(p||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),r&&/^script$/i.test(o))for(;p;)p.data?e.push(p.data):Bi(p,e,r,n,i.slice()),p=p.nextSibling;else for(;p;)Bi(p,e,r,n,i.slice()),p=p.nextSibling;e.push("</",l,">")}else e.push("/>");return;case Sg:case hn:for(var p=t.firstChild;p;)Bi(p,e,r,n,i.slice()),p=p.nextSibling;return;case Xi:return nu(e,t.name,t.value);case jo:return e.push(t.data.replace(/[<&]/g,Ag).replace(/]]>/g,"]]&gt;"));case wg:return e.push("<![CDATA[",t.data,"]]>");case Eg:return e.push("<!--",t.data,"-->");case _g:var m=t.publicId,g=t.systemId;if(e.push("<!DOCTYPE ",t.name),m)e.push(" PUBLIC ",m),g&&g!="."&&e.push(" ",g),e.push(">");else if(g&&g!=".")e.push(" SYSTEM ",g,">");else{var w=t.internalSubset;w&&e.push(" [",w,"]"),e.push(">")}return;case Cg:return e.push("<?",t.target," ",t.data,"?>");case kg:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function Fg(t,e,r){var n;switch(e.nodeType){case Pr:n=e.cloneNode(!1),n.ownerDocument=t;case hn:break;case Xi:r=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var i=e.firstChild;i;)n.appendChild(Fg(t,i,r)),i=i.nextSibling;return n}function uc(t,e,r){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s!="object"&&s!=n[i]&&(n[i]=s)}switch(e.childNodes&&(n.childNodes=new an),n.ownerDocument=t,n.nodeType){case Pr:var a=e.attributes,o=n.attributes=new Bo,l=a.length;o._ownerElement=n;for(var c=0;c<l;c++)n.setAttributeNode(uc(t,a.item(c),!0));break;case Xi:r=!0}if(r)for(var d=e.firstChild;d;)n.appendChild(uc(t,d,r)),d=d.nextSibling;return n}function Og(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Pr:case hn:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};var Hw=t;Object.defineProperty(Qi.prototype,"length",{get:function(){return gd(this),this.$$length}}),Object.defineProperty(qe.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Pr:case hn:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Og=function(e,r,n){e["$$"+r]=n}}}catch{}Un.DocumentType=cl;Un.DOMException=ct;Un.DOMImplementation=Tg;Un.Element=ni;Un.Node=qe;Un.NodeList=an;Un.XMLSerializer=zg;var ma={},Mg={};(function(t){var e=Wn.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(Mg);var Ed={},ra=Wn.NAMESPACE,cc=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Sf=new RegExp("[\\-\\.0-9"+cc.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),_f=new RegExp("^"+cc.source+Sf.source+"*(?::"+cc.source+Sf.source+"*)?$"),ms=0,xn=1,hi=2,gs=3,fi=4,pi=5,vs=6,Oa=7;function Ji(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ji)}Ji.prototype=new Error;Ji.prototype.name=Ji.name;function Ug(){}Ug.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),Wg(e,e={}),Jx(t,e,r,n,this.errorHandler),n.endDocument()}};function Jx(t,e,r,n,i){function s(ue){if(ue>65535){ue-=65536;var le=55296+(ue>>10),V=56320+(ue&1023);return String.fromCharCode(le,V)}else return String.fromCharCode(ue)}function a(ue){var le=ue.slice(1,-1);return le in r?r[le]:le.charAt(0)==="#"?s(parseInt(le.substr(1).replace("x","0x"))):(i.error("entity not found:"+ue),ue)}function o(ue){if(ue>k){var le=t.substring(k,ue).replace(/&#?\w+;/g,a);v&&l(k),n.characters(le,0,ue-k),k=ue}}function l(ue,le){for(;ue>=d&&(le=h.exec(t));)c=le.index,d=c+le[0].length,v.lineNumber++;v.columnNumber=ue-c+1}for(var c=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,v=n.locator,b=[{currentNSMap:e}],N={},k=0;;){try{var y=t.indexOf("<",k);if(y<0){if(!t.substr(k).match(/^\s*$/)){var p=n.doc,m=p.createTextNode(t.substr(k));p.appendChild(m),n.currentElement=m}return}switch(y>k&&o(y),t.charAt(y+1)){case"/":var B=t.indexOf(">",y+3),g=t.substring(y+2,B).replace(/[ \t\n\r]+$/g,""),w=b.pop();B<0?(g=t.substring(y+2).replace(/[\s<].*/,""),i.error("end tag name: "+g+" is not complete:"+w.tagName),B=y+1+g.length):g.match(/\s</)&&(g=g.replace(/[\s<].*/,""),i.error("end tag name: "+g+" maybe not complete"),B=y+1+g.length);var x=w.localNSMap,C=w.tagName==g,E=C||w.tagName&&w.tagName.toLowerCase()==g.toLowerCase();if(E){if(n.endElement(w.uri,w.localName,g),x)for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&n.endPrefixMapping(S);C||i.fatalError("end tag name: "+g+" is not match the current start tagName:"+w.tagName)}else b.push(w);B++;break;case"?":v&&l(y),B=i1(t,y,n);break;case"!":v&&l(y),B=n1(t,y,n,i);break;default:v&&l(y);var I=new Hg,R=b[b.length-1].currentNSMap,B=e1(t,y,I,R,a,i),U=I.length;if(!I.closed&&r1(t,B,I.tagName,N)&&(I.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),v&&U){for(var Q=Nf(v,{}),fe=0;fe<U;fe++){var oe=I[fe];l(oe.offset),oe.locator=Nf(v,{})}n.locator=Q,Df(I,n,R)&&b.push(I),n.locator=v}else Df(I,n,R)&&b.push(I);ra.isHTML(I.uri)&&!I.closed?B=t1(t,B,I.tagName,a,n):B++}}catch(ue){if(ue instanceof Ji)throw ue;i.error("element parse error: "+ue),B=-1}B>k?k=B:o(Math.max(y,k)+1)}}function Nf(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function e1(t,e,r,n,i,s){function a(v,b,N){r.attributeNames.hasOwnProperty(v)&&s.fatalError("Attribute "+v+" redefined"),r.addValue(v,b,N)}for(var o,l,c=++e,d=ms;;){var h=t.charAt(c);switch(h){case"=":if(d===xn)o=t.slice(e,c),d=gs;else if(d===hi)d=gs;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===gs||d===xn)if(d===xn&&(s.warning('attribute value must after "="'),o=t.slice(e,c)),e=c+1,c=t.indexOf(h,e),c>0)l=t.slice(e,c).replace(/&#?\w+;/g,i),a(o,l,e-1),d=pi;else throw new Error("attribute value no end '"+h+"' match");else if(d==fi)l=t.slice(e,c).replace(/&#?\w+;/g,i),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=c+1,d=pi;else throw new Error('attribute value must after "="');break;case"/":switch(d){case ms:r.setTagName(t.slice(e,c));case pi:case vs:case Oa:d=Oa,r.closed=!0;case fi:case xn:break;case hi:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),d==ms&&r.setTagName(t.slice(e,c)),c;case">":switch(d){case ms:r.setTagName(t.slice(e,c));case pi:case vs:case Oa:break;case fi:case xn:l=t.slice(e,c),l.slice(-1)==="/"&&(r.closed=!0,l=l.slice(0,-1));case hi:d===hi&&(l=o),d==fi?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l.replace(/&#?\w+;/g,i),e)):((!ra.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case gs:throw new Error("attribute value missed!!")}return c;case"":h=" ";default:if(h<=" ")switch(d){case ms:r.setTagName(t.slice(e,c)),d=vs;break;case xn:o=t.slice(e,c),d=hi;break;case fi:var l=t.slice(e,c).replace(/&#?\w+;/g,i);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case pi:d=vs;break}else switch(d){case hi:r.tagName,(!ra.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=c,d=xn;break;case pi:s.warning('attribute space is required"'+o+'"!!');case vs:d=xn,e=c;break;case gs:d=fi,e=c;break;case Oa:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function Df(t,e,r){for(var n=t.tagName,i=null,h=t.length;h--;){var s=t[h],a=s.qName,o=s.value,v=a.indexOf(":");if(v>0)var l=s.prefix=a.slice(0,v),c=a.slice(v+1),d=l==="xmlns"&&c;else c=a,l=null,d=a==="xmlns"&&"";s.localName=c,d!==!1&&(i==null&&(i={},Wg(r,r={})),r[d]=i[d]=o,s.uri=ra.XMLNS,e.startPrefixMapping(d,o))}for(var h=t.length;h--;){s=t[h];var l=s.prefix;l&&(l==="xml"&&(s.uri=ra.XML),l!=="xmlns"&&(s.uri=r[l||""]))}var v=n.indexOf(":");v>0?(l=t.prefix=n.slice(0,v),c=t.localName=n.slice(v+1)):(l=null,c=t.localName=n);var b=t.uri=r[l||""];if(e.startElement(b,c,n,t),t.closed){if(e.endElement(b,c,n),i)for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=r,t.localNSMap=i,!0}function t1(t,e,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var s=t.indexOf("</"+r+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(r)?(i.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,n),i.characters(a,0,a.length),s)}return e+1}function r1(t,e,r,n){var i=n[r];return i==null&&(i=t.lastIndexOf("</"+r+">"),i<e&&(i=t.lastIndexOf("</"+r)),n[r]=i),i<e}function Wg(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function n1(t,e,r,n){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(r.comment(t,e+4,s-e-4),s+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,s-e-9),r.endCDATA(),s+3}var a=s1(t,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],c=!1,d=!1;o>3&&(/^public$/i.test(a[2][0])?(c=a[3][0],d=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(d=a[3][0]));var h=a[o-1];return r.startDTD(l,c,d),r.endDTD(),h.index+h[0].length}}return-1}function i1(t,e,r){var n=t.indexOf("?>",e);if(n){var i=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function Hg(){this.attributeNames={}}Hg.prototype={setTagName:function(t){if(!_f.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!_f.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function s1(t,e){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);r=i.exec(t);)if(n.push(r),r[1])return n}Ed.XMLReader=Ug;Ed.ParseError=Ji;var a1=Wn,Sd=Un,Tf=Mg,$g=Ed,o1=Sd.DOMImplementation,Af=a1.NAMESPACE,l1=$g.ParseError,u1=$g.XMLReader;function qg(t){this.options=t||{locator:{}}}qg.prototype.parseFromString=function(t,e){var r=this.options,n=new u1,i=r.domBuilder||new ga,s=r.errorHandler,a=r.locator,o=r.xmlns||{},l=/\/x?html?$/.test(e),c=l?Tf.HTML_ENTITIES:Tf.XML_ENTITIES;return a&&i.setDocumentLocator(a),n.errorHandler=c1(s,i,a),n.domBuilder=r.domBuilder||i,l&&(o[""]=Af.HTML),o.xml=o.xml||Af.XML,t&&typeof t=="string"?n.parse(t,o,c):n.errorHandler.error("invalid doc source"),i.doc};function c1(t,e,r){if(!t){if(e instanceof ga)return e;t=e}var n={},i=t instanceof Function;r=r||{};function s(a){var o=t[a];!o&&i&&(o=t.length==2?function(l){t(a,l)}:t),n[a]=o&&function(l){o("[xmldom "+a+"]	"+l+dc(r))}||function(){}}return s("warning"),s("error"),s("fatalError"),n}function ga(){this.cdata=!1}function mi(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}ga.prototype={startDocument:function(){this.doc=new o1().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var i=this.doc,s=i.createElementNS(t,r||e),a=n.length;Ma(this,s),this.currentElement=s,this.locator&&mi(this.locator,s);for(var o=0;o<a;o++){var t=n.getURI(o),l=n.getValue(o),r=n.getQName(o),c=i.createAttributeNS(t,r);this.locator&&mi(n.getLocator(o),c),c.value=c.nodeValue=l,s.setAttributeNode(c)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&mi(this.locator,r),Ma(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=jf.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&mi(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=jf.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&mi(this.locator,n),Ma(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(t,e,r);this.locator&&mi(this.locator,i),Ma(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,dc(this.locator))},error:function(t){console.error("[xmldom error]	"+t,dc(this.locator))},fatalError:function(t){throw new l1(t,this.locator)}};function dc(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function jf(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){ga.prototype[t]=function(){return null}});function Ma(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}ma.__DOMHandler=ga;ma.DOMParser=qg;ma.DOMImplementation=Sd.DOMImplementation;ma.XMLSerializer=Sd.XMLSerializer;var Vg=ma.DOMParser;const _d=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,d1=1,h1=3,Gg=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function hl(){var t=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?n:n&7|8).toString(16)});return e}function f1(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function Zg(t){return!!(t&&t.nodeType==1)}function st(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Yg(t){let e=parseFloat(t);return st(t)===!1?!1:typeof t=="string"&&t.indexOf(".")>-1?!0:Math.floor(e)!==e}function vi(t){var e=["Webkit","webkit","Moz","O","ms"],r=["-webkit-","-webkit-","-moz-","-o-","-ms-"],n=t.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[n]<"u")return t;for(var s=0;s<i;s++)if(typeof document.body.style[r[s]+n]<"u")return r[s]+n;return t}function Kg(t){for(var e=1,r=arguments.length;e<r;e++){var n=arguments[e];for(var i in n)t[i]===void 0&&(t[i]=n[i])}return t}function At(t){var e=[].slice.call(arguments,1);return e.forEach(function(r){r&&Object.getOwnPropertyNames(r).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}),t}function p1(t,e,r){var n=es(t,e,r);return e.splice(n,0,t),n}function es(t,e,r,n,i){var s=n||0,a=i||e.length,o=parseInt(s+(a-s)/2),l;return r||(r=function(c,d){if(c>d)return 1;if(c<d)return-1;if(c==d)return 0}),a-s<=0?o:(l=r(e[o],t),a-s===1?l>=0?o:o+1:l===0?o:l===-1?es(t,e,r,o,a):es(t,e,r,s,o))}function Ro(t,e,r,n,i){var s=n||0,a=i||e.length,o=parseInt(s+(a-s)/2),l;return r||(r=function(c,d){if(c>d)return 1;if(c<d)return-1;if(c==d)return 0}),a-s<=0?-1:(l=r(e[o],t),a-s===1?l===0?o:-1:l===0?o:l===-1?Ro(t,e,r,o,a):Ro(t,e,r,s,o))}function no(t){var e=window.getComputedStyle(t),r=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return r.forEach(function(a){i+=parseFloat(e[a])||0}),n.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function zo(t){var e=window.getComputedStyle(t),r=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return r.forEach(function(a){i+=parseFloat(e[a])||0}),n.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function hc(t){let e,r=t.ownerDocument;if(t.nodeType==Node.TEXT_NODE){let n=r.createRange();n.selectNodeContents(t),e=n.getBoundingClientRect()}else e=t.getBoundingClientRect();return e}function Po(){var t=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}function Nd(t,e){for(var r=t.parentNode,n=r.childNodes,i,s=-1,a=0;a<n.length&&(i=n[a],i.nodeType===e&&s++,i!=t);a++);return s}function m1(t){return Nd(t,h1)}function Xg(t){return Nd(t,d1)}function na(t){return["xml","opf","ncx"].indexOf(t)>-1}function Qg(t,e){return new Blob([t],{type:e})}function Fo(t,e){var r,n=Qg(t,e);return r=Gg.createObjectURL(n),r}function Jg(t){return Gg.revokeObjectURL(t)}function fc(t,e){var r,n;if(typeof t=="string")return r=btoa(t),n="data:"+e+";base64,"+r,n}function ev(t){return Object.prototype.toString.call(t).slice(8,-1)}function Gr(t,e,r){var n,i;return typeof DOMParser>"u"||r?i=Vg:i=DOMParser,t.charCodeAt(0)===65279&&(t=t.slice(1)),n=new i().parseFromString(t,e),n}function Ge(t,e){var r;if(!t)throw new Error("No Element Provided");if(typeof t.querySelector<"u")return t.querySelector(e);if(r=t.getElementsByTagName(e),r.length)return r[0]}function pn(t,e){return typeof t.querySelector<"u"?t.querySelectorAll(e):t.getElementsByTagName(e)}function yi(t,e,r){var n,i;if(typeof t.querySelector<"u"){e+="[";for(var s in r)e+=s+"~='"+r[s]+"'";return e+="]",t.querySelector(e)}else if(n=t.getElementsByTagName(e),i=Array.prototype.slice.call(n,0).filter(function(a){for(var o in r)if(a.getAttribute(o)===r[o])return!0;return!1}),i)return i[0]}function Oo(t,e){var r=t.ownerDocument||t;typeof r.createTreeWalker<"u"?tv(t,e,NodeFilter.SHOW_TEXT):Dd(t,function(n){n&&n.nodeType===3&&e(n)})}function tv(t,e,r){var n=document.createTreeWalker(t,r,null,!1);let i;for(;i=n.nextNode();)e(i)}function Dd(t,e){if(e(t))return!0;if(t=t.firstChild,t)do{if(Dd(t,e))return!0;t=t.nextSibling}while(t)}function rv(t){return new Promise(function(e,r){var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){e(n.result)}})}function Re(){this.resolve=null,this.reject=null,this.id=hl(),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),Object.freeze(this)}function Mo(t,e,r){var n;if(typeof t.querySelector<"u"&&(n=t.querySelector(`${e}[*|type="${r}"]`)),!n||n.length===0){n=pn(t,e);for(var i=0;i<n.length;i++)if(n[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===r||n[i].getAttribute("epub:type")===r)return n[i]}else return n}function pc(t){for(var e=[],r=t.childNodes,n=0;n<r.length;n++){let i=r[n];i.nodeType===1&&e.push(i)}return e}function mc(t){for(var e=[t];t;t=t.parentNode)e.unshift(t);return e}function xi(t,e,r){for(var n=[],i=t.childNodes,s=0;s<i.length;s++){let a=i[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(r)return a;n.push(a)}}if(!r)return n}function g1(t,e){let r;if(!(t===null||e===""))for(r=t.parentNode;r.nodeType===1;){if(r.tagName.toLowerCase()===e)return r;r=r.parentNode}}class nv{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,r){this.startContainer=e,this.startOffset=r,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,r){this.endContainer=e,this.endOffset=r,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let r=e.parentNode,n=Array.prototype.indexOf.call(r.childNodes,e);this.setStart(r,n),this.setEnd(r,n+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let r=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,r)}_commonAncestorContainer(e,r){var n=mc(e||this.startContainer),i=mc(r||this.endContainer);if(n[0]==i[0]){for(var s=0;s<n.length;s++)if(n[s]!=i[s])return n[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const v1=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:nv,blob2base64:rv,borders:zo,bounds:no,createBase64Url:fc,createBlob:Qg,createBlobUrl:Fo,defaults:Kg,defer:Re,documentHeight:f1,extend:At,filterChildren:xi,findChildren:pc,getParentByTagName:g1,indexOfElementNode:Xg,indexOfNode:Nd,indexOfSorted:Ro,indexOfTextNode:m1,insert:p1,isElement:Zg,isFloat:Yg,isNumber:st,isXml:na,locationOf:es,nodeBounds:hc,parents:mc,parse:Gr,prefixed:vi,qs:Ge,qsa:pn,qsp:yi,querySelectorByType:Mo,requestAnimationFrame:_d,revokeBlobUrl:Jg,sprint:Oo,treeWalker:tv,type:ev,uuid:hl,walk:Dd,windowBounds:Po},Symbol.toStringTag,{value:"Module"}));if(!iv)var iv={cwd:function(){return"/"}};function Mr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+t)}function Bf(t,e){for(var r="",n=-1,i=0,s,a=0;a<=t.length;++a){if(a<t.length)s=t.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(n===a-1||i===1))if(n!==a-1&&i===2){if(r.length<2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){for(var o=r.length-1,l=o;l>=0&&r.charCodeAt(l)!==47;--l);if(l!==o){l===-1?r="":r=r.slice(0,l),n=a,i=0;continue}}else if(r.length===2||r.length===1){r="",n=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..")}else r.length>0?r+="/"+t.slice(n+1,a):r=t.slice(n+1,a);n=a,i=0}else s===46&&i!==-1?++i:i=-1}return r}function y1(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var io={resolve:function(){for(var e="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=iv.cwd()),s=n),Mr(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=Bf(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Mr(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Bf(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return Mr(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];Mr(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":io.normalize(e)},relative:function(e,r){if(Mr(e),Mr(r),e===r||(e=io.resolve(e),r=io.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var o=r.length,l=o-a,c=s<l?s:l,d=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(r.charCodeAt(a+h)===47)return r.slice(a+h+1);if(h===0)return r.slice(a+h)}else s>c&&(e.charCodeAt(n+h)===47?d=h:h===0&&(d=0));break}var v=e.charCodeAt(n+h),b=r.charCodeAt(a+h);if(v!==b)break;v===47&&(d=h)}var N="";for(h=n+d+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(N.length===0?N+="..":N+="/..");return N.length>0?N+r.slice(a+d):(a+=d,r.charCodeAt(a)===47&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(Mr(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(r=e.charCodeAt(a),r===47){if(!s){i=a;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Mr(e);var n=0,i=-1,s=!0,a;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,l=-1;for(a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!s){n=a+1;break}}else l===-1&&(s=!1,l=a+1),o>=0&&(c===r.charCodeAt(o)?--o===-1&&(i=a):(o=-1,i=l))}return n===i?i=l:i===-1&&(i=e.length),e.slice(n,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){n=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(n,i)}},extname:function(e){Mr(e);for(var r=-1,n=0,i=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!s){n=o+1;break}continue}i===-1&&(s=!1,i=o+1),l===46?r===-1?r=o:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return y1("/",e)},parse:function(e){Mr(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),i=n===47,s;i?(r.root="/",s=1):s=0;for(var a=-1,o=0,l=-1,c=!0,d=e.length-1,h=0;d>=s;--d){if(n=e.charCodeAt(d),n===47){if(!c){o=d+1;break}continue}l===-1&&(c=!1,l=d+1),n===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||l===-1||h===0||h===1&&a===l-1&&a===o+1?l!==-1&&(o===0&&i?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(o,l)):(o===0&&i?(r.name=e.slice(1,a),r.base=e.slice(1,l)):(r.name=e.slice(o,a),r.base=e.slice(o,l)),r.ext=e.slice(a,l)),o>0?r.dir=e.slice(0,o-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",posix:null},x1=io;const _n=ii(x1);class mn{constructor(e){var r,n;r=e.indexOf("://"),r>-1&&(e=new URL(e).pathname),n=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=n.dir+"/",this.filename=n.base,this.extension=n.ext.slice(1)}parse(e){return _n.parse(e)}isAbsolute(e){return _n.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return _n.resolve(this.directory,e)}relative(e){var r=e&&e.indexOf("://")>-1;return r?e:_n.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Ar{constructor(e,r){var n=e.indexOf("://")>-1,i=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=r,!n&&r!==!1&&typeof r!="string"&&window&&window.location&&(this.base=window.location.href),n||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new mn(this.base),i=s.resolve(i))}this.Path=new mn(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var r=e.indexOf("://")>-1,n;return r?e:(n=_n.resolve(this.directory,e),this.origin+n)}relative(e){return _n.relative(e,this.directory)}toString(){return this.href}}const gi=1,hr=3,b1=9;class ze{constructor(e,r,n){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof ze))return new ze(e,r,n);if(typeof r=="string"?this.base=this.parseComponent(r):typeof r=="object"&&r.steps&&(this.base=r),i=this.checkType(e),i==="string")return this.str=e,At(this,this.parse(e));if(i==="range")return At(this,this.fromRange(e,this.base,n));if(i==="node")return At(this,this.fromNode(e,this.base,n));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(ev(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof ze?"EpubCFI":!1}parse(e){var r={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},n,i,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),n=this.getChapterComponent(e),n?(r.base=this.parseComponent(n),i=this.getPathComponent(e),r.path=this.parseComponent(i),s=this.getRange(e),s&&(r.range=!0,r.start=this.parseComponent(s[0]),r.end=this.parseComponent(s[1])),r.spinePos=r.base.steps[1].index,r):{spinePos:-1})}parseComponent(e){var r={steps:[],terminal:{offset:null,assertion:null}},n=e.split(":"),i=n[0].split("/"),s;return n.length>1&&(s=n[1],r.terminal=this.parseTerminal(s)),i[0]===""&&i.shift(),r.steps=i.map((function(a){return this.parseStep(a)}).bind(this)),r}parseStep(e){var r,n,i,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),n=parseInt(e),!isNaN(n))return n%2===0?(r="element",i=n/2-1):(r="text",i=(n-1)/2),{type:r,index:i,id:a||null}}parseTerminal(e){var r,n,i=e.match(/\[(.*)\]/);return i&&i[1]?(r=parseInt(e.split("[")[0]),n=i[1]):r=parseInt(e),st(r)||(r=null),{offset:r,assertion:n}}getChapterComponent(e){var r=e.split("!");return r[0]}getPathComponent(e){var r=e.split("!");if(r[1])return r[1].split(",")[0]}getRange(e){var r=e.split(",");return r.length===3?[r[1],r[2]]:!1}getCharecterOffsetComponent(e){var r=e.split(":");return r[1]||""}joinSteps(e){return e?e.map(function(r){var n="";return r.type==="element"&&(n+=(r.index+1)*2),r.type==="text"&&(n+=1+2*r.index),r.id&&(n+="["+r.id+"]"),n}).join("/"):""}segmentString(e){var r="/";return r+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(r+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(r+="["+e.terminal.assertion+"]"),r}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,r){var n,i,s,a;if(typeof e=="string"&&(e=new ze(e)),typeof r=="string"&&(r=new ze(r)),e.spinePos>r.spinePos)return 1;if(e.spinePos<r.spinePos)return-1;e.range?(n=e.path.steps.concat(e.start.steps),s=e.start.terminal):(n=e.path.steps,s=e.path.terminal),r.range?(i=r.path.steps.concat(r.start.steps),a=r.start.terminal):(i=r.path.steps,a=r.path.terminal);for(var o=0;o<n.length;o++){if(!n[o])return-1;if(!i[o]||n[o].index>i[o].index)return 1;if(n[o].index<i[o].index)return-1}return n.length<i.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var r=e.nodeType===hr?"text":"element";return{id:e.id,tagName:e.tagName,type:r,index:this.position(e)}}filteredStep(e,r){var n=this.filter(e,r),i;if(n)return i=n.nodeType===hr?"text":"element",{id:n.id,tagName:n.tagName,type:i,index:this.filteredPosition(n,r)}}pathTo(e,r,n){for(var i={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=b1;)n?a=this.filteredStep(s,n):a=this.step(s),a&&i.steps.unshift(a),s=s.parentNode;return r!=null&&r>=0&&(i.terminal.offset=r,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,r){return!e||!r?!1:e.index===r.index&&e.id===r.id&&e.type===r.type}fromRange(e,r,n){var i={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,l=e.endOffset,c=!1;if(n&&(c=s.ownerDocument.querySelector("."+n)!=null),typeof r=="string"?(i.base=this.parseComponent(r),i.spinePos=i.base.steps[1].index):typeof r=="object"&&(i.base=r),e.collapsed)c&&(o=this.patchOffset(s,o,n)),i.path=this.pathTo(s,o,n);else{i.range=!0,c&&(o=this.patchOffset(s,o,n)),i.start=this.pathTo(s,o,n),c&&(l=this.patchOffset(a,l,n)),i.end=this.pathTo(a,l,n),i.path={steps:[],terminal:null};var d=i.start.steps.length,h;for(h=0;h<d&&this.equalStep(i.start.steps[h],i.end.steps[h]);h++)h===d-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[h]),i.range=!1):i.path.steps.push(i.start.steps[h]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,r,n){var i={range:!1,base:{},path:{},start:null,end:null};return typeof r=="string"?(i.base=this.parseComponent(r),i.spinePos=i.base.steps[1].index):typeof r=="object"&&(i.base=r),i.path=this.pathTo(e,null,n),i}filter(e,r){var n,i,s,a,o,l=!1;return e.nodeType===hr?(l=!0,s=e.parentNode,n=e.parentNode.classList.contains(r)):(l=!1,n=e.classList.contains(r)),n&&l?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===hr?i=a:o&&o.nodeType===hr&&(i=o),i||e):n&&!l?!1:e}patchOffset(e,r,n){if(e.nodeType!=hr)throw new Error("Anchor must be a text node");var i=e,s=r;for(e.parentNode.classList.contains(n)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===gi)if(i.previousSibling.classList.contains(n))s+=i.previousSibling.textContent.length;else break;else s+=i.previousSibling.textContent.length;i=i.previousSibling}return s}normalizedMap(e,r,n){var i={},s=-1,a,o=e.length,l,c;for(a=0;a<o;a++)l=e[a].nodeType,l===gi&&e[a].classList.contains(n)&&(l=hr),a>0&&l===hr&&c===hr?i[a]=s:r===l&&(s=s+1,i[a]=s),c=l;return i}position(e){var r,n;return e.nodeType===gi?(r=e.parentNode.children,r||(r=pc(e.parentNode)),n=Array.prototype.indexOf.call(r,e)):(r=this.textNodes(e.parentNode),n=r.indexOf(e)),n}filteredPosition(e,r){var n,i,s;return e.nodeType===gi?(n=e.parentNode.children,s=this.normalizedMap(n,gi,r)):(n=e.parentNode.childNodes,e.parentNode.classList.contains(r)&&(e=e.parentNode,n=e.parentNode.childNodes),s=this.normalizedMap(n,hr,r)),i=Array.prototype.indexOf.call(n,e),s[i]}stepsToXpath(e){var r=[".","*"];return e.forEach(function(n){var i=n.index+1;n.id?r.push("*[position()="+i+" and @id='"+n.id+"']"):n.type==="text"?r.push("text()["+i+"]"):r.push("*["+i+"]")}),r.join("/")}stepsToQuerySelector(e){var r=["html"];return e.forEach(function(n){var i=n.index+1;n.id?r.push("#"+n.id):n.type==="text"||r.push("*:nth-child("+i+")")}),r.join(">")}textNodes(e,r){return Array.prototype.slice.call(e.childNodes).filter(function(n){return n.nodeType===hr?!0:!!(r&&n.classList.contains(r))})}walkToNode(e,r,n){var i=r||document,s=i.documentElement,a,o,l=e.length,c;for(c=0;c<l&&(o=e[c],o.type==="element"?o.id?s=i.getElementById(o.id):(a=s.children||pc(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,n)[o.index]),!!s);c++);return s}findNode(e,r,n){var i=r||document,s,a;return!n&&typeof i.evaluate<"u"?(a=this.stepsToXpath(e),s=i.evaluate(a,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):n?s=this.walkToNode(e,i,n):s=this.walkToNode(e,i),s}fixMiss(e,r,n,i){var s=this.findNode(e.slice(0,-1),n,i),a=s.childNodes,o=this.normalizedMap(a,hr,i),l,c,d=e[e.length-1].index;for(let h in o){if(!o.hasOwnProperty(h))return;if(o[h]===d)if(l=a[h],c=l.textContent.length,r>c)r=r-c;else{l.nodeType===gi?s=l.childNodes[0]:s=l;break}}return{container:s,offset:r}}toRange(e,r){var n=e||document,i,s,a,o,l,c=this,d,h,v=r?n.querySelector("."+r)!=null:!1,b;if(typeof n.createRange<"u"?i=n.createRange():i=new nv,c.range?(s=c.start,d=c.path.steps.concat(s.steps),o=this.findNode(d,n,v?r:null),a=c.end,h=c.path.steps.concat(a.steps),l=this.findNode(h,n,v?r:null)):(s=c.path,d=c.path.steps,o=this.findNode(c.path.steps,n,v?r:null)),o)try{s.terminal.offset!=null?i.setStart(o,s.terminal.offset):i.setStart(o,0)}catch{b=this.fixMiss(d,s.terminal.offset,n,v?r:null),i.setStart(b.container,b.offset)}else return console.log("No startContainer found for",this.toString()),null;if(l)try{a.terminal.offset!=null?i.setEnd(l,a.terminal.offset):i.setEnd(l,0)}catch{b=this.fixMiss(h,c.end.terminal.offset,n,v?r:null),i.setEnd(b.container,b.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,r,n){var i=parseInt(r),s=(e+1)*2,a="/"+s+"/";return a+=(i+1)*2,n&&(a+="["+n+"]"),a}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Br{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var r=0;r<arguments[e].length;++r)this.hooks.push(arguments[e][r])}deregister(e){let r;for(let n=0;n<this.hooks.length;n++)if(r=this.hooks[n],r===e){this.hooks.splice(n,1);break}}trigger(){var e=arguments,r=this.context,n=[];return this.hooks.forEach(function(i){try{var s=i.apply(r,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&n.push(s)}),Promise.all(n)}list(){return this.hooks}clear(){return this.hooks=[]}}function sv(t,e){var r,n,i=e.url,s=i.indexOf("://")>-1;t&&(n=Ge(t,"head"),r=Ge(n,"base"),r||(r=t.createElement("base"),n.insertBefore(r,n.firstChild)),!s&&window&&window.location&&(i=window.location.origin+i),r.setAttribute("href",i))}function w1(t,e){var r,n,i=e.canonical;t&&(r=Ge(t,"head"),n=Ge(r,"link[rel='canonical']"),n?n.setAttribute("href",i):(n=t.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",i),r.appendChild(n)))}function k1(t,e){var r,n,i=e.idref;t&&(r=Ge(t,"head"),n=Ge(r,"link[property='dc.identifier']"),n?n.setAttribute("content",i):(n=t.createElement("meta"),n.setAttribute("name","dc.identifier"),n.setAttribute("content",i),r.appendChild(n)))}function C1(t,e){var r=t.querySelectorAll("a[href]");if(r.length)for(var n=Ge(t.ownerDocument,"base"),i=n?n.getAttribute("href"):void 0,s=(function(o){var l=o.getAttribute("href");if(l.indexOf("mailto:")!==0){var c=l.indexOf("://")>-1;if(c)o.setAttribute("target","_blank");else{var d;try{d=new Ar(l,i)}catch{}o.onclick=function(){return d&&d.hash?e(d.Path.path+d.hash):e(d?d.Path.path:l),!1}}}}).bind(this),a=0;a<r.length;a++)s(r[a])}function Lf(t,e,r){return e.forEach(function(n,i){n&&r[i]&&(n=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp(n,"g"),r[i]))}),t}function ia(t,e,r,n){var i=typeof window<"u"?window.URL:!1,s=i?"blob":"arraybuffer",a=new Re,o=new XMLHttpRequest,l=XMLHttpRequest.prototype,c;"overrideMimeType"in l||Object.defineProperty(l,"overrideMimeType",{value:function(){}}),r&&(o.withCredentials=!0),o.onreadystatechange=h,o.onerror=d,o.open("GET",t,!0);for(c in n)o.setRequestHeader(c,n[c]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new mn(t).extension),e=="blob"&&(o.responseType=s),na(e)&&o.overrideMimeType("text/xml"),e=="binary"&&(o.responseType="arraybuffer"),o.send();function d(v){a.reject(v)}function h(){if(this.readyState===XMLHttpRequest.DONE){var v=!1;if((this.responseType===""||this.responseType==="document")&&(v=this.responseXML),this.status===200||this.status===0||v){var b;if(!this.response&&!v)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;v?b=this.responseXML:na(e)?b=Gr(this.response,"text/xml"):e=="xhtml"?b=Gr(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?b=Gr(this.response,"text/html"):e=="json"?b=JSON.parse(this.response):e=="blob"?i?b=this.response:b=new Blob([this.response]):b=this.response,a.resolve(b)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}class E1{constructor(e,r){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,r?this.hooks=r:(this.hooks={},this.hooks.serialize=new Br(this),this.hooks.content=new Br(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var r=e||this.request||ia,n=new Re,i=n.promise;return this.contents?n.resolve(this.contents):r(this.url).then((function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){n.resolve(this.contents)}).bind(this)).catch(function(s){n.reject(s)}),i}base(){return sv(this.document,this)}render(e){var r=new Re,n=r.promise;return this.output,this.load(e).then((function(i){var s=typeof navigator<"u"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer>"u"||a?o=Vg:o=XMLSerializer;var l=new o;return this.output=l.serializeToString(i),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){r.resolve(this.output)}).bind(this)).catch(function(i){r.reject(i)}),n}find(e){var r=this,n=[],i=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),l=r.document.createRange(),c,d,h=-1,v,b=150;d!=-1;)d=o.indexOf(i,h+1),d!=-1&&(l=r.document.createRange(),l.setStart(a,d),l.setEnd(a,d+i.length),c=r.cfiFromRange(l),a.textContent.length<b?v=a.textContent:(v=a.textContent.substring(d-b/2,d+b/2),v="..."+v+"..."),n.push({cfi:c,excerpt:v})),h=d};return Oo(r.document,function(a){s(a)}),n}search(e,r=5){if(typeof document.createTreeWalker>"u")return this.find(e);let n=[];const i=150,s=this,a=e.toLowerCase(),o=function(h){const N=h.reduce((k,y)=>k+y.textContent,"").toLowerCase().indexOf(a);if(N!=-1){const y=N+a.length;let p=0,m=0;if(N<h[0].length){let g;for(;p<h.length-1&&(m+=h[p].length,!(y<=m));)p+=1;let w=h[0],x=h[p],C=s.document.createRange();C.setStart(w,N);let E=h.slice(0,p).reduce((I,R)=>I+R.textContent.length,0);C.setEnd(x,E>y?y:y-E),g=s.cfiFromRange(C);let S=h.slice(0,p+1).reduce((I,R)=>I+R.textContent,"");S.length>i&&(S=S.substring(N-i/2,N+i/2),S="..."+S+"..."),n.push({cfi:g,excerpt:S})}}},l=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let c,d=[];for(;c=l.nextNode();)d.push(c),d.length==r&&(o(d.slice(0,r)),d=d.slice(1,r));return d.length>0&&o(d),n}reconcileLayoutSettings(e){var r={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(n){var i=n.replace("rendition:",""),s=i.indexOf("-"),a,o;s!=-1&&(a=i.slice(0,s),o=i.slice(s+1),r[a]=o)}),r}cfiFromRange(e){return new ze(e,this.cfiBase).toString()}cfiFromElement(e){return new ze(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class S1{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Br,this.hooks.content=new Br,this.hooks.content.register(sv),this.hooks.content.register(w1),this.hooks.content.register(k1),this.epubcfi=new ze,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,r,n){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,s)=>{var a=this.manifest[i.idref],o;i.index=s,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=r(i.href,!0),i.canonical=n(i.href)),a&&(i.href=a.href,i.url=r(i.href,!0),i.canonical=n(i.href),a.properties.length&&i.properties.push.apply(i.properties,a.properties)),i.linear==="yes"?(i.prev=(function(){let l=i.index;for(;l>0;){let c=this.get(l-1);if(c&&c.linear)return c;l-=1}}).bind(this),i.next=(function(){let l=i.index;for(;l<this.spineItems.length-1;){let c=this.get(l+1);if(c&&c.linear)return c;l+=1}}).bind(this)):(i.prev=function(){},i.next=function(){}),o=new E1(i,this.hooks),this.append(o)}),this.loaded=!0}get(e){var r=0;if(typeof e>"u")for(;r<this.spineItems.length;){let n=this.spineItems[r];if(n&&n.linear)break;r+=1}else this.epubcfi.isCfiString(e)?r=new ze(e).spinePos:typeof e=="number"||isNaN(e)===!1?r=e:typeof e=="string"&&e.indexOf("#")===0?r=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],r=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[r]||null}append(e){var r=this.spineItems.length;return e.index=r,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=r,this.spineByHref[encodeURI(e.href)]=r,this.spineByHref[e.href]=r,this.spineById[e.idref]=r,r}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(r,n){r.index=n}),0}remove(e){var r=this.spineItems.indexOf(e);if(r>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(r,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let r=this.get(e);if(r&&r.linear)return r;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let r=this.get(e);if(r&&r.linear)return r;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class Td{constructor(e){this._q=[],this.context=e,this.tick=_d,this.running=!1,this.paused=!1}enqueue(){var e,r,n,i=[].shift.call(arguments),s=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new Re,r=e.promise,n={task:i,args:s,deferred:e,promise:r}):n={promise:i},this._q.push(n),this.paused==!1&&!this.running&&this.run(),n.promise}dequeue(){var e,r,n;if(this._q.length&&!this.paused){if(e=this._q.shift(),r=e.task,r)return n=r.apply(this.context,e.args),n&&typeof n.then=="function"?n.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,n),e.promise);if(e.promise)return e.promise}else return e=new Re,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Re),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const fl="0.3",so=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],me={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class av{constructor(e,r,n){this.spine=e,this.request=r,this.pause=n||100,this.q=new Td(this),this.epubcfi=new ze,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(r){r.linear&&this.q.enqueue(this.process.bind(this),r)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(r){var n=new Re,i=this.parse(r,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>n.resolve(i),this.pause),n.promise}).bind(this))}parse(e,r,n){var i=[],s,a=e.ownerDocument,o=Ge(a,"body"),l=0,c,d=n||this.break,h=function(v){var b=v.length,N,k=0;if(v.textContent.trim().length===0)return!1;for(l==0&&(s=this.createRange(),s.startContainer=v,s.startOffset=0),N=d-l,N>b&&(l+=b,k=b);k<b;)if(N=d-l,l===0&&(k+=1,s=this.createRange(),s.startContainer=v,s.startOffset=k),k+N>=b)l+=b-k,k=b;else{k+=N,s.endContainer=v,s.endOffset=k;let y=new ze(s,r).toString();i.push(y),l=0}c=v};if(Oo(o,h.bind(this)),s&&s.startContainer&&c){s.endContainer=c,s.endOffset=c.length;let v=new ze(s,r).toString();i.push(v),l=0}return i}generateFromWords(e,r,n){var i=e?new ze(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(s){s.linear&&(i?s.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),s,r,i,n):this.q.enqueue(this.processWords.bind(this),s,r,i,n))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,r,n,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then((function(s){var a=new Re,o=this.parseWords(s,e,r,n),l=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=i?o.slice(0,l):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,r,n,i){var s=r.cfiBase,a=[],o=e.ownerDocument,l=Ge(o,"body"),c=n,d=i?i.spinePos!==r.index:!0,h;i&&r.index===i.spinePos&&(h=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var v=function(b){if(!d)if(b===h)d=!0;else return!1;if(b.textContent.length<10&&b.textContent.trim().length===0)return!1;var N=this.countWords(b.textContent),k,y=0;if(N===0)return!1;for(k=c-this._wordCounter,k>N&&(this._wordCounter+=N,y=N);y<N;)if(k=c-this._wordCounter,y+k>=N)this._wordCounter+=N-y,y=N;else{y+=k;let p=new ze(b,s);a.push({cfi:p.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return Oo(l,v.bind(this)),a}locationFromCfi(e){let r;return ze.prototype.isCfiString(e)&&(e=new ze(e)),this._locations.length===0?-1:(r=es(e,this._locations,this.epubcfi.compare),r>this.total?this.total:r)}percentageFromCfi(e){if(this._locations.length===0)return null;var r=this.locationFromCfi(e);return this.percentageFromLocation(r)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var r=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(r=this._locations[e]),r}cfiFromPercentage(e){let r;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let n=new ze(this._locations[this.total]);return n.collapse(),n.toString()}return r=Math.ceil(this.total*e),this.cfiFromLocation(r)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var r;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(r=this.locationFromCfi(e),this._current=r):r=e,this.emit(me.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(r)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}Yr(av.prototype);class _1{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var r;if(!e)throw new Error("Container File Not Found");if(r=Ge(e,"rootfile"),!r)throw new Error("No RootFile Found");this.packagePath=r.getAttribute("full-path"),this.directory=_n.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class If{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var r,n,i;if(!e)throw new Error("Package File Not Found");if(r=Ge(e,"metadata"),!r)throw new Error("No Metadata Found");if(n=Ge(e,"manifest"),!n)throw new Error("No Manifest Found");if(i=Ge(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(n),this.navPath=this.findNavPath(n),this.ncxPath=this.findNcxPath(n,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=Xg(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(r),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var r={};return r.title=this.getElementText(e,"title"),r.creator=this.getElementText(e,"creator"),r.description=this.getElementText(e,"description"),r.pubdate=this.getElementText(e,"date"),r.publisher=this.getElementText(e,"publisher"),r.identifier=this.getElementText(e,"identifier"),r.language=this.getElementText(e,"language"),r.rights=this.getElementText(e,"rights"),r.modified_date=this.getPropertyText(e,"dcterms:modified"),r.layout=this.getPropertyText(e,"rendition:layout"),r.orientation=this.getPropertyText(e,"rendition:orientation"),r.flow=this.getPropertyText(e,"rendition:flow"),r.viewport=this.getPropertyText(e,"rendition:viewport"),r.media_active_class=this.getPropertyText(e,"media:active-class"),r.spread=this.getPropertyText(e,"rendition:spread"),r}parseManifest(e){var r={},n=pn(e,"item"),i=Array.prototype.slice.call(n);return i.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",l=s.getAttribute("media-type")||"",c=s.getAttribute("media-overlay")||"",d=s.getAttribute("properties")||"";r[a]={href:o,type:l,overlay:c,properties:d.length?d.split(" "):[]}}),r}parseSpine(e,r){var n=[],i=pn(e,"itemref"),s=Array.prototype.slice.call(i);return s.forEach(function(a,o){var l=a.getAttribute("idref"),c=a.getAttribute("properties")||"",d=c.length?c.split(" "):[],h={id:a.getAttribute("id"),idref:l,linear:a.getAttribute("linear")||"yes",properties:d,index:o};n.push(h)}),n}findUniqueIdentifier(e){var r=e.documentElement.getAttribute("unique-identifier");if(!r)return"";var n=e.getElementById(r);return n&&n.localName==="identifier"&&n.namespaceURI==="http://purl.org/dc/elements/1.1/"&&n.childNodes.length>0?n.childNodes[0].nodeValue.trim():""}findNavPath(e){var r=yi(e,"item",{properties:"nav"});return r?r.getAttribute("href"):!1}findNcxPath(e,r){var n=yi(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return n||(i=r.getAttribute("toc"),i&&(n=e.querySelector(`#${i}`))),n?n.getAttribute("href"):!1}findCoverPath(e){var r=Ge(e,"package");r.getAttribute("version");var n=yi(e,"item",{properties:"cover-image"});if(n)return n.getAttribute("href");var i=yi(e,"meta",{name:"cover"});if(i){var s=i.getAttribute("content"),a=e.getElementById(s);return a?a.getAttribute("href"):""}else return!1}getElementText(e,r){var n=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",r),i;return!n||n.length===0?"":(i=n[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,r){var n=yi(e,"meta",{property:r});return n&&n.childNodes.length?n.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let r=e.readingOrder||e.spine;return this.spine=r.map((n,i)=>(n.index=i,n.linear=n.linear||"yes",n)),e.resources.forEach((n,i)=>{this.manifest[i]=n,n.rel&&n.rel[0]==="cover"&&(this.coverPath=n.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((n,i)=>(n.label=n.title,n)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class iu{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let r=e.nodeType,n,i;r&&(n=Ge(e,"html"),i=Ge(e,"ncx")),r?n?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var r,n=0;n<e.length;n++)r=e[n],r.href&&(this.tocByHref[r.href]=n),r.id&&(this.tocById[r.id]=n),this.length++,r.subitems.length&&this.unpack(r.subitems)}get(e){var r;return e?(e.indexOf("#")===0?r=this.tocById[e.substring(1)]:e in this.tocByHref&&(r=this.tocByHref[e]),this.getByIndex(e,r,this.toc)):this.toc}getByIndex(e,r,n){if(n.length===0)return;const i=n[r];if(i&&(e===i.id||e===i.href))return i;{let s;for(let a=0;a<n.length&&(s=this.getByIndex(e,r,n[a].subitems),!s);++a);return s}}landmark(e){var r;return e?(r=this.landmarksByType[e],this.landmarks[r]):this.landmarks}parseNav(e){var r=Mo(e,"nav","toc"),n=[];if(!r)return n;let i=xi(r,"ol",!0);return i&&(n=this.parseNavList(i)),n}parseNavList(e,r){const n=[];if(!e||!e.children)return n;for(let i=0;i<e.children.length;i++){const s=this.navItem(e.children[i],r);s&&n.push(s)}return n}navItem(e,r){let n=e.getAttribute("id")||void 0,i=xi(e,"a",!0)||xi(e,"span",!0);if(!i)return;let s=i.getAttribute("href")||"";n||(n=s);let a=i.textContent||"",o=[],l=xi(e,"ol",!0);return l&&(o=this.parseNavList(l,n)),{id:n,href:s,label:a,subitems:o,parent:r}}parseLandmarks(e){var r=Mo(e,"nav","landmarks"),n=r?pn(r,"li"):[],i=n.length,s,a=[],o;if(!n||i===0)return a;for(s=0;s<i;++s)o=this.landmarkItem(n[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let r=xi(e,"a",!0);if(!r)return;let n=r.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=r.getAttribute("href")||"",s=r.textContent||"";return{href:i,label:s,type:n}}parseNcx(e){var r=pn(e,"navPoint"),n=r.length,i,s={},a=[],o,l;if(!r||n===0)return a;for(i=0;i<n;++i)o=this.ncxItem(r[i]),s[o.id]=o,o.parent?(l=s[o.parent],l.subitems.push(o)):a.push(o);return a}ncxItem(e){var r=e.getAttribute("id")||!1,n=Ge(e,"content"),i=n.getAttribute("src"),s=Ge(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],l=e.parentNode,c;return l&&(l.nodeName==="navPoint"||l.nodeName.split(":").slice(-1)[0]==="navPoint")&&(c=l.getAttribute("id")),{id:r,href:i,label:a,subitems:o,parent:c}}load(e){return e.map(r=>(r.label=r.title,r.subitems=r.children?this.load(r.children):[],r))}forEach(e){return this.toc.forEach(e)}}var ys={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},N1=function(){var t,e,r,n,i={};for(t in ys)if(ys.hasOwnProperty(t)){for(e in ys[t])if(ys[t].hasOwnProperty(e))if(r=ys[t][e],typeof r=="string")i[r]=t+"/"+e;else for(n=0;n<r.length;n++)i[r[n]]=t+"/"+e}return i}(),D1="text/plain";function T1(t){return t&&N1[t.split(".").pop().toLowerCase()]||D1}const Wi={lookup:T1};class A1{constructor(e,r){this.settings={replacements:r&&r.replacements||"base64",archive:r&&r.archive,resolver:r&&r.resolver,request:r&&r.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(r){return e[r]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var r=new Ar(e),n=Wi.lookup(r.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>rv(i)).then(i=>fc(i,n)):this.settings.request(e,"blob").then(i=>Fo(i,n))}replacements(){if(this.settings.replacements==="none")return new Promise((function(r){r(this.urls)}).bind(this));var e=this.urls.map(r=>{var n=this.settings.resolver(r);return this.createUrl(n).catch(i=>(console.error(i),null))});return Promise.all(e).then(r=>(this.replacementUrls=r.filter(n=>typeof n=="string"),r))}replaceCss(e,r){var n=[];return e=e||this.settings.archive,r=r||this.settings.resolver,this.cssUrls.forEach((function(i){var s=this.createCssFile(i,e,r).then((function(a){var o=this.urls.indexOf(i);o>-1&&(this.replacementUrls[o]=a)}).bind(this));n.push(s)}).bind(this)),Promise.all(n)}createCssFile(e){var r;if(_n.isAbsolute(e))return new Promise(function(a){a()});var n=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(n):i=this.settings.request(n,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),l=new mn(n).relative(o);return l});return i?i.then(a=>(a=Lf(a,s,this.replacementUrls),this.settings.replacements==="base64"?r=fc(a,"text/css"):r=Fo(a,"text/css"),r),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,r){return r=r||this.settings.resolver,this.urls.map((function(n){var i=r(n),s=new mn(e).relative(i);return s}).bind(this))}get(e){var r=this.urls.indexOf(e);if(r!==-1)return this.replacementUrls.length?new Promise((function(n,i){n(this.replacementUrls[r])}).bind(this)):this.createUrl(e)}substitute(e,r){var n;return r?n=this.relativeTo(r):n=this.urls,Lf(e,n,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class su{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new ze,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var r=Ge(e,"html"),n=Ge(e,"ncx");if(r)return this.parseNav(e);if(n)return this.parseNcx(e)}parseNav(e){var r=Mo(e,"nav","page-list"),n=r?pn(r,"li"):[],i=n.length,s,a=[],o;if(!n||i===0)return a;for(s=0;s<i;++s)o=this.item(n[s]),a.push(o);return a}parseNcx(e){var r=[],n=0,i,s,a,o=0;if(s=Ge(e,"pageList"),!s||(a=pn(s,"pageTarget"),o=a.length,!a||a.length===0))return r;for(n=0;n<o;++n)i=this.ncxItem(a[n]),r.push(i);return r}ncxItem(e){var r=Ge(e,"navLabel"),n=Ge(r,"text"),i=n.textContent,s=Ge(e,"content"),a=s.getAttribute("src"),o=parseInt(i,10);return{href:a,page:o}}item(e){var r=Ge(e,"a"),n=r.getAttribute("href")||"",i=r.textContent||"",s=parseInt(i),a=n.indexOf("epubcfi"),o,l,c;return a!=-1?(o=n.split("#"),l=o[0],c=o.length>1?o[1]:!1,{cfi:c,href:n,packageUrl:l,page:s}):{href:n,page:s}}process(e){e.forEach(function(r){this.pages.push(r.page),r.cfi&&this.locations.push(r.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var r=-1;if(this.locations.length===0)return-1;var n=Ro(e,this.locations,this.epubcfi.compare);return n!=-1?r=this.pages[n]:(n=es(e,this.locations,this.epubcfi.compare),r=n-1>=0?this.pages[n-1]:this.pages[0],r!==void 0||(r=-1)),r}cfiFromPage(e){var r=-1;typeof e!="number"&&(e=parseInt(e));var n=this.pages.indexOf(e);return n!=-1&&(r=this.locations[n]),r}pageFromPercentage(e){var r=Math.round(this.totalPages*e);return r}percentageFromPage(e){var r=(e-this.firstPage)/this.totalPages;return Math.round(r*1e3)/1e3}percentageFromCfi(e){var r=this.pageFromCfi(e),n=this.percentageFromPage(r);return n}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class ov{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,r){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),r>=0&&(this._minSpreadWidth=r),this._spread}calculate(e,r,n){var i=1,s=n||0,a=e,o=r,l=Math.floor(a/12),c,d,h,v;this._spread&&a>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(n>=0)&&(s=l%2===0?l:l-1),this.name==="pre-paginated"&&(s=0),i>1?(c=a/i-s,h=c+s):(c=a,h=a),this.name==="pre-paginated"&&i>1&&(a=c),d=c*i+s,v=a,this.width=a,this.height=o,this.spreadWidth=d,this.pageWidth=h,this.delta=v,this.columnWidth=c,this.gap=s,this.divisor=i,this.update({width:a,height:o,spreadWidth:d,pageWidth:h,delta:v,columnWidth:c,gap:s,divisor:i})}format(e,r,n){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,r):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):n&&n==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,r){let n,i;return this.name==="pre-paginated"?(n=1,i=1):this._flow==="paginated"?(r=r||this.delta,n=Math.ceil(e/r),i=n*this.divisor):(r=r||this.height,n=Math.ceil(e/r),i=n),{spreads:n,pages:i}}update(e){if(Object.keys(e).forEach(r=>{this.props[r]===e[r]&&delete e[r]}),Object.keys(e).length>0){let r=At(this.props,e);this.emit(me.LAYOUT.UPDATED,r,e)}}}Yr(ov.prototype);class j1{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var r in e)e.hasOwnProperty(r)&&(typeof e[r]=="string"?this.registerUrl(r,e[r]):this.registerRules(r,e[r]))}registerCss(e,r){this._themes[e]={serialized:r},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,r){var n=new Ar(r);this._themes[e]={url:n.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,r){this._themes[e]={rules:r},(this._injected[e]||e=="default")&&this.update(e)}select(e){var r=this._current,n;this._current=e,this.update(e),n=this.rendition.getContents(),n.forEach(i=>{i.removeClass(r),i.addClass(e)})}update(e){var r=this.rendition.getContents();r.forEach(n=>{this.add(e,n)})}inject(e){var r=[],n=this._themes,i;for(var s in n)n.hasOwnProperty(s)&&(s===this._current||s==="default")&&(i=n[s],(i.rules&&Object.keys(i.rules).length>0||i.url&&r.indexOf(i.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,r){var n=this._themes[e];!n||!r||(n.url?r.addStylesheet(n.url):n.serialized?(r.addStylesheetCss(n.serialized,e),n.injected=!0):n.rules&&(r.addStylesheetRules(n.rules,e),n.injected=!0))}override(e,r,n){var i=this.rendition.getContents();this._overrides[e]={value:r,priority:n===!0},i.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var r=this.rendition.getContents();delete this._overrides[e],r.forEach(n=>{n.css(e)})}overrides(e){var r=this._overrides;for(var n in r)r.hasOwnProperty(n)&&e.css(n,r[n].value,r[n].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class Uo{constructor(e,r,n,i=!1){this.layout=e,this.horizontal=n==="horizontal",this.direction=r||"ltr",this._dev=i}section(e){var r=this.findRanges(e),n=this.rangeListToCfiList(e.section.cfiBase,r);return n}page(e,r,n,i){var s=e&&e.document?e.document.body:!1,a;if(s){if(a=this.rangePairToCfiPair(r,{start:this.findStart(s,n,i),end:this.findEnd(s,n,i)}),this._dev===!0){let o=e.document,l=new ze(a.start).toRange(o),c=new ze(a.end).toRange(o),d=o.defaultView.getSelection(),h=o.createRange();d.removeAllRanges(),h.setStart(l.startContainer,l.startOffset),h.setEnd(c.endContainer,c.endOffset),d.addRange(h)}return a}}walk(e,r){if(!(e&&e.nodeType===Node.TEXT_NODE)){var n={acceptNode:function(l){return l.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=n.acceptNode;i.acceptNode=n.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),a,o;(a=s.nextNode())&&(o=r(a),!o););return o}}findRanges(e){for(var r=[],n=e.contents.scrollWidth(),i=Math.ceil(n/this.layout.spreadWidth),s=i*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,l,c,d=0;d<s.pages;d++)l=(a+o)*d,c=a*(d+1)+o*d,r.push({start:this.findStart(e.document.body,l,c),end:this.findEnd(e.document.body,l,c)});return r}findStart(e,r,n){for(var i=[e],s,a,o=e;i.length;)if(s=i.shift(),a=this.walk(s,l=>{var c,d,h,v,b;if(b=hc(l),this.horizontal&&this.direction==="ltr"){if(c=this.horizontal?b.left:b.top,d=this.horizontal?b.right:b.bottom,c>=r&&c<=n)return l;if(d>r)return l;o=l,i.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(c=b.left,d=b.right,d<=n&&d>=r)return l;if(c<n)return l;o=l,i.push(l)}else{if(h=b.top,v=b.bottom,h>=r&&h<=n)return l;if(v>r)return l;o=l,i.push(l)}}),a)return this.findTextStartRange(a,r,n);return this.findTextStartRange(o,r,n)}findEnd(e,r,n){for(var i=[e],s,a=e,o;i.length;)if(s=i.shift(),o=this.walk(s,l=>{var c,d,h,v,b;if(b=hc(l),this.horizontal&&this.direction==="ltr"){if(c=Math.round(b.left),d=Math.round(b.right),c>n&&a)return a;if(d>n)return l;a=l,i.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(c=Math.round(this.horizontal?b.left:b.top),d=Math.round(this.horizontal?b.right:b.bottom),d<r&&a)return a;if(c<r)return l;a=l,i.push(l)}else{if(h=Math.round(b.top),v=Math.round(b.bottom),h>n&&a)return a;if(v>n)return l;a=l,i.push(l)}}),o)return this.findTextEndRange(o,r,n);return this.findTextEndRange(a,r,n)}findTextStartRange(e,r,n){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,l,c,d=0;d<i.length;d++)if(s=i[d],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=r)return s}else if(this.horizontal&&this.direction==="rtl"){if(c=a.right,c<=n)return s}else if(l=a.top,l>=r)return s;return i[0]}findTextEndRange(e,r,n){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,l,c,d,h,v=0;v<i.length;v++){if(a=i[v],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l=o.left,c=o.right,l>n&&s)return s;if(c>n)return a}else if(this.horizontal&&this.direction==="rtl"){if(l=o.left,c=o.right,c<r&&s)return s;if(l<r)return a}else{if(d=o.top,h=o.bottom,d>n&&s)return s;if(h>n)return a}s=a}return i[i.length-1]}splitTextNodeIntoRanges(e,r){var n=[],i=e.textContent||"",s=i.trim(),a,o=e.ownerDocument,l=r||" ",c=s.indexOf(l);if(c===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,c),n.push(a),a=!1;c!=-1;)c=s.indexOf(l,c+1),c>0&&(a&&(a.setEnd(e,c),n.push(a)),a=o.createRange(),a.setStart(e,c+1));return a&&(a.setEnd(e,s.length),n.push(a)),n}rangePairToCfiPair(e,r){var n=r.start,i=r.end;n.collapse(!0),i.collapse(!1);let s=new ze(n,e).toString(),a=new ze(i,e).toString();return{start:s,end:a}}rangeListToCfiList(e,r){for(var n=[],i,s=0;s<r.length;s++)i=this.rangePairToCfiPair(e,r[s]),n.push(i);return n}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const lv=typeof navigator<"u",B1=lv&&/Chrome/.test(navigator.userAgent),Rf=lv&&!B1&&/AppleWebKit/.test(navigator.userAgent),L1=1;class Ad{constructor(e,r,n,i){this.epubcfi=new ze,this.document=e,this.documentElement=this.document.documentElement,this.content=r||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=n||"",this.epubReadingSystem("epub.js",fl),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return so}width(e){var r=this.content;return e&&st(e)&&(e=e+"px"),e&&(r.style.width=e),parseInt(this.window.getComputedStyle(r).width)}height(e){var r=this.content;return e&&st(e)&&(e=e+"px"),e&&(r.style.height=e),parseInt(this.window.getComputedStyle(r).height)}contentWidth(e){var r=this.content||this.document.body;return e&&st(e)&&(e=e+"px"),e&&(r.style.width=e),parseInt(this.window.getComputedStyle(r).width)}contentHeight(e){var r=this.content||this.document.body;return e&&st(e)&&(e=e+"px"),e&&(r.style.height=e),parseInt(this.window.getComputedStyle(r).height)}textWidth(){let e,r,n=this.document.createRange(),i=this.content||this.document.body,s=zo(i);return n.selectNodeContents(i),e=n.getBoundingClientRect(),r=e.width,s&&s.width&&(r+=s.width),Math.round(r)}textHeight(){let e,r,n=this.document.createRange(),i=this.content||this.document.body;return n.selectNodeContents(i),e=n.getBoundingClientRect(),r=e.bottom,Math.round(r)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,r,n){var i=this.content||this.document.body;return r?i.style.setProperty(e,r,n?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var r=this.document.querySelector("meta[name='viewport']"),n={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],s={};if(r&&r.hasAttribute("content")){let a=r.getAttribute("content"),o=a.match(/width\s*=\s*([^,]*)/),l=a.match(/height\s*=\s*([^,]*)/),c=a.match(/initial-scale\s*=\s*([^,]*)/),d=a.match(/minimum-scale\s*=\s*([^,]*)/),h=a.match(/maximum-scale\s*=\s*([^,]*)/),v=a.match(/user-scalable\s*=\s*([^,]*)/);o&&o.length&&typeof o[1]<"u"&&(n.width=o[1]),l&&l.length&&typeof l[1]<"u"&&(n.height=l[1]),c&&c.length&&typeof c[1]<"u"&&(n.scale=c[1]),d&&d.length&&typeof d[1]<"u"&&(n.minimum=d[1]),h&&h.length&&typeof h[1]<"u"&&(n.maximum=h[1]),v&&v.length&&typeof v[1]<"u"&&(n.scalable=v[1])}return s=Kg(e||{},n),e&&(s.width&&i.push("width="+s.width),s.height&&i.push("height="+s.height),s.scale&&i.push("initial-scale="+s.scale),s.scalable==="no"?(i.push("minimum-scale="+s.scale),i.push("maximum-scale="+s.scale),i.push("user-scalable="+s.scalable)):(s.scalable&&i.push("user-scalable="+s.scalable),s.minimum&&i.push("minimum-scale="+s.minimum),s.maximum&&i.push("minimum-scale="+s.maximum)),r||(r=this.document.createElement("meta"),r.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(r)),r.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(me.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),r=this.textHeight();(e!=this._size.width||r!=this._size.height)&&(this._size={width:e,height:r},this.onResize&&this.onResize(this._size),this.emit(me.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,r=(function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),n=0;n<e.length;n+=1){var i;try{i=e[n].cssRules}catch{return}if(!i)return;for(var s=0;s<i.length;s+=1)if(i[s].media){var a=this.window.matchMedia(i[s].media.mediaText);a.addListener(r)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(r=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),r,n=0;n<e.length;n++)r=e[n],typeof r.naturalWidth<"u"&&r.naturalWidth===0&&(r.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,r){var n,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let s=new ze(e).toRange(this.document,r);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)n=s.startContainer.getBoundingClientRect(),i.left=n.left,i.top=n.top;else if(Rf){let a=s.startContainer,o=new Range;try{a.nodeType===L1?n=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),n=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),n=o.getBoundingClientRect()):n=a.parentNode.getBoundingClientRect()}catch(l){console.error(l,l.stack)}}else n=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(Rf){let o=new Range;o.selectNode(a),n=o.getBoundingClientRect()}else n=a.getBoundingClientRect()}return n&&(i.left=n.left,i.top=n.top),i}addStylesheet(e){return new Promise((function(r,n){var i,s=!1;if(!this.document){r(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){r(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{r(!0)},1))},this.document.head.appendChild(i)}).bind(this))}_getStylesheetNode(e){var r;return e="epubjs-inserted-css-"+(e||""),this.document?(r=this.document.getElementById(e),r||(r=this.document.createElement("style"),r.id=e,this.document.head.appendChild(r)),r):!1}addStylesheetCss(e,r){if(!this.document||!e)return!1;var n;return n=this._getStylesheetNode(r),n.innerHTML=e,!0}addStylesheetRules(e,r){var n;if(!(!this.document||!e||e.length===0))if(n=this._getStylesheetNode(r).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,s=e.length;i<s;i++){var a=1,o=e[i],l=e[i][0],c="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var d=o.length;a<d;a++){var h=o[a];c+=h[0]+":"+h[1]+(h[2]?" !important":"")+`;
`}n.insertRule(l+"{"+c+"}",n.cssRules.length)}else Object.keys(e).forEach(b=>{const N=e[b];if(Array.isArray(N))N.forEach(k=>{const p=Object.keys(k).map(m=>`${m}:${k[m]}`).join(";");n.insertRule(`${b}{${p}}`,n.cssRules.length)});else{const y=Object.keys(N).map(p=>`${p}:${N[p]}`).join(";");n.insertRule(`${b}{${y}}`,n.cssRules.length)}})}addScript(e){return new Promise((function(r,n){var i,s=!1;if(!this.document){r(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){r(!0)},1))},this.document.head.appendChild(i)}).bind(this))}addClass(e){var r;this.document&&(r=this.content||this.document.body,r&&r.classList.add(e))}removeClass(e){var r;this.document&&(r=this.content||this.document.body,r&&r.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),so.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(so.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var r=this.window.getSelection();this.triggerSelectedEvent(r)}).bind(this),250)}triggerSelectedEvent(e){var r,n;e&&e.rangeCount>0&&(r=e.getRangeAt(0),r.collapsed||(n=new ze(r,this.cfiBase).toString(),this.emit(me.CONTENTS.SELECTED,n),this.emit(me.CONTENTS.SELECTED_RANGE,r)))}range(e,r){var n=new ze(e);return n.toRange(this.document,r)}cfiFromRange(e,r){return new ze(e,this.cfiBase,r).toString()}cfiFromNode(e,r){return new ze(e,this.cfiBase,r).toString()}map(e){var r=new Uo(e);return r.section()}size(e,r){var n={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),n.width=e,this.css("padding","0 "+e/12+"px")),r>=0&&(this.height(r),n.height=r),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(n)}columns(e,r,n,i,s){let a=vi("column-axis"),o=vi("column-gap"),l=vi("column-width"),c=vi("column-fill"),h=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&h==="horizontal"&&this.direction(s),this.width(e),this.height(r),this.viewport({width:e,height:r,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),h==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(c,"auto"),this.css(o,i+"px"),this.css(l,n+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,r,n){var i="scale("+e+")",s="";this.css("transform-origin","top left"),(r>=0||n>=0)&&(s=" translate("+(r||0)+"px, "+(n||0)+"px )"),this.css("transform",i+s)}fit(e,r,n){var i=this.viewport(),s=parseInt(i.width),a=parseInt(i.height),o=e/s,l=r/a,c=o<l?o:l;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(c,0,0),this.css("background-size",s*c+"px "+a*c+"px"),this.css("background-color","transparent"),n&&n.properties.includes("page-spread-left")){var d=e-s*c;this.css("margin-left",d+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,r,n,i,s){var a=new Uo(r,s);return a.page(this,e,n,i)}linksHandler(){C1(this.content,e=>{this.emit(me.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let r=vi("writing-mode");return e&&this.documentElement&&(this.documentElement.style[r]=e),this.window.getComputedStyle(this.documentElement)[r]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,r){return navigator.epubReadingSystem={name:e,version:r,layoutStyle:this.layoutStyle(),hasFeature:function(n){switch(n){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}Yr(Ad.prototype);class I1{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,r,n,i,s,a){let o=encodeURI(r+e),c=new ze(r).spinePos,d=new uv({type:e,cfiRange:r,data:n,sectionIndex:c,cb:i,className:s,styles:a});return this._annotations[o]=d,c in this._annotationsBySectionIndex?this._annotationsBySectionIndex[c].push(o):this._annotationsBySectionIndex[c]=[o],this.rendition.views().forEach(v=>{d.sectionIndex===v.index&&d.attach(v)}),d}remove(e,r){let n=encodeURI(e+r);if(n in this._annotations){let i=this._annotations[n];if(r&&i.type!==r)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,n),i.sectionIndex===a.index&&i.detach(a)}),delete this._annotations[n]}}_removeFromAnnotationBySectionIndex(e,r){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(n=>n!==r)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,r,n,i,s){return this.add("highlight",e,r,n,i,s)}underline(e,r,n,i,s){return this.add("underline",e,r,n,i,s)}mark(e,r,n){return this.add("mark",e,r,n)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let r=e.index;r in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[r].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let r=e.index;r in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[r].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class uv{constructor({type:e,cfiRange:r,data:n,sectionIndex:i,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=r,this.data=n,this.sectionIndex=i,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:r,data:n,type:i,mark:s,cb:a,className:o,styles:l}=this,c;return i==="highlight"?c=e.highlight(r,n,a,o,l):i==="underline"?c=e.underline(r,n,a,o,l):i==="mark"&&(c=e.mark(r,n,a)),this.mark=c,this.emit(me.ANNOTATION.ATTACH,c),c}detach(e){let{cfiRange:r,type:n}=this,i;return e&&(n==="highlight"?i=e.unhighlight(r):n==="underline"?i=e.ununderline(r):n==="mark"&&(i=e.unmark(r))),this.mark=void 0,this.emit(me.ANNOTATION.DETACH,i),i}text(){}}Yr(uv.prototype);var nn={},pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.createElement=cv;function cv(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}pl.default={createElement:cv};var va={};Object.defineProperty(va,"__esModule",{value:!0});va.proxyMouse=dv;va.clone=hv;va.default={proxyMouse:dv};function dv(t,e){function r(a){for(var o=e.length-1;o>=0;o--){var l=e[o],c=a.clientX,d=a.clientY;if(a.touches&&a.touches.length&&(c=a.touches[0].clientX,d=a.touches[0].clientY),!!R1(l,t,c,d)){l.dispatchEvent(hv(a));break}}}if(t.nodeName==="iframe"||t.nodeName==="IFRAME")try{this.target=t.contentDocument}catch{this.target=t}else this.target=t;for(var n=["mouseup","mousedown","click","touchstart"],i=0;i<n.length;i++){var s=n[i];this.target.addEventListener(s,function(a){return r(a)},!1)}}function hv(t){var e=Object.assign({},t,{bubbles:!1});try{return new MouseEvent(t.type,e)}catch{var r=document.createEvent("MouseEvents");return r.initMouseEvent(t.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),r}}function R1(t,e,r,n){var i=e.getBoundingClientRect();function s(d,h,v){var b=d.top-i.top,N=d.left-i.left,k=b+d.height,y=N+d.width;return b<=v&&N<=h&&k>v&&y>h}var a=t.getBoundingClientRect();if(!s(a,r,n))return!1;for(var o=t.getClientRects(),l=0,c=o.length;l<c;l++)if(s(o[l],r,n))return!0;return!1}var Wo,jd;Object.defineProperty(nn,"__esModule",{value:!0});var fv=nn.Underline=jd=nn.Highlight=nn.Mark=Wo=nn.Pane=void 0,z1=function t(e,r,n){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,r,n)}else{if("value"in i)return i.value;var a=i.get;return a===void 0?void 0:a.call(n)}},ml=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),P1=pl,sa=pv(P1),F1=va,O1=pv(F1);function pv(t){return t&&t.__esModule?t:{default:t}}function mv(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function gl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Wo=nn.Pane=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;gl(this,t),this.target=e,this.element=sa.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),O1.default.proxyMouse(this.target,this.marks),this.container=r,this.container.appendChild(this.element),this.render()}return ml(t,[{key:"addMark",value:function(r){var n=sa.default.createElement("g");return this.element.appendChild(n),r.bind(n,this.container),this.marks.push(r),r.render(),r}},{key:"removeMark",value:function(r){var n=this.marks.indexOf(r);if(n!==-1){var i=r.unbind();this.element.removeChild(i),this.marks.splice(n,1)}}},{key:"render",value:function(){H1(this.element,W1(this.target,this.container));var r=!0,n=!1,i=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(r=(a=s.next()).done);r=!0){var o=a.value;o.render()}}catch(l){n=!0,i=l}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}}}]),t}();var M1=nn.Mark=function(){function t(){gl(this,t),this.element=null}return ml(t,[{key:"bind",value:function(r,n){this.element=r,this.container=n}},{key:"unbind",value:function(){var r=this.element;return this.element=null,r}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(r){this.element&&this.element.dispatchEvent(r)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var r=[],n=this.element.firstChild;n;)r.push(n.getBoundingClientRect()),n=n.nextSibling;return r}},{key:"filteredRanges",value:function(){var r=Array.from(this.range.getClientRects());return r.filter(function(n){for(var i=0;i<r.length;i++){if(r[i]===n)return!0;var s=$1(r[i],n);if(s)return!1}return!0})}}]),t}(),U1=jd=nn.Highlight=function(t){gv(e,t);function e(r,n,i,s){gl(this,e);var a=mv(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=r,a.className=n,a.data=i||{},a.attributes=s||{},a}return ml(e,[{key:"bind",value:function(n,i){z1(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,n,i);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=i.length;o<l;o++){var c=i[o],d=sa.default.createElement("rect");d.setAttribute("x",c.left-s.left+a.left),d.setAttribute("y",c.top-s.top+a.top),d.setAttribute("height",c.height),d.setAttribute("width",c.width),n.appendChild(d)}this.element.appendChild(n)}}]),e}(M1);fv=nn.Underline=function(t){gv(e,t);function e(r,n,i,s){return gl(this,e),mv(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n,i,s))}return ml(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=i.length;o<l;o++){var c=i[o],d=sa.default.createElement("rect");d.setAttribute("x",c.left-s.left+a.left),d.setAttribute("y",c.top-s.top+a.top),d.setAttribute("height",c.height),d.setAttribute("width",c.width),d.setAttribute("fill","none");var h=sa.default.createElement("line");h.setAttribute("x1",c.left-s.left+a.left),h.setAttribute("x2",c.left-s.left+a.left+c.width),h.setAttribute("y1",c.top-s.top+a.top+c.height-1),h.setAttribute("y2",c.top-s.top+a.top+c.height-1),h.setAttribute("stroke-width",1),h.setAttribute("stroke","black"),h.setAttribute("stroke-linecap","square"),n.appendChild(d),n.appendChild(h)}this.element.appendChild(n)}}]),e}(U1);function W1(t,e){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:n.top-r.top,left:n.left-r.left,height:t.scrollHeight,width:t.scrollWidth}}function H1(t,e){t.style.setProperty("top",e.top+"px","important"),t.style.setProperty("left",e.left+"px","important"),t.style.setProperty("height",e.height+"px","important"),t.style.setProperty("width",e.width+"px","important")}function $1(t,e){return e.right<=t.right&&e.left>=t.left&&e.top>=t.top&&e.bottom<=t.bottom}class vv{constructor(e,r){this.settings=At({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},r||{}),this.id="epubjs-view-"+hl(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new ze,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var r=document.createElement("div");return r.classList.add("epub-view"),r.style.height="0px",r.style.width="0px",r.style.overflow="hidden",r.style.position="relative",r.style.display="block",e&&e=="horizontal"?r.style.flex="none":r.style.flex="initial",r}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=no(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,r){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(n){return this.load(n)}).bind(this)).then((function(){let n=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=n.indexOf("vertical")===0?"horizontal":"vertical":i=n.indexOf("vertical")===0?"vertical":"horizontal",n.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(me.VIEWS.AXIS,i),this.setWritingMode(n),this.emit(me.VIEWS.WRITING_MODE,n),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}).bind(this),(function(n){return this.emit(me.VIEWS.LOAD_ERROR,n),new Promise((i,s)=>{s(n)})}).bind(this)).then((function(){this.emit(me.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,r){var n=e||this.settings.width,i=r||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",n,i):this.settings.axis==="horizontal"?this.lock("height",n,i):this.lock("width",n,i),this.settings.width=n,this.settings.height=i}lock(e,r,n){var i=zo(this.element),s;this.iframe?s=zo(this.iframe):s={width:0,height:0},e=="width"&&st(r)&&(this.lockedWidth=r-i.width-s.width),e=="height"&&st(n)&&(this.lockedHeight=n-i.height-s.height),e==="both"&&st(r)&&st(n)&&(this.lockedWidth=r-i.width-s.width,this.lockedHeight=n-i.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var r=this.lockedWidth,n=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(r=this.layout.columnWidth,n=this.layout.height):this.settings.axis==="horizontal"?(r=this.contents.textWidth(),r%this.layout.pageWidth>0&&(r=Math.ceil(r/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=r/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(r+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(n=this.contents.textHeight(),this.settings.flow==="paginated"&&n%this.layout.height>0&&(n=Math.ceil(n/this.layout.height)*this.layout.height)),(this._needsReframe||r!=this._width||n!=this._height)&&this.reframe(r,n),this._expanding=!1)}reframe(e,r){var n;st(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),st(r)&&(this.element.style.height=r+"px",this.iframe.style.height=r+"px",this._height=r);let i=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?r-this.prevBounds.height:r;n={width:e,height:r,widthDelta:i,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,n),this.emit(me.VIEWS.RESIZED,n),this.prevBounds=n,this.elementBounds=no(this.element)}load(e){var r=new Re,n=r.promise;if(!this.iframe)return r.reject(new Error("No Iframe Available")),n;if(this.iframe.onload=(function(s){this.onLoad(s,r)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=Fo(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return r.reject(new Error("No Document Available")),n;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return n}onLoad(e,r){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Ad(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var n=this.document.querySelector("link[rel='canonical']");n?n.setAttribute("href",this.section.canonical):(n=this.document.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(n)),this.contents.on(me.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(me.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),r.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var r=new Re;return this.displayed?r.resolve(this):this.render(e).then((function(){this.emit(me.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,r.resolve(this)}).bind(this),function(n){r.reject(n,this)}),r.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(me.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(me.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var r=this.contents.locationOf(e,this.settings.ignoreClass);return{left:r.left,top:r.top}}onDisplayed(e){}onResize(e,r){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=no(this.element)),this.elementBounds}highlight(e,r={},n,i="epubjs-hl",s={}){if(!this.contents)return;const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(me.VIEWS.MARK_CLICKED,e,r)};r.epubcfi=e,this.pane||(this.pane=new Wo(this.iframe,this.element));let c=new jd(o,i,r,a),d=this.pane.addMark(c);return this.highlights[e]={mark:d,element:d.element,listeners:[l,n]},d.element.setAttribute("ref",i),d.element.addEventListener("click",l),d.element.addEventListener("touchstart",l),n&&(d.element.addEventListener("click",n),d.element.addEventListener("touchstart",n)),d}underline(e,r={},n,i="epubjs-ul",s={}){if(!this.contents)return;const a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(me.VIEWS.MARK_CLICKED,e,r)};r.epubcfi=e,this.pane||(this.pane=new Wo(this.iframe,this.element));let c=new fv(o,i,r,a),d=this.pane.addMark(c);return this.underlines[e]={mark:d,element:d.element,listeners:[l,n]},d.element.setAttribute("ref",i),d.element.addEventListener("click",l),d.element.addEventListener("touchstart",l),n&&(d.element.addEventListener("click",n),d.element.addEventListener("touchstart",n)),d}mark(e,r={},n){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let s=i.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=c=>{this.emit(me.VIEWS.MARK_CLICKED,e,r)};i.collapsed&&s.nodeType===1?(i=new Range,i.selectNodeContents(s)):i.collapsed&&(i=new Range,i.selectNodeContents(a));let l=this.document.createElement("a");return l.setAttribute("ref","epubjs-mk"),l.style.position="absolute",l.dataset.epubcfi=e,r&&Object.keys(r).forEach(c=>{l.dataset[c]=r[c]}),n&&(l.addEventListener("click",n),l.addEventListener("touchstart",n)),l.addEventListener("click",o),l.addEventListener("touchstart",o),this.placeMark(l,i),this.element.appendChild(l),this.marks[e]={element:l,range:i,listeners:[o,n]},a}placeMark(e,r){let n,i,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=r.getBoundingClientRect();n=o.top,i=o.right}else{let o=r.getClientRects(),l;for(var a=0;a!=o.length;a++)l=o[a],(!s||l.left<s)&&(s=l.left,i=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,n=l.top)}e.style.top=`${n}px`,e.style.left=`${i}px`}unhighlight(e){let r;e in this.highlights&&(r=this.highlights[e],this.pane.removeMark(r.mark),r.listeners.forEach(n=>{n&&(r.element.removeEventListener("click",n),r.element.removeEventListener("touchstart",n))}),delete this.highlights[e])}ununderline(e){let r;e in this.underlines&&(r=this.underlines[e],this.pane.removeMark(r.mark),r.listeners.forEach(n=>{n&&(r.element.removeEventListener("click",n),r.element.removeEventListener("touchstart",n))}),delete this.underlines[e])}unmark(e){let r;e in this.marks&&(r=this.marks[e],this.element.removeChild(r.element),r.listeners.forEach(n=>{n&&(r.element.removeEventListener("click",n),r.element.removeEventListener("touchstart",n))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&Jg(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}Yr(vv.prototype);function q1(){var t="reverse",e=V1();return document.body.appendChild(e),e.scrollLeft>0?t="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(t="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(t="negative")),document.body.removeChild(e),t}function V1(){var t=document.createElement("div");t.dir="rtl",t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="0px",t.style.left="0px",t.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var r=document.createElement("span");r.style.width="1px",r.style.display="inline-block";var n=document.createElement("span");return n.style.width="1px",n.style.display="inline-block",e.appendChild(r),e.appendChild(n),t.appendChild(e),t}function G1(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Bd=G1,Z1=typeof mr=="object"&&mr&&mr.Object===Object&&mr,Y1=Z1,K1=Y1,X1=typeof self=="object"&&self&&self.Object===Object&&self,Q1=K1||X1||Function("return this")(),yv=Q1,J1=yv,eb=function(){return J1.Date.now()},tb=eb,rb=/\s/;function nb(t){for(var e=t.length;e--&&rb.test(t.charAt(e)););return e}var ib=nb,sb=ib,ab=/^\s+/;function ob(t){return t&&t.slice(0,sb(t)+1).replace(ab,"")}var lb=ob,ub=yv,cb=ub.Symbol,xv=cb,zf=xv,bv=Object.prototype,db=bv.hasOwnProperty,hb=bv.toString,xs=zf?zf.toStringTag:void 0;function fb(t){var e=db.call(t,xs),r=t[xs];try{t[xs]=void 0;var n=!0}catch{}var i=hb.call(t);return n&&(e?t[xs]=r:delete t[xs]),i}var pb=fb,mb=Object.prototype,gb=mb.toString;function vb(t){return gb.call(t)}var yb=vb,Pf=xv,xb=pb,bb=yb,wb="[object Null]",kb="[object Undefined]",Ff=Pf?Pf.toStringTag:void 0;function Cb(t){return t==null?t===void 0?kb:wb:Ff&&Ff in Object(t)?xb(t):bb(t)}var Eb=Cb;function Sb(t){return t!=null&&typeof t=="object"}var _b=Sb,Nb=Eb,Db=_b,Tb="[object Symbol]";function Ab(t){return typeof t=="symbol"||Db(t)&&Nb(t)==Tb}var jb=Ab,Bb=lb,Of=Bd,Lb=jb,Mf=NaN,Ib=/^[-+]0x[0-9a-f]+$/i,Rb=/^0b[01]+$/i,zb=/^0o[0-7]+$/i,Pb=parseInt;function Fb(t){if(typeof t=="number")return t;if(Lb(t))return Mf;if(Of(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Of(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Bb(t);var r=Rb.test(t);return r||zb.test(t)?Pb(t.slice(2),r?2:8):Ib.test(t)?Mf:+t}var Ob=Fb,Mb=Bd,au=tb,Uf=Ob,Ub="Expected a function",Wb=Math.max,Hb=Math.min;function $b(t,e,r){var n,i,s,a,o,l,c=0,d=!1,h=!1,v=!0;if(typeof t!="function")throw new TypeError(Ub);e=Uf(e)||0,Mb(r)&&(d=!!r.leading,h="maxWait"in r,s=h?Wb(Uf(r.maxWait)||0,e):s,v="trailing"in r?!!r.trailing:v);function b(C){var E=n,S=i;return n=i=void 0,c=C,a=t.apply(S,E),a}function N(C){return c=C,o=setTimeout(p,e),d?b(C):a}function k(C){var E=C-l,S=C-c,I=e-E;return h?Hb(I,s-S):I}function y(C){var E=C-l,S=C-c;return l===void 0||E>=e||E<0||h&&S>=s}function p(){var C=au();if(y(C))return m(C);o=setTimeout(p,k(C))}function m(C){return o=void 0,v&&n?b(C):(n=i=void 0,a)}function g(){o!==void 0&&clearTimeout(o),c=0,n=l=i=o=void 0}function w(){return o===void 0?a:m(au())}function x(){var C=au(),E=y(C);if(n=arguments,i=this,l=C,E){if(o===void 0)return N(l);if(h)return clearTimeout(o),o=setTimeout(p,e),b(l)}return o===void 0&&(o=setTimeout(p,e)),a}return x.cancel=g,x.flush=w,x}var wv=$b;const qb=ii(wv);var Vb=wv,Gb=Bd,Zb="Expected a function";function Yb(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Zb);return Gb(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Vb(t,e,{leading:n,maxWait:e,trailing:i})}var Kb=Yb;const Xb=ii(Kb);class Qb{constructor(e){this.settings=e||{},this.id="epubjs-container-"+hl(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let r=e.height,n=e.width,i=e.overflow||!1,s=e.axis||"vertical",a=e.direction;At(this.settings,e),e.height&&st(e.height)&&(r=e.height+"px"),e.width&&st(e.width)&&(n=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),n&&(o.style.width=n),r&&(o.style.height=r),i&&(i==="scroll"&&s==="vertical"?(o.style["overflow-y"]=i,o.style["overflow-x"]="hidden"):i==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=i):o.style.overflow=i),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var r=document.createElement("div");return r.style.visibility="hidden",r.style.overflow="hidden",r.style.width="0",r.style.height="0",r.appendChild(e),r}getElement(e){var r;if(Zg(e)?r=e:typeof e=="string"&&(r=document.getElementById(e)),!r)throw new Error("Not an Element");return r}attachTo(e){var r=this.getElement(e),n;if(r)return this.settings.hidden?n=this.wrapper:n=this.container,r.appendChild(n),this.element=r,r}getContainer(){return this.container}onResize(e){(!st(this.settings.width)||!st(this.settings.height))&&(this.resizeFunc=Xb(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,r){var n;let i=e||this.settings.width,s=r||this.settings.height;e===null?(n=this.element.getBoundingClientRect(),n.width&&(e=Math.floor(n.width),this.container.style.width=e+"px")):st(e)?this.container.style.width=e+"px":this.container.style.width=e,r===null?(n=n||this.element.getBoundingClientRect(),n.height&&(r=n.height,this.container.style.height=r+"px")):st(r)?this.container.style.height=r+"px":this.container.style.height=r,st(e)||(e=this.container.clientWidth),st(r)||(r=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=Po(),o=window.getComputedStyle(document.body),l={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return i||(e=a.width-l.left-l.right),(this.settings.fullsize&&!s||!s)&&(r=a.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:r-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?Po():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,r){var n="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),r.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(i+=a+":"+s[a]+";")}),this.sheet.insertRule(n+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class Jb{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,r){return this._views.splice(r,0,e),this.container&&(r<this.container.children.length?this.container.insertBefore(e.element,this.container.children[r]):this.container.appendChild(e.element)),this.length++,e}remove(e){var r=this._views.indexOf(e);r>-1&&this._views.splice(r,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,r=this.length;if(this.length){for(var n=0;n<r;n++)e=this._views[n],this.destroy(e);this._views=[],this.length=0}}find(e){for(var r,n=this.length,i=0;i<n;i++)if(r=this._views[i],r.displayed&&r.section.index==e.index)return r}displayed(){for(var e=[],r,n=this.length,i=0;i<n;i++)r=this._views[i],r.displayed&&e.push(r);return e}show(){for(var e,r=this.length,n=0;n<r;n++)e=this._views[n],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,r=this.length,n=0;n<r;n++)e=this._views[n],e.displayed&&e.hide();this.hidden=!0}}class Ho{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new Td(this),this.settings=At(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),At(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,r){let n=e.tagName;typeof this.settings.fullsize>"u"&&n&&(n.toLowerCase()=="body"||n.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=r,this.settings.rtlScrollType=q1(),this.stage=new Qb({width:r.width,height:r.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new Jb(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(r){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:r}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(me.MANAGERS.ORIENTATION_CHANGE,r)}).bind(this),500)}onResized(e){this.resize()}resize(e,r,n){let i=this.stage.size(e,r);if(this.winBounds=Po(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(me.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},n))}createView(e,r){return new this.View(e,At(this.viewSettings,{forceRight:r}))}handleNextPrePaginated(e,r,n){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||r.index===0)return;if(i=r.next(),i&&!i.properties.includes("page-spread-left"))return n.call(this,i)}}display(e,r){var n=new Re,i=n.promise;(r===e.href||st(r))&&(r=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let l=s.width();this.scrollTo(o.left+l,o.top,!0)}if(r){let l=s.locationOf(r),c=s.width();this.moveTo(l,c)}return n.resolve(),i}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then((function(o){if(r){let l=o.locationOf(r),c=o.width();this.moveTo(l,c)}}).bind(this),o=>{n.reject(o)}).then((function(){return this.handleNextPrePaginated(a,e,this.add)}).bind(this)).then((function(){this.views.show(),n.resolve()}).bind(this)),i}afterDisplayed(e){this.emit(me.MANAGERS.ADDED,e)}afterResized(e){this.emit(me.MANAGERS.RESIZE,e.section)}moveTo(e,r){var n=0,i=0;this.isPaginated?(n=Math.floor(e.left/this.layout.delta)*this.layout.delta,n+this.layout.delta>this.container.scrollWidth&&(n=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(n=n+this.layout.delta,n=n-r),this.scrollTo(n,i,!0)}add(e,r){var n=this.createView(e,r);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(me.VIEWS.AXIS,i=>{this.updateAxis(i)}),n.on(me.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),n.display(this.request)}append(e,r){var n=this.createView(e,r);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(me.VIEWS.AXIS,i=>{this.updateAxis(i)}),n.on(me.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),n.display(this.request)}prepend(e,r){var n=this.createView(e,r);return n.on(me.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(me.VIEWS.AXIS,i=>{this.updateAxis(i)}),n.on(me.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),n.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,r;let n=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,r=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,r<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(r=this.container.scrollLeft,r>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(r=this.container.scrollLeft+this.layout.delta*-1,r>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then((function(){return this.handleNextPrePaginated(i,e,this.append)}).bind(this),s=>s).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,r;let n=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,r=this.container.scrollLeft,r>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(r=this.container.scrollLeft+this.container.offsetWidth,r<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(r=this.container.scrollLeft,r<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then((function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}).bind(this),s=>s).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),r=this.container.getBoundingClientRect(),n=r.height<window.innerHeight?r.height:window.innerHeight,i=r.width<window.innerWidth?r.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let a=0,o=0;return this.settings.fullsize&&(a=s?window.scrollY:window.scrollX),e.map(c=>{let{index:d,href:h}=c.section,v=c.position(),b=c.width(),N=c.height(),k,y,p,m;s?(k=a+r.top-v.top+o,y=k+n-o,m=this.layout.count(N,n).pages,p=n):(k=a+r.left-v.left+o,y=k+i-o,m=this.layout.count(b,i).pages,p=i);let g=Math.ceil(k/p),w=[],x=Math.ceil(y/p);if(this.settings.direction==="rtl"&&!s){let S=g;g=m-x,x=m-S}w=[];for(var C=g;C<=x;C++){let S=C+1;w.push(S)}let E=this.mapping.page(c.contents,c.section.cfiBase,k,y);return{index:d,href:h,pages:w,totalPages:m,mapping:E}})}paginatedLocation(){let e=this.visible(),r=this.container.getBoundingClientRect(),n=0,i=0;return this.settings.fullsize&&(n=window.scrollX),e.map(a=>{let{index:o,href:l}=a.section,c,d=a.position(),h=a.width(),v,b,N;this.settings.direction==="rtl"?(c=r.right-n,N=Math.min(Math.abs(c-d.left),this.layout.width)-i,b=d.width-(d.right-c)-i,v=b-N):(c=r.left+n,N=Math.min(d.right-c,this.layout.width)-i,v=c-d.left+i,b=v+N),i+=N;let k=this.mapping.page(a.contents,a.section.cfiBase,v,b),y=this.layout.count(h).pages,p=Math.floor(v/this.layout.pageWidth),m=[],g=Math.floor(b/this.layout.pageWidth);if(p<0&&(p=0,g=g+1),this.settings.direction==="rtl"){let x=p;p=y-g,g=y-x}for(var w=p+1;w<=g;w++){let x=w;m.push(x)}return{index:o,href:l,pages:m,totalPages:y,mapping:k}})}isVisible(e,r,n,i){var s=e.position(),a=i||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-r&&s.left<a.right+n?!0:this.settings.axis==="vertical"&&s.bottom>a.top-r&&s.top<a.bottom+n}visible(){for(var e=this.bounds(),r=this.views.displayed(),n=r.length,i=[],s,a,o=0;o<n;o++)a=r[o],s=this.isVisible(a,0,0,e),s===!0&&i.push(a);return i}scrollBy(e,r,n){let i=this.settings.direction==="rtl"?-1:1;n&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,r*i):(e&&(this.container.scrollLeft+=e*i),r&&(this.container.scrollTop+=r)),this.scrolled=!0}scrollTo(e,r,n){n&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,r):(this.container.scrollLeft=e,this.container.scrollTop=r),this.scrolled=!0}onScroll(){let e,r;this.settings.fullsize?(e=window.scrollY,r=window.scrollX):(e=this.container.scrollTop,r=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=r,this.ignore?this.ignore=!1:(this.emit(me.MANAGERS.SCROLL,{top:e,left:r}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(me.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Uo(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(r){r&&r.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,r){!r&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Uo(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,r="auto"){let n=e==="paginated"||e==="auto";this.isPaginated=n,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=n?"hidden":r,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(r){const n=r&&r.contents;n&&e.push(n)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}Yr(Ho.prototype);const ew=Math.PI/2,tw={easeOutSine:function(t){return Math.sin(t*ew)},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInCubic:function(t){return Math.pow(t,3)}};class gc{constructor(e,r){this.settings=At({duration:80,minVelocity:.2,minDistance:10,easing:tw.easeInCubic},r||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(me.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(me.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let r=e.contents;["touchstart","touchmove","touchend"].forEach(n=>{r.on(n,i=>this.triggerViewEvent(i,r))})}triggerViewEvent(e,r){this.emit(e.type,e,r)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:r,screenY:n}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=r,this.startTouchY=n,this.startTime=this.now()),this.endTouchX=r,this.endTouchY=n,this.endTime=this.now()}onTouchMove(e){let{screenX:r,screenY:n}=e.touches[0],i=Math.abs(n-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=r-this.endTouchX),this.endTouchX=r,this.endTouchY=n,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let r=this.wasSwiped();r!==0?this.snap(r):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,r=this.endTouchX-this.startTouchX,n=Math.abs(r),i=this.endTime-this.startTime,s=r/i,a=this.settings.minVelocity;if(n<=this.settings.minDistance||n>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor;return e%r!==0}snap(e=0){let r=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor,i=Math.round(r/n)*n;return e&&(i+=e*n),this.smoothScrollTo(i)}smoothScrollTo(e){const r=new Re,n=this.scrollLeft,i=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){const l=this.now(),c=Math.min(1,(l-i)/s);if(a(c),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,r.resolve();return}c<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(n+(e-n)*c,0)):(this.scrollTo(e,0),this.snapping=!1,r.resolve())}return o.call(this),r.promise}scrollTo(e=0,r=0){this.fullsize?window.scroll(e,r):(this.scroller.scrollLeft=e,this.scroller.scrollTop=r)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}Yr(gc.prototype);class rw extends Ho{constructor(e){super(e),this.name="continuous",this.settings=At(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),At(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,r){return Ho.prototype.display.call(this,e,r).then((function(){return this.fill()}).bind(this))}fill(e){var r=e||new Re;return this.q.enqueue(()=>this.check()).then(n=>{n?this.fill(r):r.resolve()}),r.promise}moveTo(e){var r=0,n=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.settings.offsetDelta):(n=e.top,e.top+this.settings.offsetDelta),(r>0||n>0)&&this.scrollBy(r,n,!0)}afterResized(e){this.emit(me.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var r=this.createView(e);return this.views.append(r),r.on(me.VIEWS.RESIZED,n=>{r.expanded=!0}),r.on(me.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(me.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.display(this.request)}append(e){var r=this.createView(e);return r.on(me.VIEWS.RESIZED,n=>{r.expanded=!0}),r.on(me.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(me.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r}prepend(e){var r=this.createView(e);return r.on(me.VIEWS.RESIZED,n=>{this.counter(n),r.expanded=!0}),r.on(me.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(me.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var r=this.bounds(),n=this.views.all(),i=n.length,s=typeof e<"u"?e:this.settings.offset||0,a,o,l=new Re,c=[],d=0;d<i;d++)if(o=n[d],a=this.isVisible(o,s,s,r),a===!0)if(o.displayed)o.show();else{let h=o.display(this.request).then(function(v){v.show()},v=>{o.hide()});c.push(h)}else this.q.enqueue(o.destroy.bind(o)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return c.length?Promise.all(c).catch(h=>{l.reject(h)}):(l.resolve(),l.promise)}check(e,r){var n=new Re,i=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),r&&!s&&(a=r);var o=this._bounds;let l=s?this.scrollLeft:this.scrollTop,c=s?Math.floor(o.width):o.height,d=s?this.container.scrollWidth:this.container.scrollHeight,h=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",v=this.settings.rtlScrollType,b=this.settings.direction==="rtl";this.settings.fullsize?(s&&b&&v==="negative"||!s&&b&&v==="default")&&(l=l*-1):(b&&v==="default"&&h==="horizontal"&&(l=d-c-l),b&&v==="negative"&&h==="horizontal"&&(l=l*-1));let N=()=>{let g=this.views.first(),w=g&&g.section.prev();w&&i.push(this.prepend(w))},k=()=>{let g=this.views.last(),w=g&&g.section.next();w&&i.push(this.append(w))},y=l+c+a,p=l-a;y>=d&&k(),p<0&&N();let m=i.map(g=>g.display(this.request));return i.length?Promise.all(m).then(()=>this.check()).then(()=>this.update(a),g=>g):(this.q.enqueue((function(){this.update()}).bind(this)),n.resolve(!1),n.promise)}trim(){for(var e=new Re,r=this.views.displayed(),n=r[0],i=r[r.length-1],s=this.views.indexOf(n),a=this.views.indexOf(i),o=this.views.slice(0,s),l=this.views.slice(a+1),c=0;c<o.length-1;c++)this.erase(o[c],o);for(var d=1;d<l.length;d++)this.erase(l[d]);return e.resolve(),e.promise}erase(e,r){var n,i;this.settings.fullsize?(n=window.scrollY,i=window.scrollX):(n=this.container.scrollTop,i=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),r&&(this.settings.axis==="vertical"?this.scrollTo(0,n-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(s.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(r){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new gc(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=_d;let r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*r,this.scrollLeft=window.scrollX*r):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=qb(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,r,n=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*n,r=window.scrollX*n):(e=this.container.scrollTop,r=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=r,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(r-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=r,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(me.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(me.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new gc(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class Ld{constructor(e,r){this.settings=At(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),At(this.settings,r),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Br(this),this.hooks.serialize=new Br(this),this.hooks.content=new Br(this),this.hooks.unloaded=new Br(this),this.hooks.layout=new Br(this),this.hooks.render=new Br(this),this.hooks.show=new Br(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new j1(this),this.annotations=new I1(this),this.epubcfi=new ze,this.q=new Td(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new Re,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var r;return typeof e=="string"&&e==="default"?r=Ho:typeof e=="string"&&e==="continuous"?r=rw:r=e,r}requireView(e){var r;return typeof e=="string"&&e==="iframe"?r=vv:r=e,r}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(me.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(me.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(me.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(me.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(me.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(me.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(me.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var r=new Re,n=r.promise,i;return this.displaying=r,this.book.locations.length()&&Yg(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{r.resolve(i),this.displaying=void 0,this.emit(me.RENDITION.DISPLAYED,i),this.reportLocation()},s=>{this.emit(me.RENDITION.DISPLAY_ERROR,s)}),n):(r.reject(new Error("No Section Found")),n)}}afterDisplayed(e){e.on(me.VIEWS.MARK_CLICKED,(r,n)=>this.triggerMarkEvent(r,n,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(me.RENDITION.RENDERED,e.section,e)}):this.emit(me.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(me.RENDITION.REMOVED,e.section,e)})}onResized(e,r){this.emit(me.RENDITION.RESIZED,{width:e.width,height:e.height},r),this.location&&this.location.start&&this.display(r||this.location.start.cfi)}onOrientationChange(e){this.emit(me.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,r,n){e&&(this.settings.width=e),r&&(this.settings.height=r),this.manager.resize(e,r,n)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var r,n=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",l=this.settings.minSpreadWidth||e.minSpreadWidth||800,c=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),r={layout:n,spread:i,orientation:s,flow:a,viewport:o,minSpreadWidth:l,direction:c},r}flow(e){var r=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(r="scrolled"),(e==="auto"||e==="paginated")&&(r="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(r),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(r),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new ov(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(me.LAYOUT.UPDATED,(r,n)=>{this.emit(me.RENDITION.LAYOUT,r,n)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,r){this.settings.spread=e,r&&(this.settings.minSpreadWidth=r),this._layout&&this._layout.spread(e,r),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var n=this.manager.currentLocation();if(n&&n.then&&typeof n.then=="function")n.then((function(i){let s=this.located(i);!s||!s.start||!s.end||(this.location=s,this.emit(me.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(me.RENDITION.RELOCATED,this.location))}).bind(this));else if(n){let i=this.located(n);if(!i||!i.start||!i.end)return;this.location=i,this.emit(me.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(me.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(r){return this.located(r)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let r=e[0],n=e[e.length-1],i={start:{index:r.index,href:r.href,cfi:r.mapping.start,displayed:{page:r.pages[0]||1,total:r.totalPages}},end:{index:n.index,href:n.href,cfi:n.mapping.end,displayed:{page:n.pages[n.pages.length-1]||1,total:n.totalPages}}},s=this.book.locations.locationFromCfi(r.mapping.start),a=this.book.locations.locationFromCfi(n.mapping.end);s!=null&&(i.start.location=s,i.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(i.end.location=a,i.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(r.mapping.start),l=this.book.pageList.pageFromCfi(n.mapping.end);return o!=-1&&(i.start.page=o),l!=-1&&(i.end.page=l),n.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),r.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){so.forEach(r=>{e.on(r,n=>this.triggerViewEvent(n,e))}),e.on(me.CONTENTS.SELECTED,r=>this.triggerSelectedEvent(r,e))}triggerViewEvent(e,r){this.emit(e.type,e,r)}triggerSelectedEvent(e,r){this.emit(me.RENDITION.SELECTED,e,r)}triggerMarkEvent(e,r,n){this.emit(me.RENDITION.MARK_CLICKED,e,r,n)}getRange(e,r){var n=new ze(e),i=this.manager.visible().filter(function(s){if(n.spinePos===s.index)return!0});if(i.length)return i[0].contents.range(n,r)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let r=e.window.getComputedStyle(e.content,null),n=(e.content.offsetHeight-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)))*.95,i=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":n+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":n+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(me.CONTENTS.LINK_CLICKED,r=>{let n=this.book.path.relative(r);this.display(n)})}injectStylesheet(e,r){let n=e.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(n)}injectScript(e,r){let n=e.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",this.settings.script),n.textContent=" ",e.getElementsByTagName("head")[0].appendChild(n)}injectIdentifier(e,r){let n=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),n&&i.setAttribute("content",n),e.getElementsByTagName("head")[0].appendChild(i)}}Yr(Ld.prototype);function Nn(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kv={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(c,d){if(!i[c]){if(!n[c]){var h=typeof Nn=="function"&&Nn;if(!d&&h)return h(c,!0);if(o)return o(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var b=i[c]={exports:{}};n[c][0].call(b.exports,function(N){var k=n[c][1][N];return a(k||N)},b,b.exports,r,n,i,s)}return i[c].exports}for(var o=typeof Nn=="function"&&Nn,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(r,n,i){var s=r("./utils"),a=r("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c=[],d,h,v,b,N,k,y,p=0,m=l.length,g=m,w=s.getTypeOf(l)!=="string";p<l.length;)g=m-p,w?(d=l[p++],h=p<m?l[p++]:0,v=p<m?l[p++]:0):(d=l.charCodeAt(p++),h=p<m?l.charCodeAt(p++):0,v=p<m?l.charCodeAt(p++):0),b=d>>2,N=(d&3)<<4|h>>4,k=g>1?(h&15)<<2|v>>6:64,y=g>2?v&63:64,c.push(o.charAt(b)+o.charAt(N)+o.charAt(k)+o.charAt(y));return c.join("")},i.decode=function(l){var c,d,h,v,b,N,k,y=0,p=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9+/=]/g,"");var g=l.length*3/4;if(l.charAt(l.length-1)===o.charAt(64)&&g--,l.charAt(l.length-2)===o.charAt(64)&&g--,g%1!==0)throw new Error("Invalid base64 input, bad content length.");var w;for(a.uint8array?w=new Uint8Array(g|0):w=new Array(g|0);y<l.length;)v=o.indexOf(l.charAt(y++)),b=o.indexOf(l.charAt(y++)),N=o.indexOf(l.charAt(y++)),k=o.indexOf(l.charAt(y++)),c=v<<2|b>>4,d=(b&15)<<4|N>>2,h=(N&3)<<6|k,w[p++]=c,N!==64&&(w[p++]=d),k!==64&&(w[p++]=h);return w}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),a=r("./stream/DataWorker"),o=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function c(d,h,v,b,N){this.compressedSize=d,this.uncompressedSize=h,this.crc32=v,this.compression=b,this.compressedContent=N}c.prototype={getContentWorker:function(){var d=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,v){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils");function a(){for(var d,h=[],v=0;v<256;v++){d=v;for(var b=0;b<8;b++)d=d&1?3988292384^d>>>1:d>>>1;h[v]=d}return h}var o=a();function l(d,h,v,b){var N=o,k=b+v;d=d^-1;for(var y=b;y<k;y++)d=d>>>8^N[(d^h[y])&255];return d^-1}function c(d,h,v,b){var N=o,k=b+v;d=d^-1;for(var y=b;y<k;y++)d=d>>>8^N[(d^h.charCodeAt(y))&255];return d^-1}n.exports=function(h,v){if(typeof h>"u"||!h.length)return 0;var b=s.getTypeOf(h)!=="string";return b?l(v|0,h,h.length,0):c(v|0,h,h.length,0)}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;typeof Promise<"u"?s=Promise:s=r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=r("pako"),o=r("./utils"),l=r("./stream/GenericWorker"),c=s?"uint8array":"array";i.magic="\b\0";function d(h,v){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=v,this.meta={}}o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(v){h.push({data:v,meta:h.meta})}},i.compressWorker=function(h){return new d("Deflate",h)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){var s=r("../utils"),a=r("../stream/GenericWorker"),o=r("../utf8"),l=r("../crc32"),c=r("../signature"),d=function(p,m){var g="",w;for(w=0;w<m;w++)g+=String.fromCharCode(p&255),p=p>>>8;return g},h=function(p,m){var g=p;return p||(g=m?16893:33204),(g&65535)<<16},v=function(p){return(p||0)&63},b=function(p,m,g,w,x,C){var E=p.file,S=p.compression,I=C!==o.utf8encode,R=s.transformTo("string",C(E.name)),B=s.transformTo("string",o.utf8encode(E.name)),U=E.comment,Q=s.transformTo("string",C(U)),fe=s.transformTo("string",o.utf8encode(U)),oe=B.length!==E.name.length,ue=fe.length!==U.length,le,V,he="",ve="",re="",pe=E.dir,Ae=E.date,Se={crc32:0,compressedSize:0,uncompressedSize:0};(!m||g)&&(Se.crc32=p.crc32,Se.compressedSize=p.compressedSize,Se.uncompressedSize=p.uncompressedSize);var Ve=0;m&&(Ve|=8),!I&&(oe||ue)&&(Ve|=2048);var H=0,X=0;pe&&(H|=16),x==="UNIX"?(X=798,H|=h(E.unixPermissions,pe)):(X=20,H|=v(E.dosPermissions)),le=Ae.getUTCHours(),le=le<<6,le=le|Ae.getUTCMinutes(),le=le<<5,le=le|Ae.getUTCSeconds()/2,V=Ae.getUTCFullYear()-1980,V=V<<4,V=V|Ae.getUTCMonth()+1,V=V<<5,V=V|Ae.getUTCDate(),oe&&(ve=d(1,1)+d(l(R),4)+B,he+="up"+d(ve.length,2)+ve),ue&&(re=d(1,1)+d(l(Q),4)+fe,he+="uc"+d(re.length,2)+re);var ce="";ce+=`
\0`,ce+=d(Ve,2),ce+=S.magic,ce+=d(le,2),ce+=d(V,2),ce+=d(Se.crc32,4),ce+=d(Se.compressedSize,4),ce+=d(Se.uncompressedSize,4),ce+=d(R.length,2),ce+=d(he.length,2);var Ce=c.LOCAL_FILE_HEADER+ce+R+he,Ne=c.CENTRAL_FILE_HEADER+d(X,2)+ce+d(Q.length,2)+"\0\0\0\0"+d(H,4)+d(w,4)+R+he+Q;return{fileRecord:Ce,dirRecord:Ne}},N=function(p,m,g,w,x){var C="",E=s.transformTo("string",x(w));return C=c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(p,2)+d(p,2)+d(m,4)+d(g,4)+d(E.length,2)+E,C},k=function(p){var m="";return m=c.DATA_DESCRIPTOR+d(p.crc32,4)+d(p.compressedSize,4)+d(p.uncompressedSize,4),m};function y(p,m,g,w){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=g,this.encodeFileName=w,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(y,a),y.prototype.push=function(p){var m=p.meta.percent||0,g=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,a.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(m+100*(g-w-1))/g:100}}))},y.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var m=this.streamFiles&&!p.file.dir;if(m){var g=b(p,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(p){this.accumulate=!1;var m=this.streamFiles&&!p.file.dir,g=b(p,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),m)this.push({data:k(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var p=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var g=this.bytesWritten-p,w=N(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(p){this._sources.push(p);var m=this;return p.on("data",function(g){m.processChunk(g)}),p.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),p.on("error",function(g){m.error(g)}),this},y.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},y.prototype.error=function(p){var m=this._sources;if(!a.prototype.error.call(this,p))return!1;for(var g=0;g<m.length;g++)try{m[g].error(p)}catch{}return!0},y.prototype.lock=function(){a.prototype.lock.call(this);for(var p=this._sources,m=0;m<p.length;m++)p[m].lock()},n.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),a=r("./ZipFileWorker"),o=function(l,c){var d=l||c,h=s[d];if(!h)throw new Error(d+" is not a valid compression method !");return h};i.generateWorker=function(l,c,d){var h=new a(c.streamFiles,d,c.platform,c.encodeFileName),v=0;try{l.forEach(function(b,N){v++;var k=o(N.options.compression,c.compression),y=N.options.compressionOptions||c.compressionOptions||{},p=N.dir,m=N.date;N._compressWorker(k,y).withStreamInfo("file",{name:b,dir:p,date:m,comment:N.comment||"",unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions}).pipe(h)}),h.entriesCount=v}catch(b){h.error(b)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}s.prototype=r("./object"),s.prototype.loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),a=r("./external"),o=r("./utf8"),l=r("./zipEntries"),c=r("./stream/Crc32Probe"),d=r("./nodejsUtils");function h(v){return new a.Promise(function(b,N){var k=v.decompressed.getContentWorker().pipe(new c);k.on("error",function(y){N(y)}).on("end",function(){k.streamInfo.crc32!==v.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}n.exports=function(v,b){var N=this;return b=s.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(v)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,b.optimizedBinaryString,b.base64).then(function(k){var y=new l(b);return y.load(k),y}).then(function(y){var p=[a.Promise.resolve(y)],m=y.files;if(b.checkCRC32)for(var g=0;g<m.length;g++)p.push(h(m[g]));return a.Promise.all(p)}).then(function(y){for(var p=y.shift(),m=p.files,g=0;g<m.length;g++){var w=m[g],x=w.fileNameStr,C=s.resolve(w.fileNameStr);N.file(C,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:b.createFolders}),w.dir||(N.file(C).unsafeOriginalName=x)}return p.zipComment.length&&(N.comment=p.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),a=r("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,a),o.prototype._bindStream=function(l){var c=this;this._stream=l,l.pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return a.prototype.pause.call(this)?(this._stream.pause(),!0):!1},o.prototype.resume=function(){return a.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable,a=r("../utils");a.inherits(o,s);function o(l,c,d){s.call(this,c),this._helper=l;var h=this;l.on("data",function(v,b){h.push(v)||h._helper.pause(),d&&d(b)}).on("error",function(v){h.emit("error",v)}).on("end",function(){h.push(null)})}o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){var s=r("./utf8"),a=r("./utils"),o=r("./stream/GenericWorker"),l=r("./stream/StreamHelper"),c=r("./defaults"),d=r("./compressedObject"),h=r("./zipObject"),v=r("./generate"),b=r("./nodejsUtils"),N=r("./nodejs/NodejsStreamInputAdapter"),k=function(x,C,E){var S=a.getTypeOf(C),I,R=a.extend(E||{},c);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&R.unixPermissions&16384&&(R.dir=!0),R.dosPermissions&&R.dosPermissions&16&&(R.dir=!0),R.dir&&(x=p(x)),R.createFolders&&(I=y(x))&&m.call(this,I,!0);var B=S==="string"&&R.binary===!1&&R.base64===!1;(!E||typeof E.binary>"u")&&(R.binary=!B);var U=C instanceof d&&C.uncompressedSize===0;(U||R.dir||!C||C.length===0)&&(R.base64=!1,R.binary=!0,C="",R.compression="STORE",S="string");var Q=null;C instanceof d||C instanceof o?Q=C:b.isNode&&b.isStream(C)?Q=new N(x,C):Q=a.prepareContent(x,C,R.binary,R.optimizedBinaryString,R.base64);var fe=new h(x,Q,R);this.files[x]=fe},y=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var C=x.lastIndexOf("/");return C>0?x.substring(0,C):""},p=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},m=function(x,C){return C=typeof C<"u"?C:c.createFolders,x=p(x),this.files[x]||k.call(this,x,null,{dir:!0,createFolders:C}),this.files[x]};function g(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var C,E,S;for(C in this.files)S=this.files[C],E=C.slice(this.root.length,C.length),E&&C.slice(0,this.root.length)===this.root&&x(E,S)},filter:function(x){var C=[];return this.forEach(function(E,S){x(E,S)&&C.push(S)}),C},file:function(x,C,E){if(arguments.length===1)if(g(x)){var S=x;return this.filter(function(R,B){return!B.dir&&S.test(R)})}else{var I=this.files[this.root+x];return I&&!I.dir?I:null}else x=this.root+x,k.call(this,x,C,E);return this},folder:function(x){if(!x)return this;if(g(x))return this.filter(function(I,R){return R.dir&&x.test(I)});var C=this.root+x,E=m.call(this,C),S=this.clone();return S.root=E.name,S},remove:function(x){x=this.root+x;var C=this.files[x];if(C||(x.slice(-1)!=="/"&&(x+="/"),C=this.files[x]),C&&!C.dir)delete this.files[x];else for(var E=this.filter(function(I,R){return R.name.slice(0,x.length)===x}),S=0;S<E.length;S++)delete this.files[E[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var C,E={};try{if(E=a.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),E.type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");a.checkSupport(E.type),(E.platform==="darwin"||E.platform==="freebsd"||E.platform==="linux"||E.platform==="sunos")&&(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var S=E.comment||this.comment||"";C=v.generateWorker(this,E,S)}catch(I){C=new o("error"),C.error(I)}return new l(C,E.type||"string",E.mimeType)},generateAsync:function(x,C){return this.generateInternalStream(x).accumulate(C)},generateNodeStream:function(x,C){return x=x||{},x.type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(C)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader"),a=r("../utils");function o(l){s.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=l[c]&255}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),v=l.charCodeAt(3),b=this.length-4;b>=0;--b)if(this.data[b]===c&&this.data[b+1]===d&&this.data[b+2]===h&&this.data[b+3]===v)return b-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),v=l.charCodeAt(3),b=this.readData(4);return c===b[0]&&d===b[1]&&h===b[2]&&v===b[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l=0,c;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1))}},n.exports=a},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader"),a=r("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader"),a=r("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){var c=this.readData(4);return l===c},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader"),a=r("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),a=r("../support"),o=r("./ArrayReader"),l=r("./StringReader"),c=r("./NodeBufferReader"),d=r("./Uint8ArrayReader");n.exports=function(h){var v=s.getTypeOf(h);return s.checkSupport(v),v==="string"&&!a.uint8array?new l(h):v==="nodebuffer"?new c(h):a.uint8array?new d(s.transformTo("uint8array",h)):new o(s.transformTo("array",h))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),a=r("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),a=r("../crc32"),o=r("../utils");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o.inherits(l,s),l.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker"),o=16*1024;function l(c){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=s.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}s.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return a.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=o,d=null,h=Math.min(this.max,this.index+c);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,h);break;case"uint8array":d=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":d=this.data.slice(this.index,h);break}return this.index=h,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return this.isFinished?!1:(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),a=r("./ConvertWorker"),o=r("./GenericWorker"),l=r("../base64"),c=r("../support"),d=r("../external"),h=null;if(c.nodestream)try{h=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(y,p,m){switch(y){case"blob":return s.newBlob(s.transformTo("arraybuffer",p),m);case"base64":return l.encode(p);default:return s.transformTo(y,p)}}function b(y,p){var m,g=0,w=null,x=0;for(m=0;m<p.length;m++)x+=p[m].length;switch(y){case"string":return p.join("");case"array":return Array.prototype.concat.apply([],p);case"uint8array":for(w=new Uint8Array(x),m=0;m<p.length;m++)w.set(p[m],g),g+=p[m].length;return w;case"nodebuffer":return Buffer.concat(p);default:throw new Error("concat : unsupported type '"+y+"'")}}function N(y,p){return new d.Promise(function(m,g){var w=[],x=y._internalType,C=y._outputType,E=y._mimeType;y.on("data",function(S,I){w.push(S),p&&p(I)}).on("error",function(S){w=[],g(S)}).on("end",function(){try{var S=v(C,b(x,w),E);m(S)}catch(I){g(I)}w=[]}).resume()})}function k(y,p,m){var g=p;switch(p){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string";break}try{this._internalType=g,this._outputType=p,this._mimeType=m,s.checkSupport(g),this._worker=y.pipe(new a(g)),y.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}k.prototype={accumulate:function(y){return N(this,y)},on:function(y,p){var m=this;return y==="data"?this._worker.on(y,function(g){p.call(m,g.data,g.meta)}):this._worker.on(y,function(){s.delay(p,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},y)}},n.exports=k},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new a;o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),a=r("./support"),o=r("./nodejsUtils"),l=r("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;c[254]=c[254]=1;var h=function(y){var p,m,g,w,x,C=y.length,E=0;for(w=0;w<C;w++)m=y.charCodeAt(w),(m&64512)===55296&&w+1<C&&(g=y.charCodeAt(w+1),(g&64512)===56320&&(m=65536+(m-55296<<10)+(g-56320),w++)),E+=m<128?1:m<2048?2:m<65536?3:4;for(a.uint8array?p=new Uint8Array(E):p=new Array(E),x=0,w=0;x<E;w++)m=y.charCodeAt(w),(m&64512)===55296&&w+1<C&&(g=y.charCodeAt(w+1),(g&64512)===56320&&(m=65536+(m-55296<<10)+(g-56320),w++)),m<128?p[x++]=m:m<2048?(p[x++]=192|m>>>6,p[x++]=128|m&63):m<65536?(p[x++]=224|m>>>12,p[x++]=128|m>>>6&63,p[x++]=128|m&63):(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63,p[x++]=128|m>>>6&63,p[x++]=128|m&63);return p},v=function(y,p){var m;for(p=p||y.length,p>y.length&&(p=y.length),m=p-1;m>=0&&(y[m]&192)===128;)m--;return m<0||m===0?p:m+c[y[m]]>p?m:p},b=function(y){var p,m,g,w,x=y.length,C=new Array(x*2);for(m=0,p=0;p<x;){if(g=y[p++],g<128){C[m++]=g;continue}if(w=c[g],w>4){C[m++]=65533,p+=w-1;continue}for(g&=w===2?31:w===3?15:7;w>1&&p<x;)g=g<<6|y[p++]&63,w--;if(w>1){C[m++]=65533;continue}g<65536?C[m++]=g:(g-=65536,C[m++]=55296|g>>10&1023,C[m++]=56320|g&1023)}return C.length!==m&&(C.subarray?C=C.subarray(0,m):C.length=m),s.applyFromCharCode(C)};i.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):h(p)},i.utf8decode=function(p){return a.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):(p=s.transformTo(a.uint8array?"uint8array":"array",p),b(p))};function N(){l.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(N,l),N.prototype.processChunk=function(y){var p=s.transformTo(a.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=p;p=new Uint8Array(m.length+this.leftOver.length),p.set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=v(p),w=p;g!==p.length&&(a.uint8array?(w=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(w=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:i.utf8decode(w),meta:y.meta})},N.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=N;function k(){l.call(this,"utf-8 encode")}s.inherits(k,l),k.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),a=r("./base64"),o=r("./nodejsUtils"),l=r("./external");r("setimmediate");function c(y){var p=null;return s.uint8array?p=new Uint8Array(y.length):p=new Array(y.length),h(y,p)}i.newBlob=function(y,p){i.checkSupport("blob");try{return new Blob([y],{type:p})}catch{try{var m=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,g=new m;return g.append(y),g.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};function d(y){return y}function h(y,p){for(var m=0;m<y.length;++m)p[m]=y.charCodeAt(m)&255;return p}var v={stringifyByChunk:function(y,p,m){var g=[],w=0,x=y.length;if(x<=m)return String.fromCharCode.apply(null,y);for(;w<x;)p==="array"||p==="nodebuffer"?g.push(String.fromCharCode.apply(null,y.slice(w,Math.min(w+m,x)))):g.push(String.fromCharCode.apply(null,y.subarray(w,Math.min(w+m,x)))),w+=m;return g.join("")},stringifyByChar:function(y){for(var p="",m=0;m<y.length;m++)p+=String.fromCharCode(y[m]);return p},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function b(y){var p=65536,m=i.getTypeOf(y),g=!0;if(m==="uint8array"?g=v.applyCanBeUsed.uint8array:m==="nodebuffer"&&(g=v.applyCanBeUsed.nodebuffer),g)for(;p>1;)try{return v.stringifyByChunk(y,m,p)}catch{p=Math.floor(p/2)}return v.stringifyByChar(y)}i.applyFromCharCode=b;function N(y,p){for(var m=0;m<y.length;m++)p[m]=y[m];return p}var k={};k.string={string:d,array:function(y){return h(y,new Array(y.length))},arraybuffer:function(y){return k.string.uint8array(y).buffer},uint8array:function(y){return h(y,new Uint8Array(y.length))},nodebuffer:function(y){return h(y,o.allocBuffer(y.length))}},k.array={string:b,array:d,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return o.newBufferFrom(y)}},k.arraybuffer={string:function(y){return b(new Uint8Array(y))},array:function(y){return N(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:d,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return o.newBufferFrom(new Uint8Array(y))}},k.uint8array={string:b,array:function(y){return N(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:d,nodebuffer:function(y){return o.newBufferFrom(y)}},k.nodebuffer={string:b,array:function(y){return N(y,new Array(y.length))},arraybuffer:function(y){return k.nodebuffer.uint8array(y).buffer},uint8array:function(y){return N(y,new Uint8Array(y.length))},nodebuffer:d},i.transformTo=function(y,p){if(p||(p=""),!y)return p;i.checkSupport(y);var m=i.getTypeOf(p),g=k[m][y](p);return g},i.resolve=function(y){for(var p=y.split("/"),m=[],g=0;g<p.length;g++){var w=p[g];w==="."||w===""&&g!==0&&g!==p.length-1||(w===".."?m.pop():m.push(w))}return m.join("/")},i.getTypeOf=function(y){if(typeof y=="string")return"string";if(Object.prototype.toString.call(y)==="[object Array]")return"array";if(s.nodebuffer&&o.isBuffer(y))return"nodebuffer";if(s.uint8array&&y instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&y instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(y){var p=s[y.toLowerCase()];if(!p)throw new Error(y+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(y){var p="",m,g;for(g=0;g<(y||"").length;g++)m=y.charCodeAt(g),p+="\\x"+(m<16?"0":"")+m.toString(16).toUpperCase();return p},i.delay=function(y,p,m){setImmediate(function(){y.apply(m||null,p||[])})},i.inherits=function(y,p){var m=function(){};m.prototype=p.prototype,y.prototype=new m},i.extend=function(){var y={},p,m;for(p=0;p<arguments.length;p++)for(m in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],m)&&typeof y[m]>"u"&&(y[m]=arguments[p][m]);return y},i.prepareContent=function(y,p,m,g,w){var x=l.Promise.resolve(p).then(function(C){var E=s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1);return E&&typeof FileReader<"u"?new l.Promise(function(S,I){var R=new FileReader;R.onload=function(B){S(B.target.result)},R.onerror=function(B){I(B.target.error)},R.readAsArrayBuffer(C)}):C});return x.then(function(C){var E=i.getTypeOf(C);return E?(E==="arraybuffer"?C=i.transformTo("uint8array",C):E==="string"&&(w?C=a.decode(C):m&&g!==!0&&(C=c(C))),C):l.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./signature"),l=r("./zipEntry"),c=r("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(v)+", expected "+a.pretty(h)+")")}},isSignature:function(h,v){var b=this.reader.index;this.reader.setIndex(h);var N=this.reader.readString(4),k=N===v;return this.reader.setIndex(b),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),v=c.uint8array?"uint8array":"array",b=a.transformTo(v,h);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h=this.zip64EndOfCentralSize-44,v=0,b,N,k;v<h;)b=this.reader.readInt(2),N=this.reader.readInt(4),k=this.reader.readData(N),this.zip64ExtensibleData[b]={id:b,length:N,value:k}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,v;for(h=0;h<this.files.length;h++)v=this.files[h],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)h=new l({zip64:this.zip64},this.loadOptions),h.readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0){var v=!this.isSignature(0,o.LOCAL_FILE_HEADER);throw v?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(h);var b=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),h<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var N=this.centralDirOffset+this.centralDirSize;this.zip64&&(N+=20,N+=12+this.zip64EndOfCentralSize);var k=b-N;if(k>0)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./compressedObject"),l=r("./crc32"),c=r("./utf8"),d=r("./compressions"),h=r("./support"),v=0,b=3,N=function(y){for(var p in d)if(Object.prototype.hasOwnProperty.call(d,p)&&d[p].magic===y)return d[p];return null};function k(y,p){this.options=y,this.loadOptions=p}k.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(y){var p,m;if(y.skip(22),this.fileNameLength=y.readInt(2),m=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(p=N(this.compressionMethod),p===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,p,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var p=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(p),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),y===v&&(this.dosPermissions=this.externalFileAttributes&63),y===b&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var p=y.index+this.extraFieldsLength,m,g,w;for(this.extraFields||(this.extraFields={});y.index+4<p;)m=y.readInt(2),g=y.readInt(2),w=y.readData(g),this.extraFields[m]={id:m,length:g,value:w};y.setIndex(p)},handleUTF8:function(){var y=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=a.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var w=a.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var p=s(y.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var p=s(y.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(y.length-5))}return null}},n.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){var s=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),o=r("./utf8"),l=r("./compressedObject"),c=r("./stream/GenericWorker"),d=function(N,k,y){this.name=N,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=k,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}};d.prototype={internalStream:function(N){var k=null,y="string";try{if(!N)throw new Error("No output type specified.");y=N.toLowerCase();var p=y==="string"||y==="text";(y==="binarystring"||y==="text")&&(y="string"),k=this._decompressWorker();var m=!this._dataBinary;m&&!p&&(k=k.pipe(new o.Utf8EncodeWorker)),!m&&p&&(k=k.pipe(new o.Utf8DecodeWorker))}catch(g){k=new c("error"),k.error(g)}return new s(k,y,"")},async:function(N,k){return this.internalStream(N).accumulate(k)},nodeStream:function(N,k){return this.internalStream(N||"nodebuffer").toNodejsStream(k)},_compressWorker:function(N,k){if(this._data instanceof l&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new o.Utf8EncodeWorker)),l.createWorkerFrom(y,N,k)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<h.length;b++)d.prototype[h[b]]=v;n.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,c=new a(N),d=s.document.createTextNode("");c.observe(d,{characterData:!0}),o=function(){d.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=N,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var y=s.document.createElement("script");y.onreadystatechange=function(){N(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:o=function(){setTimeout(N,0)};var v,b=[];function N(){v=!0;for(var y,p,m=b.length;m;){for(p=b,b=[],y=-1;++y<m;)p[y]();m=b.length}v=!1}n.exports=k;function k(y){b.push(y)===1&&!v&&o()}}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];n.exports=h;function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==a&&k(this,x)}h.prototype.finally=function(x){if(typeof x!="function")return this;var C=this.constructor;return this.then(E,S);function E(I){function R(){return I}return C.resolve(x()).then(R)}function S(I){function R(){throw I}return C.resolve(x()).then(R)}},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,C){if(typeof x!="function"&&this.state===c||typeof C!="function"&&this.state===l)return this;var E=new this.constructor(a);if(this.state!==d){var S=this.state===c?x:C;b(E,S,this.outcome)}else this.queue.push(new v(E,x,C));return E};function v(x,C,E){this.promise=x,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},v.prototype.otherCallFulfilled=function(x){b(this.promise,this.onFulfilled,x)},v.prototype.callRejected=function(x){o.reject(this.promise,x)},v.prototype.otherCallRejected=function(x){b(this.promise,this.onRejected,x)};function b(x,C,E){s(function(){var S;try{S=C(E)}catch(I){return o.reject(x,I)}S===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,S)})}o.resolve=function(x,C){var E=y(N,C);if(E.status==="error")return o.reject(x,E.value);var S=E.value;if(S)k(x,S);else{x.state=c,x.outcome=C;for(var I=-1,R=x.queue.length;++I<R;)x.queue[I].callFulfilled(C)}return x},o.reject=function(x,C){x.state=l,x.outcome=C;for(var E=-1,S=x.queue.length;++E<S;)x.queue[E].callRejected(C);return x};function N(x){var C=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof C=="function")return function(){C.apply(x,arguments)}}function k(x,C){var E=!1;function S(U){E||(E=!0,o.reject(x,U))}function I(U){E||(E=!0,o.resolve(x,U))}function R(){C(I,S)}var B=y(R);B.status==="error"&&S(B.value)}function y(x,C){var E={};try{E.value=x(C),E.status="success"}catch(S){E.status="error",E.value=S}return E}h.resolve=p;function p(x){return x instanceof this?x:o.resolve(new this(a),x)}h.reject=m;function m(x){var C=new this(a);return o.reject(C,x)}h.all=g;function g(x){var C=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,S=!1;if(!E)return this.resolve([]);for(var I=new Array(E),R=0,B=-1,U=new this(a);++B<E;)Q(x[B],B);return U;function Q(fe,oe){C.resolve(fe).then(ue,function(le){S||(S=!0,o.reject(U,le))});function ue(le){I[oe]=le,++R===E&&!S&&(S=!0,o.resolve(U,I))}}}h.race=w;function w(x){var C=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,S=!1;if(!E)return this.resolve([]);for(var I=-1,R=new this(a);++I<E;)B(x[I]);return R;function B(U){C.resolve(U).then(function(Q){S||(S=!0,o.resolve(R,Q))},function(Q){S||(S=!0,o.reject(R,Q))})}}},{immediate:36}],38:[function(r,n,i){var s=r("./lib/utils/common").assign,a=r("./lib/deflate"),o=r("./lib/inflate"),l=r("./lib/zlib/constants"),c={};s(c,a,o,l),n.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),a=r("./utils/common"),o=r("./utils/strings"),l=r("./zlib/messages"),c=r("./zlib/zstream"),d=Object.prototype.toString,h=0,v=4,b=0,N=1,k=2,y=-1,p=0,m=8;function g(E){if(!(this instanceof g))return new g(E);this.options=a.assign({level:y,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},E||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var I=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(I!==b)throw new Error(l[I]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var R;if(typeof S.dictionary=="string"?R=o.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?R=new Uint8Array(S.dictionary):R=S.dictionary,I=s.deflateSetDictionary(this.strm,R),I!==b)throw new Error(l[I]);this._dict_set=!0}}g.prototype.push=function(E,S){var I=this.strm,R=this.options.chunkSize,B,U;if(this.ended)return!1;U=S===~~S?S:S===!0?v:h,typeof E=="string"?I.input=o.string2buf(E):d.call(E)==="[object ArrayBuffer]"?I.input=new Uint8Array(E):I.input=E,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(R),I.next_out=0,I.avail_out=R),B=s.deflate(I,U),B!==N&&B!==b)return this.onEnd(B),this.ended=!0,!1;(I.avail_out===0||I.avail_in===0&&(U===v||U===k))&&(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(I.output,I.next_out))):this.onData(a.shrinkBuf(I.output,I.next_out)))}while((I.avail_in>0||I.avail_out===0)&&B!==N);return U===v?(B=s.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===b):(U===k&&(this.onEnd(b),I.avail_out=0),!0)},g.prototype.onData=function(E){this.chunks.push(E)},g.prototype.onEnd=function(E){E===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg};function w(E,S){var I=new g(S);if(I.push(E,!0),I.err)throw I.msg||l[I.err];return I.result}function x(E,S){return S=S||{},S.raw=!0,w(E,S)}function C(E,S){return S=S||{},S.gzip=!0,w(E,S)}i.Deflate=g,i.deflate=w,i.deflateRaw=x,i.gzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),a=r("./utils/common"),o=r("./utils/strings"),l=r("./zlib/constants"),c=r("./zlib/messages"),d=r("./zlib/zstream"),h=r("./zlib/gzheader"),v=Object.prototype.toString;function b(y){if(!(this instanceof b))return new b(y);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},y||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(y&&y.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15||(p.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,p.windowBits);if(m!==l.Z_OK)throw new Error(c[m]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}b.prototype.push=function(y,p){var m=this.strm,g=this.options.chunkSize,w=this.options.dictionary,x,C,E,S,I,R,B=!1;if(this.ended)return!1;C=p===~~p?p:p===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof y=="string"?m.input=o.binstring2buf(y):v.call(y)==="[object ArrayBuffer]"?m.input=new Uint8Array(y):m.input=y,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new a.Buf8(g),m.next_out=0,m.avail_out=g),x=s.inflate(m,l.Z_NO_FLUSH),x===l.Z_NEED_DICT&&w&&(typeof w=="string"?R=o.string2buf(w):v.call(w)==="[object ArrayBuffer]"?R=new Uint8Array(w):R=w,x=s.inflateSetDictionary(this.strm,R)),x===l.Z_BUF_ERROR&&B===!0&&(x=l.Z_OK,B=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),this.ended=!0,!1;m.next_out&&(m.avail_out===0||x===l.Z_STREAM_END||m.avail_in===0&&(C===l.Z_FINISH||C===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(E=o.utf8border(m.output,m.next_out),S=m.next_out-E,I=o.buf2string(m.output,E),m.next_out=S,m.avail_out=g-S,S&&a.arraySet(m.output,m.output,E,S,0),this.onData(I)):this.onData(a.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(B=!0)}while((m.avail_in>0||m.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(C=l.Z_FINISH),C===l.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):(C===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),m.avail_out=0),!0)},b.prototype.onData=function(y){this.chunks.push(y)},b.prototype.onEnd=function(y){y===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg};function N(y,p){var m=new b(p);if(m.push(y,!0),m.err)throw m.msg||c[m.err];return m.result}function k(y,p){return p=p||{},p.raw=!0,N(y,p)}i.Inflate=b,i.inflate=N,i.inflateRaw=k,i.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,d,h,v){if(c.subarray&&l.subarray){l.set(c.subarray(d,d+h),v);return}for(var b=0;b<h;b++)l[v+b]=c[d+b]},flattenChunks:function(l){var c,d,h,v,b,N;for(h=0,c=0,d=l.length;c<d;c++)h+=l[c].length;for(N=new Uint8Array(h),v=0,c=0,d=l.length;c<d;c++)b=l[c],N.set(b,v),v+=b.length;return N}},o={arraySet:function(l,c,d,h,v){for(var b=0;b<h;b++)l[v+b]=c[d+b]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1,i.string2buf=function(h){var v,b,N,k,y,p=h.length,m=0;for(k=0;k<p;k++)b=h.charCodeAt(k),(b&64512)===55296&&k+1<p&&(N=h.charCodeAt(k+1),(N&64512)===56320&&(b=65536+(b-55296<<10)+(N-56320),k++)),m+=b<128?1:b<2048?2:b<65536?3:4;for(v=new s.Buf8(m),y=0,k=0;y<m;k++)b=h.charCodeAt(k),(b&64512)===55296&&k+1<p&&(N=h.charCodeAt(k+1),(N&64512)===56320&&(b=65536+(b-55296<<10)+(N-56320),k++)),b<128?v[y++]=b:b<2048?(v[y++]=192|b>>>6,v[y++]=128|b&63):b<65536?(v[y++]=224|b>>>12,v[y++]=128|b>>>6&63,v[y++]=128|b&63):(v[y++]=240|b>>>18,v[y++]=128|b>>>12&63,v[y++]=128|b>>>6&63,v[y++]=128|b&63);return v};function d(h,v){if(v<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(h,v));for(var b="",N=0;N<v;N++)b+=String.fromCharCode(h[N]);return b}i.buf2binstring=function(h){return d(h,h.length)},i.binstring2buf=function(h){for(var v=new s.Buf8(h.length),b=0,N=v.length;b<N;b++)v[b]=h.charCodeAt(b);return v},i.buf2string=function(h,v){var b,N,k,y,p=v||h.length,m=new Array(p*2);for(N=0,b=0;b<p;){if(k=h[b++],k<128){m[N++]=k;continue}if(y=l[k],y>4){m[N++]=65533,b+=y-1;continue}for(k&=y===2?31:y===3?15:7;y>1&&b<p;)k=k<<6|h[b++]&63,y--;if(y>1){m[N++]=65533;continue}k<65536?m[N++]=k:(k-=65536,m[N++]=55296|k>>10&1023,m[N++]=56320|k&1023)}return d(m,N)},i.utf8border=function(h,v){var b;for(v=v||h.length,v>h.length&&(v=h.length),b=v-1;b>=0&&(h[b]&192)===128;)b--;return b<0||b===0?v:b+l[h[b]]>v?b:v}},{"./common":41}],43:[function(r,n,i){function s(a,o,l,c){for(var d=a&65535|0,h=a>>>16&65535|0,v=0;l!==0;){v=l>2e3?2e3:l,l-=v;do d=d+o[c++]|0,h=h+d|0;while(--v);d%=65521,h%=65521}return d|h<<16|0}n.exports=s},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){function s(){for(var l,c=[],d=0;d<256;d++){l=d;for(var h=0;h<8;h++)l=l&1?3988292384^l>>>1:l>>>1;c[d]=l}return c}var a=s();function o(l,c,d,h){var v=a,b=h+d;l^=-1;for(var N=h;N<b;N++)l=l>>>8^v[(l^c[N])&255];return l^-1}n.exports=o},{}],46:[function(r,n,i){var s=r("../utils/common"),a=r("./trees"),o=r("./adler32"),l=r("./crc32"),c=r("./messages"),d=0,h=1,v=3,b=4,N=5,k=0,y=1,p=-2,m=-3,g=-5,w=-1,x=1,C=2,E=3,S=4,I=0,R=2,B=8,U=9,Q=15,fe=8,oe=29,ue=256,le=ue+1+oe,V=30,he=19,ve=2*le+1,re=15,pe=3,Ae=258,Se=Ae+pe+1,Ve=32,H=42,X=69,ce=73,Ce=91,Ne=103,De=113,Fe=666,Pe=1,xt=2,at=3,qt=4,Ue=3;function pt(f,G){return f.msg=c[G],G}function wr(f){return(f<<1)-(f>4?9:0)}function Bt(f){for(var G=f.length;--G>=0;)f[G]=0}function _t(f){var G=f.state,Z=G.pending;Z>f.avail_out&&(Z=f.avail_out),Z!==0&&(s.arraySet(f.output,G.pending_buf,G.pending_out,Z,f.next_out),f.next_out+=Z,G.pending_out+=Z,f.total_out+=Z,f.avail_out-=Z,G.pending-=Z,G.pending===0&&(G.pending_out=0))}function Ze(f,G){a._tr_flush_block(f,f.block_start>=0?f.block_start:-1,f.strstart-f.block_start,G),f.block_start=f.strstart,_t(f.strm)}function Te(f,G){f.pending_buf[f.pending++]=G}function Ot(f,G){f.pending_buf[f.pending++]=G>>>8&255,f.pending_buf[f.pending++]=G&255}function Kr(f,G,Z,D){var P=f.avail_in;return P>D&&(P=D),P===0?0:(f.avail_in-=P,s.arraySet(G,f.input,f.next_in,P,Z),f.state.wrap===1?f.adler=o(f.adler,G,P,Z):f.state.wrap===2&&(f.adler=l(f.adler,G,P,Z)),f.next_in+=P,f.total_in+=P,P)}function kr(f,G){var Z=f.max_chain_length,D=f.strstart,P,q,we=f.prev_length,ge=f.nice_match,ye=f.strstart>f.w_size-Se?f.strstart-(f.w_size-Se):0,Be=f.window,Sr=f.w_mask,Qe=f.prev,Ie=f.strstart+Ae,ot=Be[D+we-1],bt=Be[D+we];f.prev_length>=f.good_match&&(Z>>=2),ge>f.lookahead&&(ge=f.lookahead);do if(P=G,!(Be[P+we]!==bt||Be[P+we-1]!==ot||Be[P]!==Be[D]||Be[++P]!==Be[D+1])){D+=2,P++;do;while(Be[++D]===Be[++P]&&Be[++D]===Be[++P]&&Be[++D]===Be[++P]&&Be[++D]===Be[++P]&&Be[++D]===Be[++P]&&Be[++D]===Be[++P]&&Be[++D]===Be[++P]&&Be[++D]===Be[++P]&&D<Ie);if(q=Ae-(Ie-D),D=Ie-Ae,q>we){if(f.match_start=G,we=q,q>=ge)break;ot=Be[D+we-1],bt=Be[D+we]}}while((G=Qe[G&Sr])>ye&&--Z!==0);return we<=f.lookahead?we:f.lookahead}function Mt(f){var G=f.w_size,Z,D,P,q,we;do{if(q=f.window_size-f.lookahead-f.strstart,f.strstart>=G+(G-Se)){s.arraySet(f.window,f.window,G,G,0),f.match_start-=G,f.strstart-=G,f.block_start-=G,D=f.hash_size,Z=D;do P=f.head[--Z],f.head[Z]=P>=G?P-G:0;while(--D);D=G,Z=D;do P=f.prev[--Z],f.prev[Z]=P>=G?P-G:0;while(--D);q+=G}if(f.strm.avail_in===0)break;if(D=Kr(f.strm,f.window,f.strstart+f.lookahead,q),f.lookahead+=D,f.lookahead+f.insert>=pe)for(we=f.strstart-f.insert,f.ins_h=f.window[we],f.ins_h=(f.ins_h<<f.hash_shift^f.window[we+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[we+pe-1])&f.hash_mask,f.prev[we&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=we,we++,f.insert--,!(f.lookahead+f.insert<pe)););}while(f.lookahead<Se&&f.strm.avail_in!==0)}function Xr(f,G){var Z=65535;for(Z>f.pending_buf_size-5&&(Z=f.pending_buf_size-5);;){if(f.lookahead<=1){if(Mt(f),f.lookahead===0&&G===d)return Pe;if(f.lookahead===0)break}f.strstart+=f.lookahead,f.lookahead=0;var D=f.block_start+Z;if((f.strstart===0||f.strstart>=D)&&(f.lookahead=f.strstart-D,f.strstart=D,Ze(f,!1),f.strm.avail_out===0)||f.strstart-f.block_start>=f.w_size-Se&&(Ze(f,!1),f.strm.avail_out===0))return Pe}return f.insert=0,G===b?(Ze(f,!0),f.strm.avail_out===0?at:qt):(f.strstart>f.block_start&&(Ze(f,!1),f.strm.avail_out===0),Pe)}function Cr(f,G){for(var Z,D;;){if(f.lookahead<Se){if(Mt(f),f.lookahead<Se&&G===d)return Pe;if(f.lookahead===0)break}if(Z=0,f.lookahead>=pe&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+pe-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),Z!==0&&f.strstart-Z<=f.w_size-Se&&(f.match_length=kr(f,Z)),f.match_length>=pe)if(D=a._tr_tally(f,f.strstart-f.match_start,f.match_length-pe),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=pe){f.match_length--;do f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+pe-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart;while(--f.match_length!==0);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else D=a._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(D&&(Ze(f,!1),f.strm.avail_out===0))return Pe}return f.insert=f.strstart<pe-1?f.strstart:pe-1,G===b?(Ze(f,!0),f.strm.avail_out===0?at:qt):f.last_lit&&(Ze(f,!1),f.strm.avail_out===0)?Pe:xt}function Vt(f,G){for(var Z,D,P;;){if(f.lookahead<Se){if(Mt(f),f.lookahead<Se&&G===d)return Pe;if(f.lookahead===0)break}if(Z=0,f.lookahead>=pe&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+pe-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=pe-1,Z!==0&&f.prev_length<f.max_lazy_match&&f.strstart-Z<=f.w_size-Se&&(f.match_length=kr(f,Z),f.match_length<=5&&(f.strategy===x||f.match_length===pe&&f.strstart-f.match_start>4096)&&(f.match_length=pe-1)),f.prev_length>=pe&&f.match_length<=f.prev_length){P=f.strstart+f.lookahead-pe,D=a._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-pe),f.lookahead-=f.prev_length-1,f.prev_length-=2;do++f.strstart<=P&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+pe-1])&f.hash_mask,Z=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart);while(--f.prev_length!==0);if(f.match_available=0,f.match_length=pe-1,f.strstart++,D&&(Ze(f,!1),f.strm.avail_out===0))return Pe}else if(f.match_available){if(D=a._tr_tally(f,0,f.window[f.strstart-1]),D&&Ze(f,!1),f.strstart++,f.lookahead--,f.strm.avail_out===0)return Pe}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(D=a._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<pe-1?f.strstart:pe-1,G===b?(Ze(f,!0),f.strm.avail_out===0?at:qt):f.last_lit&&(Ze(f,!1),f.strm.avail_out===0)?Pe:xt}function Qr(f,G){for(var Z,D,P,q,we=f.window;;){if(f.lookahead<=Ae){if(Mt(f),f.lookahead<=Ae&&G===d)return Pe;if(f.lookahead===0)break}if(f.match_length=0,f.lookahead>=pe&&f.strstart>0&&(P=f.strstart-1,D=we[P],D===we[++P]&&D===we[++P]&&D===we[++P])){q=f.strstart+Ae;do;while(D===we[++P]&&D===we[++P]&&D===we[++P]&&D===we[++P]&&D===we[++P]&&D===we[++P]&&D===we[++P]&&D===we[++P]&&P<q);f.match_length=Ae-(q-P),f.match_length>f.lookahead&&(f.match_length=f.lookahead)}if(f.match_length>=pe?(Z=a._tr_tally(f,1,f.match_length-pe),f.lookahead-=f.match_length,f.strstart+=f.match_length,f.match_length=0):(Z=a._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++),Z&&(Ze(f,!1),f.strm.avail_out===0))return Pe}return f.insert=0,G===b?(Ze(f,!0),f.strm.avail_out===0?at:qt):f.last_lit&&(Ze(f,!1),f.strm.avail_out===0)?Pe:xt}function Er(f,G){for(var Z;;){if(f.lookahead===0&&(Mt(f),f.lookahead===0)){if(G===d)return Pe;break}if(f.match_length=0,Z=a._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++,Z&&(Ze(f,!1),f.strm.avail_out===0))return Pe}return f.insert=0,G===b?(Ze(f,!0),f.strm.avail_out===0?at:qt):f.last_lit&&(Ze(f,!1),f.strm.avail_out===0)?Pe:xt}function mt(f,G,Z,D,P){this.good_length=f,this.max_lazy=G,this.nice_length=Z,this.max_chain=D,this.func=P}var Gt;Gt=[new mt(0,0,0,0,Xr),new mt(4,4,8,4,Cr),new mt(4,5,16,8,Cr),new mt(4,6,32,32,Cr),new mt(4,4,16,16,Vt),new mt(8,16,32,32,Vt),new mt(8,16,128,128,Vt),new mt(8,32,128,256,Vt),new mt(32,128,258,1024,Vt),new mt(32,258,258,4096,Vt)];function vn(f){f.window_size=2*f.w_size,Bt(f.head),f.max_lazy_match=Gt[f.level].max_lazy,f.good_match=Gt[f.level].good_length,f.nice_match=Gt[f.level].nice_length,f.max_chain_length=Gt[f.level].max_chain,f.strstart=0,f.block_start=0,f.lookahead=0,f.insert=0,f.match_length=f.prev_length=pe-1,f.match_available=0,f.ins_h=0}function j(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(ve*2),this.dyn_dtree=new s.Buf16((2*V+1)*2),this.bl_tree=new s.Buf16((2*he+1)*2),Bt(this.dyn_ltree),Bt(this.dyn_dtree),Bt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(re+1),this.heap=new s.Buf16(2*le+1),Bt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*le+1),Bt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function J(f){var G;return!f||!f.state?pt(f,p):(f.total_in=f.total_out=0,f.data_type=R,G=f.state,G.pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?H:De,f.adler=G.wrap===2?0:1,G.last_flush=d,a._tr_init(G),k)}function ne(f){var G=J(f);return G===k&&vn(f.state),G}function xe(f,G){return!f||!f.state||f.state.wrap!==2?p:(f.state.gzhead=G,k)}function F(f,G,Z,D,P,q){if(!f)return p;var we=1;if(G===w&&(G=6),D<0?(we=0,D=-D):D>15&&(we=2,D-=16),P<1||P>U||Z!==B||D<8||D>15||G<0||G>9||q<0||q>S)return pt(f,p);D===8&&(D=9);var ge=new j;return f.state=ge,ge.strm=f,ge.wrap=we,ge.gzhead=null,ge.w_bits=D,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=P+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+pe-1)/pe),ge.window=new s.Buf8(ge.w_size*2),ge.head=new s.Buf16(ge.hash_size),ge.prev=new s.Buf16(ge.w_size),ge.lit_bufsize=1<<P+6,ge.pending_buf_size=ge.lit_bufsize*4,ge.pending_buf=new s.Buf8(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=3*ge.lit_bufsize,ge.level=G,ge.strategy=q,ge.method=Z,ne(f)}function Y(f,G){return F(f,G,B,Q,fe,I)}function _(f,G){var Z,D,P,q;if(!f||!f.state||G>N||G<0)return f?pt(f,p):p;if(D=f.state,!f.output||!f.input&&f.avail_in!==0||D.status===Fe&&G!==b)return pt(f,f.avail_out===0?g:p);if(D.strm=f,Z=D.last_flush,D.last_flush=G,D.status===H)if(D.wrap===2)f.adler=0,Te(D,31),Te(D,139),Te(D,8),D.gzhead?(Te(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),Te(D,D.gzhead.time&255),Te(D,D.gzhead.time>>8&255),Te(D,D.gzhead.time>>16&255),Te(D,D.gzhead.time>>24&255),Te(D,D.level===9?2:D.strategy>=C||D.level<2?4:0),Te(D,D.gzhead.os&255),D.gzhead.extra&&D.gzhead.extra.length&&(Te(D,D.gzhead.extra.length&255),Te(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(f.adler=l(f.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=X):(Te(D,0),Te(D,0),Te(D,0),Te(D,0),Te(D,0),Te(D,D.level===9?2:D.strategy>=C||D.level<2?4:0),Te(D,Ue),D.status=De);else{var we=B+(D.w_bits-8<<4)<<8,ge=-1;D.strategy>=C||D.level<2?ge=0:D.level<6?ge=1:D.level===6?ge=2:ge=3,we|=ge<<6,D.strstart!==0&&(we|=Ve),we+=31-we%31,D.status=De,Ot(D,we),D.strstart!==0&&(Ot(D,f.adler>>>16),Ot(D,f.adler&65535)),f.adler=1}if(D.status===X)if(D.gzhead.extra){for(P=D.pending;D.gzindex<(D.gzhead.extra.length&65535)&&!(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>P&&(f.adler=l(f.adler,D.pending_buf,D.pending-P,P)),_t(f),P=D.pending,D.pending===D.pending_buf_size));)Te(D,D.gzhead.extra[D.gzindex]&255),D.gzindex++;D.gzhead.hcrc&&D.pending>P&&(f.adler=l(f.adler,D.pending_buf,D.pending-P,P)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=ce)}else D.status=ce;if(D.status===ce)if(D.gzhead.name){P=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>P&&(f.adler=l(f.adler,D.pending_buf,D.pending-P,P)),_t(f),P=D.pending,D.pending===D.pending_buf_size)){q=1;break}D.gzindex<D.gzhead.name.length?q=D.gzhead.name.charCodeAt(D.gzindex++)&255:q=0,Te(D,q)}while(q!==0);D.gzhead.hcrc&&D.pending>P&&(f.adler=l(f.adler,D.pending_buf,D.pending-P,P)),q===0&&(D.gzindex=0,D.status=Ce)}else D.status=Ce;if(D.status===Ce)if(D.gzhead.comment){P=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>P&&(f.adler=l(f.adler,D.pending_buf,D.pending-P,P)),_t(f),P=D.pending,D.pending===D.pending_buf_size)){q=1;break}D.gzindex<D.gzhead.comment.length?q=D.gzhead.comment.charCodeAt(D.gzindex++)&255:q=0,Te(D,q)}while(q!==0);D.gzhead.hcrc&&D.pending>P&&(f.adler=l(f.adler,D.pending_buf,D.pending-P,P)),q===0&&(D.status=Ne)}else D.status=Ne;if(D.status===Ne&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&_t(f),D.pending+2<=D.pending_buf_size&&(Te(D,f.adler&255),Te(D,f.adler>>8&255),f.adler=0,D.status=De)):D.status=De),D.pending!==0){if(_t(f),f.avail_out===0)return D.last_flush=-1,k}else if(f.avail_in===0&&wr(G)<=wr(Z)&&G!==b)return pt(f,g);if(D.status===Fe&&f.avail_in!==0)return pt(f,g);if(f.avail_in!==0||D.lookahead!==0||G!==d&&D.status!==Fe){var ye=D.strategy===C?Er(D,G):D.strategy===E?Qr(D,G):Gt[D.level].func(D,G);if((ye===at||ye===qt)&&(D.status=Fe),ye===Pe||ye===at)return f.avail_out===0&&(D.last_flush=-1),k;if(ye===xt&&(G===h?a._tr_align(D):G!==N&&(a._tr_stored_block(D,0,0,!1),G===v&&(Bt(D.head),D.lookahead===0&&(D.strstart=0,D.block_start=0,D.insert=0))),_t(f),f.avail_out===0))return D.last_flush=-1,k}return G!==b?k:D.wrap<=0?y:(D.wrap===2?(Te(D,f.adler&255),Te(D,f.adler>>8&255),Te(D,f.adler>>16&255),Te(D,f.adler>>24&255),Te(D,f.total_in&255),Te(D,f.total_in>>8&255),Te(D,f.total_in>>16&255),Te(D,f.total_in>>24&255)):(Ot(D,f.adler>>>16),Ot(D,f.adler&65535)),_t(f),D.wrap>0&&(D.wrap=-D.wrap),D.pending!==0?k:y)}function ee(f){var G;return!f||!f.state?p:(G=f.state.status,G!==H&&G!==X&&G!==ce&&G!==Ce&&G!==Ne&&G!==De&&G!==Fe?pt(f,p):(f.state=null,G===De?pt(f,m):k))}function Ee(f,G){var Z=G.length,D,P,q,we,ge,ye,Be,Sr;if(!f||!f.state||(D=f.state,we=D.wrap,we===2||we===1&&D.status!==H||D.lookahead))return p;for(we===1&&(f.adler=o(f.adler,G,Z,0)),D.wrap=0,Z>=D.w_size&&(we===0&&(Bt(D.head),D.strstart=0,D.block_start=0,D.insert=0),Sr=new s.Buf8(D.w_size),s.arraySet(Sr,G,Z-D.w_size,D.w_size,0),G=Sr,Z=D.w_size),ge=f.avail_in,ye=f.next_in,Be=f.input,f.avail_in=Z,f.next_in=0,f.input=G,Mt(D);D.lookahead>=pe;){P=D.strstart,q=D.lookahead-(pe-1);do D.ins_h=(D.ins_h<<D.hash_shift^D.window[P+pe-1])&D.hash_mask,D.prev[P&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=P,P++;while(--q);D.strstart=P,D.lookahead=pe-1,Mt(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=pe-1,D.match_available=0,f.next_in=ye,f.input=Be,f.avail_in=ge,D.wrap=we,k}i.deflateInit=Y,i.deflateInit2=F,i.deflateReset=ne,i.deflateResetKeep=J,i.deflateSetHeader=xe,i.deflate=_,i.deflateEnd=ee,i.deflateSetDictionary=Ee,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n.exports=s},{}],48:[function(r,n,i){var s=30,a=12;n.exports=function(l,c){var d,h,v,b,N,k,y,p,m,g,w,x,C,E,S,I,R,B,U,Q,fe,oe,ue,le,V;d=l.state,h=l.next_in,le=l.input,v=h+(l.avail_in-5),b=l.next_out,V=l.output,N=b-(c-l.avail_out),k=b+(l.avail_out-257),y=d.dmax,p=d.wsize,m=d.whave,g=d.wnext,w=d.window,x=d.hold,C=d.bits,E=d.lencode,S=d.distcode,I=(1<<d.lenbits)-1,R=(1<<d.distbits)-1;e:do{C<15&&(x+=le[h++]<<C,C+=8,x+=le[h++]<<C,C+=8),B=E[x&I];t:for(;;){if(U=B>>>24,x>>>=U,C-=U,U=B>>>16&255,U===0)V[b++]=B&65535;else if(U&16){Q=B&65535,U&=15,U&&(C<U&&(x+=le[h++]<<C,C+=8),Q+=x&(1<<U)-1,x>>>=U,C-=U),C<15&&(x+=le[h++]<<C,C+=8,x+=le[h++]<<C,C+=8),B=S[x&R];r:for(;;){if(U=B>>>24,x>>>=U,C-=U,U=B>>>16&255,U&16){if(fe=B&65535,U&=15,C<U&&(x+=le[h++]<<C,C+=8,C<U&&(x+=le[h++]<<C,C+=8)),fe+=x&(1<<U)-1,fe>y){l.msg="invalid distance too far back",d.mode=s;break e}if(x>>>=U,C-=U,U=b-N,fe>U){if(U=fe-U,U>m&&d.sane){l.msg="invalid distance too far back",d.mode=s;break e}if(oe=0,ue=w,g===0){if(oe+=p-U,U<Q){Q-=U;do V[b++]=w[oe++];while(--U);oe=b-fe,ue=V}}else if(g<U){if(oe+=p+g-U,U-=g,U<Q){Q-=U;do V[b++]=w[oe++];while(--U);if(oe=0,g<Q){U=g,Q-=U;do V[b++]=w[oe++];while(--U);oe=b-fe,ue=V}}}else if(oe+=g-U,U<Q){Q-=U;do V[b++]=w[oe++];while(--U);oe=b-fe,ue=V}for(;Q>2;)V[b++]=ue[oe++],V[b++]=ue[oe++],V[b++]=ue[oe++],Q-=3;Q&&(V[b++]=ue[oe++],Q>1&&(V[b++]=ue[oe++]))}else{oe=b-fe;do V[b++]=V[oe++],V[b++]=V[oe++],V[b++]=V[oe++],Q-=3;while(Q>2);Q&&(V[b++]=V[oe++],Q>1&&(V[b++]=V[oe++]))}}else if(U&64){l.msg="invalid distance code",d.mode=s;break e}else{B=S[(B&65535)+(x&(1<<U)-1)];continue r}break}}else if(U&64)if(U&32){d.mode=a;break e}else{l.msg="invalid literal/length code",d.mode=s;break e}else{B=E[(B&65535)+(x&(1<<U)-1)];continue t}break}}while(h<v&&b<k);Q=C>>3,h-=Q,C-=Q<<3,x&=(1<<C)-1,l.next_in=h,l.next_out=b,l.avail_in=h<v?5+(v-h):5-(h-v),l.avail_out=b<k?257+(k-b):257-(b-k),d.hold=x,d.bits=C}},{}],49:[function(r,n,i){var s=r("../utils/common"),a=r("./adler32"),o=r("./crc32"),l=r("./inffast"),c=r("./inftrees"),d=0,h=1,v=2,b=4,N=5,k=6,y=0,p=1,m=2,g=-2,w=-3,x=-4,C=-5,E=8,S=1,I=2,R=3,B=4,U=5,Q=6,fe=7,oe=8,ue=9,le=10,V=11,he=12,ve=13,re=14,pe=15,Ae=16,Se=17,Ve=18,H=19,X=20,ce=21,Ce=22,Ne=23,De=24,Fe=25,Pe=26,xt=27,at=28,qt=29,Ue=30,pt=31,wr=32,Bt=852,_t=592,Ze=15,Te=Ze;function Ot(F){return(F>>>24&255)+(F>>>8&65280)+((F&65280)<<8)+((F&255)<<24)}function Kr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function kr(F){var Y;return!F||!F.state?g:(Y=F.state,F.total_in=F.total_out=Y.total=0,F.msg="",Y.wrap&&(F.adler=Y.wrap&1),Y.mode=S,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new s.Buf32(Bt),Y.distcode=Y.distdyn=new s.Buf32(_t),Y.sane=1,Y.back=-1,y)}function Mt(F){var Y;return!F||!F.state?g:(Y=F.state,Y.wsize=0,Y.whave=0,Y.wnext=0,kr(F))}function Xr(F,Y){var _,ee;return!F||!F.state||(ee=F.state,Y<0?(_=0,Y=-Y):(_=(Y>>4)+1,Y<48&&(Y&=15)),Y&&(Y<8||Y>15))?g:(ee.window!==null&&ee.wbits!==Y&&(ee.window=null),ee.wrap=_,ee.wbits=Y,Mt(F))}function Cr(F,Y){var _,ee;return F?(ee=new Kr,F.state=ee,ee.window=null,_=Xr(F,Y),_!==y&&(F.state=null),_):g}function Vt(F){return Cr(F,Te)}var Qr=!0,Er,mt;function Gt(F){if(Qr){var Y;for(Er=new s.Buf32(512),mt=new s.Buf32(32),Y=0;Y<144;)F.lens[Y++]=8;for(;Y<256;)F.lens[Y++]=9;for(;Y<280;)F.lens[Y++]=7;for(;Y<288;)F.lens[Y++]=8;for(c(h,F.lens,0,288,Er,0,F.work,{bits:9}),Y=0;Y<32;)F.lens[Y++]=5;c(v,F.lens,0,32,mt,0,F.work,{bits:5}),Qr=!1}F.lencode=Er,F.lenbits=9,F.distcode=mt,F.distbits=5}function vn(F,Y,_,ee){var Ee,f=F.state;return f.window===null&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),ee>=f.wsize?(s.arraySet(f.window,Y,_-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(Ee=f.wsize-f.wnext,Ee>ee&&(Ee=ee),s.arraySet(f.window,Y,_-ee,Ee,f.wnext),ee-=Ee,ee?(s.arraySet(f.window,Y,_-ee,ee,0),f.wnext=ee,f.whave=f.wsize):(f.wnext+=Ee,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=Ee))),0}function j(F,Y){var _,ee,Ee,f,G,Z,D,P,q,we,ge,ye,Be,Sr,Qe=0,Ie,ot,bt,Lt,li,ui,nt,Zt,gt=new s.Buf8(4),_r,cr,xa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return g;_=F.state,_.mode===he&&(_.mode=ve),G=F.next_out,Ee=F.output,D=F.avail_out,f=F.next_in,ee=F.input,Z=F.avail_in,P=_.hold,q=_.bits,we=Z,ge=D,Zt=y;e:for(;;)switch(_.mode){case S:if(_.wrap===0){_.mode=ve;break}for(;q<16;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(_.wrap&2&&P===35615){_.check=0,gt[0]=P&255,gt[1]=P>>>8&255,_.check=o(_.check,gt,2,0),P=0,q=0,_.mode=I;break}if(_.flags=0,_.head&&(_.head.done=!1),!(_.wrap&1)||(((P&255)<<8)+(P>>8))%31){F.msg="incorrect header check",_.mode=Ue;break}if((P&15)!==E){F.msg="unknown compression method",_.mode=Ue;break}if(P>>>=4,q-=4,nt=(P&15)+8,_.wbits===0)_.wbits=nt;else if(nt>_.wbits){F.msg="invalid window size",_.mode=Ue;break}_.dmax=1<<nt,F.adler=_.check=1,_.mode=P&512?le:he,P=0,q=0;break;case I:for(;q<16;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(_.flags=P,(_.flags&255)!==E){F.msg="unknown compression method",_.mode=Ue;break}if(_.flags&57344){F.msg="unknown header flags set",_.mode=Ue;break}_.head&&(_.head.text=P>>8&1),_.flags&512&&(gt[0]=P&255,gt[1]=P>>>8&255,_.check=o(_.check,gt,2,0)),P=0,q=0,_.mode=R;case R:for(;q<32;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}_.head&&(_.head.time=P),_.flags&512&&(gt[0]=P&255,gt[1]=P>>>8&255,gt[2]=P>>>16&255,gt[3]=P>>>24&255,_.check=o(_.check,gt,4,0)),P=0,q=0,_.mode=B;case B:for(;q<16;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}_.head&&(_.head.xflags=P&255,_.head.os=P>>8),_.flags&512&&(gt[0]=P&255,gt[1]=P>>>8&255,_.check=o(_.check,gt,2,0)),P=0,q=0,_.mode=U;case U:if(_.flags&1024){for(;q<16;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}_.length=P,_.head&&(_.head.extra_len=P),_.flags&512&&(gt[0]=P&255,gt[1]=P>>>8&255,_.check=o(_.check,gt,2,0)),P=0,q=0}else _.head&&(_.head.extra=null);_.mode=Q;case Q:if(_.flags&1024&&(ye=_.length,ye>Z&&(ye=Z),ye&&(_.head&&(nt=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),s.arraySet(_.head.extra,ee,f,ye,nt)),_.flags&512&&(_.check=o(_.check,ee,ye,f)),Z-=ye,f+=ye,_.length-=ye),_.length))break e;_.length=0,_.mode=fe;case fe:if(_.flags&2048){if(Z===0)break e;ye=0;do nt=ee[f+ye++],_.head&&nt&&_.length<65536&&(_.head.name+=String.fromCharCode(nt));while(nt&&ye<Z);if(_.flags&512&&(_.check=o(_.check,ee,ye,f)),Z-=ye,f+=ye,nt)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=oe;case oe:if(_.flags&4096){if(Z===0)break e;ye=0;do nt=ee[f+ye++],_.head&&nt&&_.length<65536&&(_.head.comment+=String.fromCharCode(nt));while(nt&&ye<Z);if(_.flags&512&&(_.check=o(_.check,ee,ye,f)),Z-=ye,f+=ye,nt)break e}else _.head&&(_.head.comment=null);_.mode=ue;case ue:if(_.flags&512){for(;q<16;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(P!==(_.check&65535)){F.msg="header crc mismatch",_.mode=Ue;break}P=0,q=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),F.adler=_.check=0,_.mode=he;break;case le:for(;q<32;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}F.adler=_.check=Ot(P),P=0,q=0,_.mode=V;case V:if(_.havedict===0)return F.next_out=G,F.avail_out=D,F.next_in=f,F.avail_in=Z,_.hold=P,_.bits=q,m;F.adler=_.check=1,_.mode=he;case he:if(Y===N||Y===k)break e;case ve:if(_.last){P>>>=q&7,q-=q&7,_.mode=xt;break}for(;q<3;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}switch(_.last=P&1,P>>>=1,q-=1,P&3){case 0:_.mode=re;break;case 1:if(Gt(_),_.mode=X,Y===k){P>>>=2,q-=2;break e}break;case 2:_.mode=Se;break;case 3:F.msg="invalid block type",_.mode=Ue}P>>>=2,q-=2;break;case re:for(P>>>=q&7,q-=q&7;q<32;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if((P&65535)!==(P>>>16^65535)){F.msg="invalid stored block lengths",_.mode=Ue;break}if(_.length=P&65535,P=0,q=0,_.mode=pe,Y===k)break e;case pe:_.mode=Ae;case Ae:if(ye=_.length,ye){if(ye>Z&&(ye=Z),ye>D&&(ye=D),ye===0)break e;s.arraySet(Ee,ee,f,ye,G),Z-=ye,f+=ye,D-=ye,G+=ye,_.length-=ye;break}_.mode=he;break;case Se:for(;q<14;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(_.nlen=(P&31)+257,P>>>=5,q-=5,_.ndist=(P&31)+1,P>>>=5,q-=5,_.ncode=(P&15)+4,P>>>=4,q-=4,_.nlen>286||_.ndist>30){F.msg="too many length or distance symbols",_.mode=Ue;break}_.have=0,_.mode=Ve;case Ve:for(;_.have<_.ncode;){for(;q<3;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}_.lens[xa[_.have++]]=P&7,P>>>=3,q-=3}for(;_.have<19;)_.lens[xa[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,_r={bits:_.lenbits},Zt=c(d,_.lens,0,19,_.lencode,0,_.work,_r),_.lenbits=_r.bits,Zt){F.msg="invalid code lengths set",_.mode=Ue;break}_.have=0,_.mode=H;case H:for(;_.have<_.nlen+_.ndist;){for(;Qe=_.lencode[P&(1<<_.lenbits)-1],Ie=Qe>>>24,ot=Qe>>>16&255,bt=Qe&65535,!(Ie<=q);){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(bt<16)P>>>=Ie,q-=Ie,_.lens[_.have++]=bt;else{if(bt===16){for(cr=Ie+2;q<cr;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(P>>>=Ie,q-=Ie,_.have===0){F.msg="invalid bit length repeat",_.mode=Ue;break}nt=_.lens[_.have-1],ye=3+(P&3),P>>>=2,q-=2}else if(bt===17){for(cr=Ie+3;q<cr;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}P>>>=Ie,q-=Ie,nt=0,ye=3+(P&7),P>>>=3,q-=3}else{for(cr=Ie+7;q<cr;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}P>>>=Ie,q-=Ie,nt=0,ye=11+(P&127),P>>>=7,q-=7}if(_.have+ye>_.nlen+_.ndist){F.msg="invalid bit length repeat",_.mode=Ue;break}for(;ye--;)_.lens[_.have++]=nt}}if(_.mode===Ue)break;if(_.lens[256]===0){F.msg="invalid code -- missing end-of-block",_.mode=Ue;break}if(_.lenbits=9,_r={bits:_.lenbits},Zt=c(h,_.lens,0,_.nlen,_.lencode,0,_.work,_r),_.lenbits=_r.bits,Zt){F.msg="invalid literal/lengths set",_.mode=Ue;break}if(_.distbits=6,_.distcode=_.distdyn,_r={bits:_.distbits},Zt=c(v,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,_r),_.distbits=_r.bits,Zt){F.msg="invalid distances set",_.mode=Ue;break}if(_.mode=X,Y===k)break e;case X:_.mode=ce;case ce:if(Z>=6&&D>=258){F.next_out=G,F.avail_out=D,F.next_in=f,F.avail_in=Z,_.hold=P,_.bits=q,l(F,ge),G=F.next_out,Ee=F.output,D=F.avail_out,f=F.next_in,ee=F.input,Z=F.avail_in,P=_.hold,q=_.bits,_.mode===he&&(_.back=-1);break}for(_.back=0;Qe=_.lencode[P&(1<<_.lenbits)-1],Ie=Qe>>>24,ot=Qe>>>16&255,bt=Qe&65535,!(Ie<=q);){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(ot&&!(ot&240)){for(Lt=Ie,li=ot,ui=bt;Qe=_.lencode[ui+((P&(1<<Lt+li)-1)>>Lt)],Ie=Qe>>>24,ot=Qe>>>16&255,bt=Qe&65535,!(Lt+Ie<=q);){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}P>>>=Lt,q-=Lt,_.back+=Lt}if(P>>>=Ie,q-=Ie,_.back+=Ie,_.length=bt,ot===0){_.mode=Pe;break}if(ot&32){_.back=-1,_.mode=he;break}if(ot&64){F.msg="invalid literal/length code",_.mode=Ue;break}_.extra=ot&15,_.mode=Ce;case Ce:if(_.extra){for(cr=_.extra;q<cr;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}_.length+=P&(1<<_.extra)-1,P>>>=_.extra,q-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=Ne;case Ne:for(;Qe=_.distcode[P&(1<<_.distbits)-1],Ie=Qe>>>24,ot=Qe>>>16&255,bt=Qe&65535,!(Ie<=q);){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(!(ot&240)){for(Lt=Ie,li=ot,ui=bt;Qe=_.distcode[ui+((P&(1<<Lt+li)-1)>>Lt)],Ie=Qe>>>24,ot=Qe>>>16&255,bt=Qe&65535,!(Lt+Ie<=q);){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}P>>>=Lt,q-=Lt,_.back+=Lt}if(P>>>=Ie,q-=Ie,_.back+=Ie,ot&64){F.msg="invalid distance code",_.mode=Ue;break}_.offset=bt,_.extra=ot&15,_.mode=De;case De:if(_.extra){for(cr=_.extra;q<cr;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}_.offset+=P&(1<<_.extra)-1,P>>>=_.extra,q-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){F.msg="invalid distance too far back",_.mode=Ue;break}_.mode=Fe;case Fe:if(D===0)break e;if(ye=ge-D,_.offset>ye){if(ye=_.offset-ye,ye>_.whave&&_.sane){F.msg="invalid distance too far back",_.mode=Ue;break}ye>_.wnext?(ye-=_.wnext,Be=_.wsize-ye):Be=_.wnext-ye,ye>_.length&&(ye=_.length),Sr=_.window}else Sr=Ee,Be=G-_.offset,ye=_.length;ye>D&&(ye=D),D-=ye,_.length-=ye;do Ee[G++]=Sr[Be++];while(--ye);_.length===0&&(_.mode=ce);break;case Pe:if(D===0)break e;Ee[G++]=_.length,D--,_.mode=ce;break;case xt:if(_.wrap){for(;q<32;){if(Z===0)break e;Z--,P|=ee[f++]<<q,q+=8}if(ge-=D,F.total_out+=ge,_.total+=ge,ge&&(F.adler=_.check=_.flags?o(_.check,Ee,ge,G-ge):a(_.check,Ee,ge,G-ge)),ge=D,(_.flags?P:Ot(P))!==_.check){F.msg="incorrect data check",_.mode=Ue;break}P=0,q=0}_.mode=at;case at:if(_.wrap&&_.flags){for(;q<32;){if(Z===0)break e;Z--,P+=ee[f++]<<q,q+=8}if(P!==(_.total&4294967295)){F.msg="incorrect length check",_.mode=Ue;break}P=0,q=0}_.mode=qt;case qt:Zt=p;break e;case Ue:Zt=w;break e;case pt:return x;case wr:default:return g}return F.next_out=G,F.avail_out=D,F.next_in=f,F.avail_in=Z,_.hold=P,_.bits=q,(_.wsize||ge!==F.avail_out&&_.mode<Ue&&(_.mode<xt||Y!==b))&&vn(F,F.output,F.next_out,ge-F.avail_out),we-=F.avail_in,ge-=F.avail_out,F.total_in+=we,F.total_out+=ge,_.total+=ge,_.wrap&&ge&&(F.adler=_.check=_.flags?o(_.check,Ee,ge,F.next_out-ge):a(_.check,Ee,ge,F.next_out-ge)),F.data_type=_.bits+(_.last?64:0)+(_.mode===he?128:0)+(_.mode===X||_.mode===pe?256:0),(we===0&&ge===0||Y===b)&&Zt===y&&(Zt=C),Zt}function J(F){if(!F||!F.state)return g;var Y=F.state;return Y.window&&(Y.window=null),F.state=null,y}function ne(F,Y){var _;return!F||!F.state||(_=F.state,!(_.wrap&2))?g:(_.head=Y,Y.done=!1,y)}function xe(F,Y){var _=Y.length,ee,Ee,f;return!F||!F.state||(ee=F.state,ee.wrap!==0&&ee.mode!==V)?g:ee.mode===V&&(Ee=1,Ee=a(Ee,Y,_,0),Ee!==ee.check)?w:(f=vn(F,Y,_,_),f?(ee.mode=pt,x):(ee.havedict=1,y))}i.inflateReset=Mt,i.inflateReset2=Xr,i.inflateResetKeep=kr,i.inflateInit=Vt,i.inflateInit2=Cr,i.inflate=j,i.inflateEnd=J,i.inflateGetHeader=ne,i.inflateSetDictionary=xe,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),a=15,o=852,l=592,c=0,d=1,h=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,m,g,w,x,C,E,S){var I=S.bits,R=0,B=0,U=0,Q=0,fe=0,oe=0,ue=0,le=0,V=0,he=0,ve,re,pe,Ae,Se,Ve=null,H=0,X,ce=new s.Buf16(a+1),Ce=new s.Buf16(a+1),Ne=null,De=0,Fe,Pe,xt;for(R=0;R<=a;R++)ce[R]=0;for(B=0;B<w;B++)ce[m[g+B]]++;for(fe=I,Q=a;Q>=1&&ce[Q]===0;Q--);if(fe>Q&&(fe=Q),Q===0)return x[C++]=1<<24|64<<16|0,x[C++]=1<<24|64<<16|0,S.bits=1,0;for(U=1;U<Q&&ce[U]===0;U++);for(fe<U&&(fe=U),le=1,R=1;R<=a;R++)if(le<<=1,le-=ce[R],le<0)return-1;if(le>0&&(p===c||Q!==1))return-1;for(Ce[1]=0,R=1;R<a;R++)Ce[R+1]=Ce[R]+ce[R];for(B=0;B<w;B++)m[g+B]!==0&&(E[Ce[m[g+B]]++]=B);if(p===c?(Ve=Ne=E,X=19):p===d?(Ve=v,H-=257,Ne=b,De-=257,X=256):(Ve=N,Ne=k,X=-1),he=0,B=0,R=U,Se=C,oe=fe,ue=0,pe=-1,V=1<<fe,Ae=V-1,p===d&&V>o||p===h&&V>l)return 1;for(;;){Fe=R-ue,E[B]<X?(Pe=0,xt=E[B]):E[B]>X?(Pe=Ne[De+E[B]],xt=Ve[H+E[B]]):(Pe=96,xt=0),ve=1<<R-ue,re=1<<oe,U=re;do re-=ve,x[Se+(he>>ue)+re]=Fe<<24|Pe<<16|xt|0;while(re!==0);for(ve=1<<R-1;he&ve;)ve>>=1;if(ve!==0?(he&=ve-1,he+=ve):he=0,B++,--ce[R]===0){if(R===Q)break;R=m[g+E[B]]}if(R>fe&&(he&Ae)!==pe){for(ue===0&&(ue=fe),Se+=U,oe=R-ue,le=1<<oe;oe+ue<Q&&(le-=ce[oe+ue],!(le<=0));)oe++,le<<=1;if(V+=1<<oe,p===d&&V>o||p===h&&V>l)return 1;pe=he&Ae,x[pe]=fe<<24|oe<<16|Se-C|0}}return he!==0&&(x[Se+he]=R-ue<<24|64<<16|0),S.bits=fe,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),a=4,o=0,l=1,c=2;function d(j){for(var J=j.length;--J>=0;)j[J]=0}var h=0,v=1,b=2,N=3,k=258,y=29,p=256,m=p+1+y,g=30,w=19,x=2*m+1,C=15,E=16,S=7,I=256,R=16,B=17,U=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=512,V=new Array((m+2)*2);d(V);var he=new Array(g*2);d(he);var ve=new Array(le);d(ve);var re=new Array(k-N+1);d(re);var pe=new Array(y);d(pe);var Ae=new Array(g);d(Ae);function Se(j,J,ne,xe,F){this.static_tree=j,this.extra_bits=J,this.extra_base=ne,this.elems=xe,this.max_length=F,this.has_stree=j&&j.length}var Ve,H,X;function ce(j,J){this.dyn_tree=j,this.max_code=0,this.stat_desc=J}function Ce(j){return j<256?ve[j]:ve[256+(j>>>7)]}function Ne(j,J){j.pending_buf[j.pending++]=J&255,j.pending_buf[j.pending++]=J>>>8&255}function De(j,J,ne){j.bi_valid>E-ne?(j.bi_buf|=J<<j.bi_valid&65535,Ne(j,j.bi_buf),j.bi_buf=J>>E-j.bi_valid,j.bi_valid+=ne-E):(j.bi_buf|=J<<j.bi_valid&65535,j.bi_valid+=ne)}function Fe(j,J,ne){De(j,ne[J*2],ne[J*2+1])}function Pe(j,J){var ne=0;do ne|=j&1,j>>>=1,ne<<=1;while(--J>0);return ne>>>1}function xt(j){j.bi_valid===16?(Ne(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):j.bi_valid>=8&&(j.pending_buf[j.pending++]=j.bi_buf&255,j.bi_buf>>=8,j.bi_valid-=8)}function at(j,J){var ne=J.dyn_tree,xe=J.max_code,F=J.stat_desc.static_tree,Y=J.stat_desc.has_stree,_=J.stat_desc.extra_bits,ee=J.stat_desc.extra_base,Ee=J.stat_desc.max_length,f,G,Z,D,P,q,we=0;for(D=0;D<=C;D++)j.bl_count[D]=0;for(ne[j.heap[j.heap_max]*2+1]=0,f=j.heap_max+1;f<x;f++)G=j.heap[f],D=ne[ne[G*2+1]*2+1]+1,D>Ee&&(D=Ee,we++),ne[G*2+1]=D,!(G>xe)&&(j.bl_count[D]++,P=0,G>=ee&&(P=_[G-ee]),q=ne[G*2],j.opt_len+=q*(D+P),Y&&(j.static_len+=q*(F[G*2+1]+P)));if(we!==0){do{for(D=Ee-1;j.bl_count[D]===0;)D--;j.bl_count[D]--,j.bl_count[D+1]+=2,j.bl_count[Ee]--,we-=2}while(we>0);for(D=Ee;D!==0;D--)for(G=j.bl_count[D];G!==0;)Z=j.heap[--f],!(Z>xe)&&(ne[Z*2+1]!==D&&(j.opt_len+=(D-ne[Z*2+1])*ne[Z*2],ne[Z*2+1]=D),G--)}}function qt(j,J,ne){var xe=new Array(C+1),F=0,Y,_;for(Y=1;Y<=C;Y++)xe[Y]=F=F+ne[Y-1]<<1;for(_=0;_<=J;_++){var ee=j[_*2+1];ee!==0&&(j[_*2]=Pe(xe[ee]++,ee))}}function Ue(){var j,J,ne,xe,F,Y=new Array(C+1);for(ne=0,xe=0;xe<y-1;xe++)for(pe[xe]=ne,j=0;j<1<<Q[xe];j++)re[ne++]=xe;for(re[ne-1]=xe,F=0,xe=0;xe<16;xe++)for(Ae[xe]=F,j=0;j<1<<fe[xe];j++)ve[F++]=xe;for(F>>=7;xe<g;xe++)for(Ae[xe]=F<<7,j=0;j<1<<fe[xe]-7;j++)ve[256+F++]=xe;for(J=0;J<=C;J++)Y[J]=0;for(j=0;j<=143;)V[j*2+1]=8,j++,Y[8]++;for(;j<=255;)V[j*2+1]=9,j++,Y[9]++;for(;j<=279;)V[j*2+1]=7,j++,Y[7]++;for(;j<=287;)V[j*2+1]=8,j++,Y[8]++;for(qt(V,m+1,Y),j=0;j<g;j++)he[j*2+1]=5,he[j*2]=Pe(j,5);Ve=new Se(V,Q,p+1,m,C),H=new Se(he,fe,0,g,C),X=new Se(new Array(0),oe,0,w,S)}function pt(j){var J;for(J=0;J<m;J++)j.dyn_ltree[J*2]=0;for(J=0;J<g;J++)j.dyn_dtree[J*2]=0;for(J=0;J<w;J++)j.bl_tree[J*2]=0;j.dyn_ltree[I*2]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function wr(j){j.bi_valid>8?Ne(j,j.bi_buf):j.bi_valid>0&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function Bt(j,J,ne,xe){wr(j),Ne(j,ne),Ne(j,~ne),s.arraySet(j.pending_buf,j.window,J,ne,j.pending),j.pending+=ne}function _t(j,J,ne,xe){var F=J*2,Y=ne*2;return j[F]<j[Y]||j[F]===j[Y]&&xe[J]<=xe[ne]}function Ze(j,J,ne){for(var xe=j.heap[ne],F=ne<<1;F<=j.heap_len&&(F<j.heap_len&&_t(J,j.heap[F+1],j.heap[F],j.depth)&&F++,!_t(J,xe,j.heap[F],j.depth));)j.heap[ne]=j.heap[F],ne=F,F<<=1;j.heap[ne]=xe}function Te(j,J,ne){var xe,F,Y=0,_,ee;if(j.last_lit!==0)do xe=j.pending_buf[j.d_buf+Y*2]<<8|j.pending_buf[j.d_buf+Y*2+1],F=j.pending_buf[j.l_buf+Y],Y++,xe===0?Fe(j,F,J):(_=re[F],Fe(j,_+p+1,J),ee=Q[_],ee!==0&&(F-=pe[_],De(j,F,ee)),xe--,_=Ce(xe),Fe(j,_,ne),ee=fe[_],ee!==0&&(xe-=Ae[_],De(j,xe,ee)));while(Y<j.last_lit);Fe(j,I,J)}function Ot(j,J){var ne=J.dyn_tree,xe=J.stat_desc.static_tree,F=J.stat_desc.has_stree,Y=J.stat_desc.elems,_,ee,Ee=-1,f;for(j.heap_len=0,j.heap_max=x,_=0;_<Y;_++)ne[_*2]!==0?(j.heap[++j.heap_len]=Ee=_,j.depth[_]=0):ne[_*2+1]=0;for(;j.heap_len<2;)f=j.heap[++j.heap_len]=Ee<2?++Ee:0,ne[f*2]=1,j.depth[f]=0,j.opt_len--,F&&(j.static_len-=xe[f*2+1]);for(J.max_code=Ee,_=j.heap_len>>1;_>=1;_--)Ze(j,ne,_);f=Y;do _=j.heap[1],j.heap[1]=j.heap[j.heap_len--],Ze(j,ne,1),ee=j.heap[1],j.heap[--j.heap_max]=_,j.heap[--j.heap_max]=ee,ne[f*2]=ne[_*2]+ne[ee*2],j.depth[f]=(j.depth[_]>=j.depth[ee]?j.depth[_]:j.depth[ee])+1,ne[_*2+1]=ne[ee*2+1]=f,j.heap[1]=f++,Ze(j,ne,1);while(j.heap_len>=2);j.heap[--j.heap_max]=j.heap[1],at(j,J),qt(ne,Ee,j.bl_count)}function Kr(j,J,ne){var xe,F=-1,Y,_=J[0*2+1],ee=0,Ee=7,f=4;for(_===0&&(Ee=138,f=3),J[(ne+1)*2+1]=65535,xe=0;xe<=ne;xe++)Y=_,_=J[(xe+1)*2+1],!(++ee<Ee&&Y===_)&&(ee<f?j.bl_tree[Y*2]+=ee:Y!==0?(Y!==F&&j.bl_tree[Y*2]++,j.bl_tree[R*2]++):ee<=10?j.bl_tree[B*2]++:j.bl_tree[U*2]++,ee=0,F=Y,_===0?(Ee=138,f=3):Y===_?(Ee=6,f=3):(Ee=7,f=4))}function kr(j,J,ne){var xe,F=-1,Y,_=J[0*2+1],ee=0,Ee=7,f=4;for(_===0&&(Ee=138,f=3),xe=0;xe<=ne;xe++)if(Y=_,_=J[(xe+1)*2+1],!(++ee<Ee&&Y===_)){if(ee<f)do Fe(j,Y,j.bl_tree);while(--ee!==0);else Y!==0?(Y!==F&&(Fe(j,Y,j.bl_tree),ee--),Fe(j,R,j.bl_tree),De(j,ee-3,2)):ee<=10?(Fe(j,B,j.bl_tree),De(j,ee-3,3)):(Fe(j,U,j.bl_tree),De(j,ee-11,7));ee=0,F=Y,_===0?(Ee=138,f=3):Y===_?(Ee=6,f=3):(Ee=7,f=4)}}function Mt(j){var J;for(Kr(j,j.dyn_ltree,j.l_desc.max_code),Kr(j,j.dyn_dtree,j.d_desc.max_code),Ot(j,j.bl_desc),J=w-1;J>=3&&j.bl_tree[ue[J]*2+1]===0;J--);return j.opt_len+=3*(J+1)+5+5+4,J}function Xr(j,J,ne,xe){var F;for(De(j,J-257,5),De(j,ne-1,5),De(j,xe-4,4),F=0;F<xe;F++)De(j,j.bl_tree[ue[F]*2+1],3);kr(j,j.dyn_ltree,J-1),kr(j,j.dyn_dtree,ne-1)}function Cr(j){var J=4093624447,ne;for(ne=0;ne<=31;ne++,J>>>=1)if(J&1&&j.dyn_ltree[ne*2]!==0)return o;if(j.dyn_ltree[9*2]!==0||j.dyn_ltree[10*2]!==0||j.dyn_ltree[13*2]!==0)return l;for(ne=32;ne<p;ne++)if(j.dyn_ltree[ne*2]!==0)return l;return o}var Vt=!1;function Qr(j){Vt||(Ue(),Vt=!0),j.l_desc=new ce(j.dyn_ltree,Ve),j.d_desc=new ce(j.dyn_dtree,H),j.bl_desc=new ce(j.bl_tree,X),j.bi_buf=0,j.bi_valid=0,pt(j)}function Er(j,J,ne,xe){De(j,(h<<1)+(xe?1:0),3),Bt(j,J,ne)}function mt(j){De(j,v<<1,3),Fe(j,I,V),xt(j)}function Gt(j,J,ne,xe){var F,Y,_=0;j.level>0?(j.strm.data_type===c&&(j.strm.data_type=Cr(j)),Ot(j,j.l_desc),Ot(j,j.d_desc),_=Mt(j),F=j.opt_len+3+7>>>3,Y=j.static_len+3+7>>>3,Y<=F&&(F=Y)):F=Y=ne+5,ne+4<=F&&J!==-1?Er(j,J,ne,xe):j.strategy===a||Y===F?(De(j,(v<<1)+(xe?1:0),3),Te(j,V,he)):(De(j,(b<<1)+(xe?1:0),3),Xr(j,j.l_desc.max_code+1,j.d_desc.max_code+1,_+1),Te(j,j.dyn_ltree,j.dyn_dtree)),pt(j),xe&&wr(j)}function vn(j,J,ne){return j.pending_buf[j.d_buf+j.last_lit*2]=J>>>8&255,j.pending_buf[j.d_buf+j.last_lit*2+1]=J&255,j.pending_buf[j.l_buf+j.last_lit]=ne&255,j.last_lit++,J===0?j.dyn_ltree[ne*2]++:(j.matches++,J--,j.dyn_ltree[(re[ne]+p+1)*2]++,j.dyn_dtree[Ce(J)*2]++),j.last_lit===j.lit_bufsize-1}i._tr_init=Qr,i._tr_stored_block=Er,i._tr_flush_block=Gt,i._tr_tally=vn,i._tr_align=mt},{"../utils/common":41}],53:[function(r,n,i){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n.exports=s},{}],54:[function(r,n,i){(function(s){(function(a,o){if(a.setImmediate)return;var l=1,c={},d=!1,h=a.document,v;function b(S){typeof S!="function"&&(S=new Function(""+S));for(var I=new Array(arguments.length-1),R=0;R<I.length;R++)I[R]=arguments[R+1];var B={callback:S,args:I};return c[l]=B,v(l),l++}function N(S){delete c[S]}function k(S){var I=S.callback,R=S.args;switch(R.length){case 0:I();break;case 1:I(R[0]);break;case 2:I(R[0],R[1]);break;case 3:I(R[0],R[1],R[2]);break;default:I.apply(o,R);break}}function y(S){if(d)setTimeout(y,0,S);else{var I=c[S];if(I){d=!0;try{k(I)}finally{N(S),d=!1}}}}function p(){v=function(S){process.nextTick(function(){y(S)})}}function m(){if(a.postMessage&&!a.importScripts){var S=!0,I=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=I,S}}function g(){var S="setImmediate$"+Math.random()+"$",I=function(R){R.source===a&&typeof R.data=="string"&&R.data.indexOf(S)===0&&y(+R.data.slice(S.length))};a.addEventListener?a.addEventListener("message",I,!1):a.attachEvent("onmessage",I),v=function(R){a.postMessage(S+R,"*")}}function w(){var S=new MessageChannel;S.port1.onmessage=function(I){var R=I.data;y(R)},v=function(I){S.port2.postMessage(I)}}function x(){var S=h.documentElement;v=function(I){var R=h.createElement("script");R.onreadystatechange=function(){y(I),R.onreadystatechange=null,S.removeChild(R),R=null},S.appendChild(R)}}function C(){v=function(S){setTimeout(y,0,S)}}var E=Object.getPrototypeOf&&Object.getPrototypeOf(a);E=E&&E.setTimeout?E:a,{}.toString.call(a.process)==="[object process]"?p():m()?g():a.MessageChannel?w():h&&"onreadystatechange"in h.createElement("script")?x():C(),E.setImmediate=b,E.clearImmediate=N})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(kv);var nw=kv.exports;const iw=ii(nw);class sw{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new iw}catch{throw new Error("JSZip lib not loaded")}}open(e,r){return this.zip.loadAsync(e,{base64:r})}openUrl(e,r){return ia(e,"binary").then((function(n){return this.zip.loadAsync(n,{base64:r})}).bind(this))}request(e,r){var n=new Re,i,s=new mn(e);return r||(r=s.extension),r=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then((function(a){let o=this.handleResponse(a,r);n.resolve(o)}).bind(this)):n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise}handleResponse(e,r){var n;return r=="json"?n=JSON.parse(e):na(r)?n=Gr(e,"text/xml"):r=="xhtml"?n=Gr(e,"application/xhtml+xml"):r=="html"||r=="htm"?n=Gr(e,"text/html"):n=e,n}getBlob(e,r){var n=window.decodeURIComponent(e.substr(1)),i=this.zip.file(n);if(i)return r=r||Wi.lookup(i.name),i.async("uint8array").then(function(s){return new Blob([s],{type:r})})}getText(e,r){var n=window.decodeURIComponent(e.substr(1)),i=this.zip.file(n);if(i)return i.async("string").then(function(s){return s})}getBase64(e,r){var n=window.decodeURIComponent(e.substr(1)),i=this.zip.file(n);if(i)return r=r||Wi.lookup(i.name),i.async("base64").then(function(s){return"data:"+r+";base64,"+s})}createUrl(e,r){var n=new Re,i=window.URL||window.webkitURL||window.mozURL,s,a,o=r&&r.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(o?(a=this.getBase64(e),a&&a.then((function(l){this.urlCache[e]=l,n.resolve(l)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(l){s=i.createObjectURL(l),this.urlCache[e]=s,n.resolve(s)}).bind(this))),a||n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var r=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&r.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let r in this.urlCache)e.revokeObjectURL(r);this.zip=void 0,this.urlCache={}}}var Cv={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(c,d){if(!i[c]){if(!n[c]){var h=typeof Nn=="function"&&Nn;if(!d&&h)return h(c,!0);if(o)return o(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var b=i[c]={exports:{}};n[c][0].call(b.exports,function(N){var k=n[c][1][N];return a(k||N)},b,b.exports,r,n,i,s)}return i[c].exports}for(var o=typeof Nn=="function"&&Nn,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(r,n,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,c=new a(N),d=s.document.createTextNode("");c.observe(d,{characterData:!0}),o=function(){d.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=N,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var y=s.document.createElement("script");y.onreadystatechange=function(){N(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:o=function(){setTimeout(N,0)};var v,b=[];function N(){v=!0;for(var y,p,m=b.length;m;){for(p=b,b=[],y=-1;++y<m;)p[y]();m=b.length}v=!1}n.exports=k;function k(y){b.push(y)===1&&!v&&o()}}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var s=r(1);function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];n.exports=h;function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==a&&k(this,x)}h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,C){if(typeof x!="function"&&this.state===c||typeof C!="function"&&this.state===l)return this;var E=new this.constructor(a);if(this.state!==d){var S=this.state===c?x:C;b(E,S,this.outcome)}else this.queue.push(new v(E,x,C));return E};function v(x,C,E){this.promise=x,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},v.prototype.otherCallFulfilled=function(x){b(this.promise,this.onFulfilled,x)},v.prototype.callRejected=function(x){o.reject(this.promise,x)},v.prototype.otherCallRejected=function(x){b(this.promise,this.onRejected,x)};function b(x,C,E){s(function(){var S;try{S=C(E)}catch(I){return o.reject(x,I)}S===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,S)})}o.resolve=function(x,C){var E=y(N,C);if(E.status==="error")return o.reject(x,E.value);var S=E.value;if(S)k(x,S);else{x.state=c,x.outcome=C;for(var I=-1,R=x.queue.length;++I<R;)x.queue[I].callFulfilled(C)}return x},o.reject=function(x,C){x.state=l,x.outcome=C;for(var E=-1,S=x.queue.length;++E<S;)x.queue[E].callRejected(C);return x};function N(x){var C=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof C=="function")return function(){C.apply(x,arguments)}}function k(x,C){var E=!1;function S(U){E||(E=!0,o.reject(x,U))}function I(U){E||(E=!0,o.resolve(x,U))}function R(){C(I,S)}var B=y(R);B.status==="error"&&S(B.value)}function y(x,C){var E={};try{E.value=x(C),E.status="success"}catch(S){E.status="error",E.value=S}return E}h.resolve=p;function p(x){return x instanceof this?x:o.resolve(new this(a),x)}h.reject=m;function m(x){var C=new this(a);return o.reject(C,x)}h.all=g;function g(x){var C=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,S=!1;if(!E)return this.resolve([]);for(var I=new Array(E),R=0,B=-1,U=new this(a);++B<E;)Q(x[B],B);return U;function Q(fe,oe){C.resolve(fe).then(ue,function(le){S||(S=!0,o.reject(U,le))});function ue(le){I[oe]=le,++R===E&&!S&&(S=!0,o.resolve(U,I))}}}h.race=w;function w(x){var C=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,S=!1;if(!E)return this.resolve([]);for(var I=-1,R=new this(a);++I<E;)B(x[I]);return R;function B(U){C.resolve(U).then(function(Q){S||(S=!0,o.resolve(R,Q))},function(Q){S||(S=!0,o.reject(R,Q))})}}},{1:1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};function a(T,z){if(!(T instanceof z))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=o();function c(){try{if(!l||!l.open)return!1;var T=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),z=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!T||z)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(T,z){T=T||[],z=z||{};try{return new Blob(T,z)}catch(O){if(O.name!=="TypeError")throw O;for(var L=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,M=new L,W=0;W<T.length;W+=1)M.append(T[W]);return M.getBlob(z.type)}}typeof Promise>"u"&&r(3);var h=Promise;function v(T,z){z&&T.then(function(L){z(null,L)},function(L){z(L)})}function b(T,z,L){typeof z=="function"&&T.then(z),typeof L=="function"&&T.catch(L)}function N(T){return typeof T!="string"&&(console.warn(T+" used as a key, but it is not a string."),T=String(T)),T}function k(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",p=void 0,m={},g=Object.prototype.toString,w="readonly",x="readwrite";function C(T){for(var z=T.length,L=new ArrayBuffer(z),M=new Uint8Array(L),W=0;W<z;W++)M[W]=T.charCodeAt(W);return L}function E(T){return new h(function(z){var L=T.transaction(y,x),M=d([""]);L.objectStore(y).put(M,"key"),L.onabort=function(W){W.preventDefault(),W.stopPropagation(),z(!1)},L.oncomplete=function(){var W=navigator.userAgent.match(/Chrome\/(\d+)/),O=navigator.userAgent.match(/Edge\//);z(O||!W||parseInt(W[1],10)>=43)}}).catch(function(){return!1})}function S(T){return typeof p=="boolean"?h.resolve(p):E(T).then(function(z){return p=z,p})}function I(T){var z=m[T.name],L={};L.promise=new h(function(M,W){L.resolve=M,L.reject=W}),z.deferredOperations.push(L),z.dbReady?z.dbReady=z.dbReady.then(function(){return L.promise}):z.dbReady=L.promise}function R(T){var z=m[T.name],L=z.deferredOperations.pop();if(L)return L.resolve(),L.promise}function B(T,z){var L=m[T.name],M=L.deferredOperations.pop();if(M)return M.reject(z),M.promise}function U(T,z){return new h(function(L,M){if(m[T.name]=m[T.name]||pe(),T.db)if(z)I(T),T.db.close();else return L(T.db);var W=[T.name];z&&W.push(T.version);var O=l.open.apply(l,W);z&&(O.onupgradeneeded=function(K){var te=O.result;try{te.createObjectStore(T.storeName),K.oldVersion<=1&&te.createObjectStore(y)}catch(se){if(se.name==="ConstraintError")console.warn('The database "'+T.name+'" has been upgraded from version '+K.oldVersion+" to version "+K.newVersion+', but the storage "'+T.storeName+'" already exists.');else throw se}}),O.onerror=function(K){K.preventDefault(),M(O.error)},O.onsuccess=function(){var K=O.result;K.onversionchange=function(te){te.target.close()},L(K),R(T)}})}function Q(T){return U(T,!1)}function fe(T){return U(T,!0)}function oe(T,z){if(!T.db)return!0;var L=!T.db.objectStoreNames.contains(T.storeName),M=T.version<T.db.version,W=T.version>T.db.version;if(M&&(T.version!==z&&console.warn('The database "'+T.name+`" can't be downgraded from version `+T.db.version+" to version "+T.version+"."),T.version=T.db.version),W||L){if(L){var O=T.db.version+1;O>T.version&&(T.version=O)}return!0}return!1}function ue(T){return new h(function(z,L){var M=new FileReader;M.onerror=L,M.onloadend=function(W){var O=btoa(W.target.result||"");z({__local_forage_encoded_blob:!0,data:O,type:T.type})},M.readAsBinaryString(T)})}function le(T){var z=C(atob(T.data));return d([z],{type:T.type})}function V(T){return T&&T.__local_forage_encoded_blob}function he(T){var z=this,L=z._initReady().then(function(){var M=m[z._dbInfo.name];if(M&&M.dbReady)return M.dbReady});return b(L,T,T),L}function ve(T){I(T);for(var z=m[T.name],L=z.forages,M=0;M<L.length;M++){var W=L[M];W._dbInfo.db&&(W._dbInfo.db.close(),W._dbInfo.db=null)}return T.db=null,Q(T).then(function(O){return T.db=O,oe(T)?fe(T):O}).then(function(O){T.db=z.db=O;for(var K=0;K<L.length;K++)L[K]._dbInfo.db=O}).catch(function(O){throw B(T,O),O})}function re(T,z,L,M){M===void 0&&(M=1);try{var W=T.db.transaction(T.storeName,z);L(null,W)}catch(O){if(M>0&&(!T.db||O.name==="InvalidStateError"||O.name==="NotFoundError"))return h.resolve().then(function(){if(!T.db||O.name==="NotFoundError"&&!T.db.objectStoreNames.contains(T.storeName)&&T.version<=T.db.version)return T.db&&(T.version=T.db.version+1),fe(T)}).then(function(){return ve(T).then(function(){re(T,z,L,M-1)})}).catch(L);L(O)}}function pe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ae(T){var z=this,L={db:null};if(T)for(var M in T)L[M]=T[M];var W=m[L.name];W||(W=pe(),m[L.name]=W),W.forages.push(z),z._initReady||(z._initReady=z.ready,z.ready=he);var O=[];function K(){return h.resolve()}for(var te=0;te<W.forages.length;te++){var se=W.forages[te];se!==z&&O.push(se._initReady().catch(K))}var ae=W.forages.slice(0);return h.all(O).then(function(){return L.db=W.db,Q(L)}).then(function(de){return L.db=de,oe(L,z._defaultConfig.version)?fe(L):de}).then(function(de){L.db=W.db=de,z._dbInfo=L;for(var ke=0;ke<ae.length;ke++){var je=ae[ke];je!==z&&(je._dbInfo.db=L.db,je._dbInfo.version=L.version)}})}function Se(T,z){var L=this;T=N(T);var M=new h(function(W,O){L.ready().then(function(){re(L._dbInfo,w,function(K,te){if(K)return O(K);try{var se=te.objectStore(L._dbInfo.storeName),ae=se.get(T);ae.onsuccess=function(){var de=ae.result;de===void 0&&(de=null),V(de)&&(de=le(de)),W(de)},ae.onerror=function(){O(ae.error)}}catch(de){O(de)}})}).catch(O)});return v(M,z),M}function Ve(T,z){var L=this,M=new h(function(W,O){L.ready().then(function(){re(L._dbInfo,w,function(K,te){if(K)return O(K);try{var se=te.objectStore(L._dbInfo.storeName),ae=se.openCursor(),de=1;ae.onsuccess=function(){var ke=ae.result;if(ke){var je=ke.value;V(je)&&(je=le(je));var We=T(je,ke.key,de++);We!==void 0?W(We):ke.continue()}else W()},ae.onerror=function(){O(ae.error)}}catch(ke){O(ke)}})}).catch(O)});return v(M,z),M}function H(T,z,L){var M=this;T=N(T);var W=new h(function(O,K){var te;M.ready().then(function(){return te=M._dbInfo,g.call(z)==="[object Blob]"?S(te.db).then(function(se){return se?z:ue(z)}):z}).then(function(se){re(M._dbInfo,x,function(ae,de){if(ae)return K(ae);try{var ke=de.objectStore(M._dbInfo.storeName);se===null&&(se=void 0);var je=ke.put(se,T);de.oncomplete=function(){se===void 0&&(se=null),O(se)},de.onabort=de.onerror=function(){var We=je.error?je.error:je.transaction.error;K(We)}}catch(We){K(We)}})}).catch(K)});return v(W,L),W}function X(T,z){var L=this;T=N(T);var M=new h(function(W,O){L.ready().then(function(){re(L._dbInfo,x,function(K,te){if(K)return O(K);try{var se=te.objectStore(L._dbInfo.storeName),ae=se.delete(T);te.oncomplete=function(){W()},te.onerror=function(){O(ae.error)},te.onabort=function(){var de=ae.error?ae.error:ae.transaction.error;O(de)}}catch(de){O(de)}})}).catch(O)});return v(M,z),M}function ce(T){var z=this,L=new h(function(M,W){z.ready().then(function(){re(z._dbInfo,x,function(O,K){if(O)return W(O);try{var te=K.objectStore(z._dbInfo.storeName),se=te.clear();K.oncomplete=function(){M()},K.onabort=K.onerror=function(){var ae=se.error?se.error:se.transaction.error;W(ae)}}catch(ae){W(ae)}})}).catch(W)});return v(L,T),L}function Ce(T){var z=this,L=new h(function(M,W){z.ready().then(function(){re(z._dbInfo,w,function(O,K){if(O)return W(O);try{var te=K.objectStore(z._dbInfo.storeName),se=te.count();se.onsuccess=function(){M(se.result)},se.onerror=function(){W(se.error)}}catch(ae){W(ae)}})}).catch(W)});return v(L,T),L}function Ne(T,z){var L=this,M=new h(function(W,O){if(T<0){W(null);return}L.ready().then(function(){re(L._dbInfo,w,function(K,te){if(K)return O(K);try{var se=te.objectStore(L._dbInfo.storeName),ae=!1,de=se.openKeyCursor();de.onsuccess=function(){var ke=de.result;if(!ke){W(null);return}T===0||ae?W(ke.key):(ae=!0,ke.advance(T))},de.onerror=function(){O(de.error)}}catch(ke){O(ke)}})}).catch(O)});return v(M,z),M}function De(T){var z=this,L=new h(function(M,W){z.ready().then(function(){re(z._dbInfo,w,function(O,K){if(O)return W(O);try{var te=K.objectStore(z._dbInfo.storeName),se=te.openKeyCursor(),ae=[];se.onsuccess=function(){var de=se.result;if(!de){M(ae);return}ae.push(de.key),de.continue()},se.onerror=function(){W(se.error)}}catch(de){W(de)}})}).catch(W)});return v(L,T),L}function Fe(T,z){z=k.apply(this,arguments);var L=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||L.name,T.storeName=T.storeName||L.storeName);var M=this,W;if(!T.name)W=h.reject("Invalid arguments");else{var O=T.name===L.name&&M._dbInfo.db,K=O?h.resolve(M._dbInfo.db):Q(T).then(function(te){var se=m[T.name],ae=se.forages;se.db=te;for(var de=0;de<ae.length;de++)ae[de]._dbInfo.db=te;return te});T.storeName?W=K.then(function(te){if(te.objectStoreNames.contains(T.storeName)){var se=te.version+1;I(T);var ae=m[T.name],de=ae.forages;te.close();for(var ke=0;ke<de.length;ke++){var je=de[ke];je._dbInfo.db=null,je._dbInfo.version=se}var We=new h(function(He,dt){var lt=l.open(T.name,se);lt.onerror=function(dr){var as=lt.result;as.close(),dt(dr)},lt.onupgradeneeded=function(){var dr=lt.result;dr.deleteObjectStore(T.storeName)},lt.onsuccess=function(){var dr=lt.result;dr.close(),He(dr)}});return We.then(function(He){ae.db=He;for(var dt=0;dt<de.length;dt++){var lt=de[dt];lt._dbInfo.db=He,R(lt._dbInfo)}}).catch(function(He){throw(B(T,He)||h.resolve()).catch(function(){}),He})}}):W=K.then(function(te){I(T);var se=m[T.name],ae=se.forages;te.close();for(var de=0;de<ae.length;de++){var ke=ae[de];ke._dbInfo.db=null}var je=new h(function(We,He){var dt=l.deleteDatabase(T.name);dt.onerror=function(){var lt=dt.result;lt&&lt.close(),He(dt.error)},dt.onblocked=function(){console.warn('dropInstance blocked for database "'+T.name+'" until all open connections are closed')},dt.onsuccess=function(){var lt=dt.result;lt&&lt.close(),We(lt)}});return je.then(function(We){se.db=We;for(var He=0;He<ae.length;He++){var dt=ae[He];R(dt._dbInfo)}}).catch(function(We){throw(B(T,We)||h.resolve()).catch(function(){}),We})})}return v(W,z),W}var Pe={_driver:"asyncStorage",_initStorage:Ae,_support:c(),iterate:Ve,getItem:Se,setItem:H,removeItem:X,clear:ce,length:Ce,key:Ne,keys:De,dropInstance:Fe};function xt(){return typeof openDatabase=="function"}var at="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qt="~~local_forage_type~",Ue=/^~~local_forage_type~([^~]+)~/,pt="__lfsc__:",wr=pt.length,Bt="arbf",_t="blob",Ze="si08",Te="ui08",Ot="uic8",Kr="si16",kr="si32",Mt="ur16",Xr="ui32",Cr="fl32",Vt="fl64",Qr=wr+Bt.length,Er=Object.prototype.toString;function mt(T){var z=T.length*.75,L=T.length,M,W=0,O,K,te,se;T[T.length-1]==="="&&(z--,T[T.length-2]==="="&&z--);var ae=new ArrayBuffer(z),de=new Uint8Array(ae);for(M=0;M<L;M+=4)O=at.indexOf(T[M]),K=at.indexOf(T[M+1]),te=at.indexOf(T[M+2]),se=at.indexOf(T[M+3]),de[W++]=O<<2|K>>4,de[W++]=(K&15)<<4|te>>2,de[W++]=(te&3)<<6|se&63;return ae}function Gt(T){var z=new Uint8Array(T),L="",M;for(M=0;M<z.length;M+=3)L+=at[z[M]>>2],L+=at[(z[M]&3)<<4|z[M+1]>>4],L+=at[(z[M+1]&15)<<2|z[M+2]>>6],L+=at[z[M+2]&63];return z.length%3===2?L=L.substring(0,L.length-1)+"=":z.length%3===1&&(L=L.substring(0,L.length-2)+"=="),L}function vn(T,z){var L="";if(T&&(L=Er.call(T)),T&&(L==="[object ArrayBuffer]"||T.buffer&&Er.call(T.buffer)==="[object ArrayBuffer]")){var M,W=pt;T instanceof ArrayBuffer?(M=T,W+=Bt):(M=T.buffer,L==="[object Int8Array]"?W+=Ze:L==="[object Uint8Array]"?W+=Te:L==="[object Uint8ClampedArray]"?W+=Ot:L==="[object Int16Array]"?W+=Kr:L==="[object Uint16Array]"?W+=Mt:L==="[object Int32Array]"?W+=kr:L==="[object Uint32Array]"?W+=Xr:L==="[object Float32Array]"?W+=Cr:L==="[object Float64Array]"?W+=Vt:z(new Error("Failed to get type for BinaryArray"))),z(W+Gt(M))}else if(L==="[object Blob]"){var O=new FileReader;O.onload=function(){var K=qt+T.type+"~"+Gt(this.result);z(pt+_t+K)},O.readAsArrayBuffer(T)}else try{z(JSON.stringify(T))}catch(K){console.error("Couldn't convert value into a JSON string: ",T),z(null,K)}}function j(T){if(T.substring(0,wr)!==pt)return JSON.parse(T);var z=T.substring(Qr),L=T.substring(wr,Qr),M;if(L===_t&&Ue.test(z)){var W=z.match(Ue);M=W[1],z=z.substring(W[0].length)}var O=mt(z);switch(L){case Bt:return O;case _t:return d([O],{type:M});case Ze:return new Int8Array(O);case Te:return new Uint8Array(O);case Ot:return new Uint8ClampedArray(O);case Kr:return new Int16Array(O);case Mt:return new Uint16Array(O);case kr:return new Int32Array(O);case Xr:return new Uint32Array(O);case Cr:return new Float32Array(O);case Vt:return new Float64Array(O);default:throw new Error("Unkown type: "+L)}}var J={serialize:vn,deserialize:j,stringToBuffer:mt,bufferToString:Gt};function ne(T,z,L,M){T.executeSql("CREATE TABLE IF NOT EXISTS "+z.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],L,M)}function xe(T){var z=this,L={db:null};if(T)for(var M in T)L[M]=typeof T[M]!="string"?T[M].toString():T[M];var W=new h(function(O,K){try{L.db=openDatabase(L.name,String(L.version),L.description,L.size)}catch(te){return K(te)}L.db.transaction(function(te){ne(te,L,function(){z._dbInfo=L,O()},function(se,ae){K(ae)})},K)});return L.serializer=J,W}function F(T,z,L,M,W,O){T.executeSql(L,M,W,function(K,te){te.code===te.SYNTAX_ERR?K.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[z.storeName],function(se,ae){ae.rows.length?O(se,te):ne(se,z,function(){se.executeSql(L,M,W,O)},O)},O):O(K,te)},O)}function Y(T,z){var L=this;T=N(T);var M=new h(function(W,O){L.ready().then(function(){var K=L._dbInfo;K.db.transaction(function(te){F(te,K,"SELECT * FROM "+K.storeName+" WHERE key = ? LIMIT 1",[T],function(se,ae){var de=ae.rows.length?ae.rows.item(0).value:null;de&&(de=K.serializer.deserialize(de)),W(de)},function(se,ae){O(ae)})})}).catch(O)});return v(M,z),M}function _(T,z){var L=this,M=new h(function(W,O){L.ready().then(function(){var K=L._dbInfo;K.db.transaction(function(te){F(te,K,"SELECT * FROM "+K.storeName,[],function(se,ae){for(var de=ae.rows,ke=de.length,je=0;je<ke;je++){var We=de.item(je),He=We.value;if(He&&(He=K.serializer.deserialize(He)),He=T(He,We.key,je+1),He!==void 0){W(He);return}}W()},function(se,ae){O(ae)})})}).catch(O)});return v(M,z),M}function ee(T,z,L,M){var W=this;T=N(T);var O=new h(function(K,te){W.ready().then(function(){z===void 0&&(z=null);var se=z,ae=W._dbInfo;ae.serializer.serialize(z,function(de,ke){ke?te(ke):ae.db.transaction(function(je){F(je,ae,"INSERT OR REPLACE INTO "+ae.storeName+" (key, value) VALUES (?, ?)",[T,de],function(){K(se)},function(We,He){te(He)})},function(je){if(je.code===je.QUOTA_ERR){if(M>0){K(ee.apply(W,[T,se,L,M-1]));return}te(je)}})})}).catch(te)});return v(O,L),O}function Ee(T,z,L){return ee.apply(this,[T,z,L,1])}function f(T,z){var L=this;T=N(T);var M=new h(function(W,O){L.ready().then(function(){var K=L._dbInfo;K.db.transaction(function(te){F(te,K,"DELETE FROM "+K.storeName+" WHERE key = ?",[T],function(){W()},function(se,ae){O(ae)})})}).catch(O)});return v(M,z),M}function G(T){var z=this,L=new h(function(M,W){z.ready().then(function(){var O=z._dbInfo;O.db.transaction(function(K){F(K,O,"DELETE FROM "+O.storeName,[],function(){M()},function(te,se){W(se)})})}).catch(W)});return v(L,T),L}function Z(T){var z=this,L=new h(function(M,W){z.ready().then(function(){var O=z._dbInfo;O.db.transaction(function(K){F(K,O,"SELECT COUNT(key) as c FROM "+O.storeName,[],function(te,se){var ae=se.rows.item(0).c;M(ae)},function(te,se){W(se)})})}).catch(W)});return v(L,T),L}function D(T,z){var L=this,M=new h(function(W,O){L.ready().then(function(){var K=L._dbInfo;K.db.transaction(function(te){F(te,K,"SELECT key FROM "+K.storeName+" WHERE id = ? LIMIT 1",[T+1],function(se,ae){var de=ae.rows.length?ae.rows.item(0).key:null;W(de)},function(se,ae){O(ae)})})}).catch(O)});return v(M,z),M}function P(T){var z=this,L=new h(function(M,W){z.ready().then(function(){var O=z._dbInfo;O.db.transaction(function(K){F(K,O,"SELECT key FROM "+O.storeName,[],function(te,se){for(var ae=[],de=0;de<se.rows.length;de++)ae.push(se.rows.item(de).key);M(ae)},function(te,se){W(se)})})}).catch(W)});return v(L,T),L}function q(T){return new h(function(z,L){T.transaction(function(M){M.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(W,O){for(var K=[],te=0;te<O.rows.length;te++)K.push(O.rows.item(te).name);z({db:T,storeNames:K})},function(W,O){L(O)})},function(M){L(M)})})}function we(T,z){z=k.apply(this,arguments);var L=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||L.name,T.storeName=T.storeName||L.storeName);var M=this,W;return T.name?W=new h(function(O){var K;T.name===L.name?K=M._dbInfo.db:K=openDatabase(T.name,"","",0),T.storeName?O({db:K,storeNames:[T.storeName]}):O(q(K))}).then(function(O){return new h(function(K,te){O.db.transaction(function(se){function ae(We){return new h(function(He,dt){se.executeSql("DROP TABLE IF EXISTS "+We,[],function(){He()},function(lt,dr){dt(dr)})})}for(var de=[],ke=0,je=O.storeNames.length;ke<je;ke++)de.push(ae(O.storeNames[ke]));h.all(de).then(function(){K()}).catch(function(We){te(We)})},function(se){te(se)})})}):W=h.reject("Invalid arguments"),v(W,z),W}var ge={_driver:"webSQLStorage",_initStorage:xe,_support:xt(),iterate:_,getItem:Y,setItem:Ee,removeItem:f,clear:G,length:Z,key:D,keys:P,dropInstance:we};function ye(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Be(T,z){var L=T.name+"/";return T.storeName!==z.storeName&&(L+=T.storeName+"/"),L}function Sr(){var T="_localforage_support_test";try{return localStorage.setItem(T,!0),localStorage.removeItem(T),!1}catch{return!0}}function Qe(){return!Sr()||localStorage.length>0}function Ie(T){var z=this,L={};if(T)for(var M in T)L[M]=T[M];return L.keyPrefix=Be(T,z._defaultConfig),Qe()?(z._dbInfo=L,L.serializer=J,h.resolve()):h.reject()}function ot(T){var z=this,L=z.ready().then(function(){for(var M=z._dbInfo.keyPrefix,W=localStorage.length-1;W>=0;W--){var O=localStorage.key(W);O.indexOf(M)===0&&localStorage.removeItem(O)}});return v(L,T),L}function bt(T,z){var L=this;T=N(T);var M=L.ready().then(function(){var W=L._dbInfo,O=localStorage.getItem(W.keyPrefix+T);return O&&(O=W.serializer.deserialize(O)),O});return v(M,z),M}function Lt(T,z){var L=this,M=L.ready().then(function(){for(var W=L._dbInfo,O=W.keyPrefix,K=O.length,te=localStorage.length,se=1,ae=0;ae<te;ae++){var de=localStorage.key(ae);if(de.indexOf(O)===0){var ke=localStorage.getItem(de);if(ke&&(ke=W.serializer.deserialize(ke)),ke=T(ke,de.substring(K),se++),ke!==void 0)return ke}}});return v(M,z),M}function li(T,z){var L=this,M=L.ready().then(function(){var W=L._dbInfo,O;try{O=localStorage.key(T)}catch{O=null}return O&&(O=O.substring(W.keyPrefix.length)),O});return v(M,z),M}function ui(T){var z=this,L=z.ready().then(function(){for(var M=z._dbInfo,W=localStorage.length,O=[],K=0;K<W;K++){var te=localStorage.key(K);te.indexOf(M.keyPrefix)===0&&O.push(te.substring(M.keyPrefix.length))}return O});return v(L,T),L}function nt(T){var z=this,L=z.keys().then(function(M){return M.length});return v(L,T),L}function Zt(T,z){var L=this;T=N(T);var M=L.ready().then(function(){var W=L._dbInfo;localStorage.removeItem(W.keyPrefix+T)});return v(M,z),M}function gt(T,z,L){var M=this;T=N(T);var W=M.ready().then(function(){z===void 0&&(z=null);var O=z;return new h(function(K,te){var se=M._dbInfo;se.serializer.serialize(z,function(ae,de){if(de)te(de);else try{localStorage.setItem(se.keyPrefix+T,ae),K(O)}catch(ke){(ke.name==="QuotaExceededError"||ke.name==="NS_ERROR_DOM_QUOTA_REACHED")&&te(ke),te(ke)}})})});return v(W,L),W}function _r(T,z){if(z=k.apply(this,arguments),T=typeof T!="function"&&T||{},!T.name){var L=this.config();T.name=T.name||L.name,T.storeName=T.storeName||L.storeName}var M=this,W;return T.name?W=new h(function(O){T.storeName?O(Be(T,M._defaultConfig)):O(T.name+"/")}).then(function(O){for(var K=localStorage.length-1;K>=0;K--){var te=localStorage.key(K);te.indexOf(O)===0&&localStorage.removeItem(te)}}):W=h.reject("Invalid arguments"),v(W,z),W}var cr={_driver:"localStorageWrapper",_initStorage:Ie,_support:ye(),iterate:Lt,getItem:bt,setItem:gt,removeItem:Zt,clear:ot,length:nt,key:li,keys:ui,dropInstance:_r},xa=function(z,L){return z===L||typeof z=="number"&&typeof L=="number"&&isNaN(z)&&isNaN(L)},Rv=function(z,L){for(var M=z.length,W=0;W<M;){if(xa(z[W],L))return!0;W++}return!1},Fd=Array.isArray||function(T){return Object.prototype.toString.call(T)==="[object Array]"},ss={},Od={},ci={INDEXEDDB:Pe,WEBSQL:ge,LOCALSTORAGE:cr},zv=[ci.INDEXEDDB._driver,ci.WEBSQL._driver,ci.LOCALSTORAGE._driver],ba=["dropInstance"],yl=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ba),Pv={description:"",driver:zv.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Fv(T,z){T[z]=function(){var L=arguments;return T.ready().then(function(){return T[z].apply(T,L)})}}function xl(){for(var T=1;T<arguments.length;T++){var z=arguments[T];if(z)for(var L in z)z.hasOwnProperty(L)&&(Fd(z[L])?arguments[0][L]=z[L].slice():arguments[0][L]=z[L])}return arguments[0]}var Ov=function(){function T(z){a(this,T);for(var L in ci)if(ci.hasOwnProperty(L)){var M=ci[L],W=M._driver;this[L]=W,ss[W]||this.defineDriver(M)}this._defaultConfig=xl({},Pv),this._config=xl({},this._defaultConfig,z),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return T.prototype.config=function(L){if((typeof L>"u"?"undefined":s(L))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var M in L){if(M==="storeName"&&(L[M]=L[M].replace(/\W/g,"_")),M==="version"&&typeof L[M]!="number")return new Error("Database version must be a number.");this._config[M]=L[M]}return"driver"in L&&L.driver?this.setDriver(this._config.driver):!0}else return typeof L=="string"?this._config[L]:this._config},T.prototype.defineDriver=function(L,M,W){var O=new h(function(K,te){try{var se=L._driver,ae=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!L._driver){te(ae);return}for(var de=yl.concat("_initStorage"),ke=0,je=de.length;ke<je;ke++){var We=de[ke],He=!Rv(ba,We);if((He||L[We])&&typeof L[We]!="function"){te(ae);return}}var dt=function(){for(var as=function(Wv){return function(){var Hv=new Error("Method "+Wv+" is not implemented by the current driver"),Md=h.reject(Hv);return v(Md,arguments[arguments.length-1]),Md}},bl=0,Uv=ba.length;bl<Uv;bl++){var wl=ba[bl];L[wl]||(L[wl]=as(wl))}};dt();var lt=function(as){ss[se]&&console.info("Redefining LocalForage driver: "+se),ss[se]=L,Od[se]=as,K()};"_support"in L?L._support&&typeof L._support=="function"?L._support().then(lt,te):lt(!!L._support):lt(!0)}catch(dr){te(dr)}});return b(O,M,W),O},T.prototype.driver=function(){return this._driver||null},T.prototype.getDriver=function(L,M,W){var O=ss[L]?h.resolve(ss[L]):h.reject(new Error("Driver not found."));return b(O,M,W),O},T.prototype.getSerializer=function(L){var M=h.resolve(J);return b(M,L),M},T.prototype.ready=function(L){var M=this,W=M._driverSet.then(function(){return M._ready===null&&(M._ready=M._initDriver()),M._ready});return b(W,L,L),W},T.prototype.setDriver=function(L,M,W){var O=this;Fd(L)||(L=[L]);var K=this._getSupportedDrivers(L);function te(){O._config.driver=O.driver()}function se(ke){return O._extend(ke),te(),O._ready=O._initStorage(O._config),O._ready}function ae(ke){return function(){var je=0;function We(){for(;je<ke.length;){var He=ke[je];return je++,O._dbInfo=null,O._ready=null,O.getDriver(He).then(se).catch(We)}te();var dt=new Error("No available storage method found.");return O._driverSet=h.reject(dt),O._driverSet}return We()}}var de=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=de.then(function(){var ke=K[0];return O._dbInfo=null,O._ready=null,O.getDriver(ke).then(function(je){O._driver=je._driver,te(),O._wrapLibraryMethodsWithReady(),O._initDriver=ae(K)})}).catch(function(){te();var ke=new Error("No available storage method found.");return O._driverSet=h.reject(ke),O._driverSet}),b(this._driverSet,M,W),this._driverSet},T.prototype.supports=function(L){return!!Od[L]},T.prototype._extend=function(L){xl(this,L)},T.prototype._getSupportedDrivers=function(L){for(var M=[],W=0,O=L.length;W<O;W++){var K=L[W];this.supports(K)&&M.push(K)}return M},T.prototype._wrapLibraryMethodsWithReady=function(){for(var L=0,M=yl.length;L<M;L++)Fv(this,yl[L])},T.prototype.createInstance=function(L){return new T(L)},T}(),Mv=new Ov;n.exports=Mv},{3:3}]},{},[4])(4)})})(Cv);var aw=Cv.exports;const Wf=ii(aw);class Ev{constructor(e,r,n){this.urlCache={},this.storage=void 0,this.name=e,this.requester=r||ia,this.resolver=n,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof Wf>"u"&&(e=Wf),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let r=navigator.onLine;this.online=r,r?this.emit("online",this):this.emit("offline",this)}add(e,r){let n=e.resources.map(i=>{let{href:s}=i,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(l=>!l||r?this.requester(a,"binary").then(c=>this.storage.setItem(o,c)):l)});return Promise.all(n)}put(e,r,n){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(s=>s||this.requester(e,"binary",r,n).then(a=>this.storage.setItem(i,a)))}request(e,r,n,i){return this.online?this.requester(e,r,n,i).then(s=>(this.put(e),s)):this.retrieve(e,r)}retrieve(e,r){new Re;var n,i=new mn(e);return r||(r=i.extension),r=="blob"?n=this.getBlob(e):n=this.getText(e),n.then(s=>{var a=new Re,o;return s?(o=this.handleResponse(s,r),a.resolve(o)):a.reject({message:"File not found in storage: "+e,stack:new Error().stack}),a.promise})}handleResponse(e,r){var n;return r=="json"?n=JSON.parse(e):na(r)?n=Gr(e,"text/xml"):r=="xhtml"?n=Gr(e,"application/xhtml+xml"):r=="html"||r=="htm"?n=Gr(e,"text/html"):n=e,n}getBlob(e,r){let n=window.encodeURIComponent(e);return this.storage.getItem(n).then(function(i){if(i)return r=r||Wi.lookup(e),new Blob([i],{type:r})})}getText(e,r){let n=window.encodeURIComponent(e);return r=r||Wi.lookup(e),this.storage.getItem(n).then(function(i){var s=new Re,a=new FileReader,o;if(i)return o=new Blob([i],{type:r}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,r),s.promise})}getBase64(e,r){let n=window.encodeURIComponent(e);return r=r||Wi.lookup(e),this.storage.getItem(n).then(i=>{var s=new Re,a=new FileReader,o;if(i)return o=new Blob([i],{type:r}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,r),s.promise})}createUrl(e,r){var n=new Re,i=window.URL||window.webkitURL||window.mozURL,s,a,o=r&&r.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(o?(a=this.getBase64(e),a&&a.then((function(l){this.urlCache[e]=l,n.resolve(l)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(l){s=i.createObjectURL(l),this.urlCache[e]=s,n.resolve(s)}).bind(this))),a||n.reject({message:"File not found in storage: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var r=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&r.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let r in this.urlCache)e.revokeObjectURL(r);this.urlCache={},this.removeListeners()}}Yr(Ev.prototype);class ou{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const r=Ge(e,"display_options");return r?(pn(r,"option").forEach(i=>{let s="";switch(i.childNodes.length&&(s=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const Hf="META-INF/container.xml",ow="META-INF/com.apple.ibooks.display-options.xml",Dr={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class Id{constructor(e,r){typeof r>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(r=e,e=void 0),this.settings=At(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),At(this.settings,r),this.opening=new Re,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new Re,spine:new Re,metadata:new Re,cover:new Re,navigation:new Re,pageList:new Re,resources:new Re,displayOptions:new Re},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||ia,this.spine=new S1,this.locations=new av(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(n=>{var i=new Error("Cannot load book at "+e);this.emit(me.BOOK.OPEN_FAILED,i)})}open(e,r){var n,i=r||this.determineType(e);return i===Dr.BINARY?(this.archived=!0,this.url=new Ar("/",""),n=this.openEpub(e)):i===Dr.BASE64?(this.archived=!0,this.url=new Ar("/",""),n=this.openEpub(e,i)):i===Dr.EPUB?(this.archived=!0,this.url=new Ar("/",""),n=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==Dr.OPF?(this.url=new Ar(e),n=this.openPackaging(this.url.Path.toString())):i==Dr.MANIFEST?(this.url=new Ar(e),n=this.openManifest(this.url.Path.toString())):(this.url=new Ar(e),n=this.openContainer(Hf).then(this.openPackaging.bind(this))),n}openEpub(e,r){return this.unarchive(e,r||this.settings.encoding).then(()=>this.openContainer(Hf)).then(n=>this.openPackaging(n))}openContainer(e){return this.load(e).then(r=>(this.container=new _1(r),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new mn(e),this.load(e).then(r=>(this.packaging=new If(r),this.unpack(this.packaging)))}openManifest(e){return this.path=new mn(e),this.load(e).then(r=>(this.packaging=new If,this.packaging.load(r),this.unpack(this.packaging)))}load(e){var r=this.resolve(e);return this.archived?this.archive.request(r):this.request(r,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,r){if(e){var n=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(n=this.path.resolve(e)),r!=!1&&this.url&&(n=this.url.resolve(n)),n)}}canonical(e){var r=e;return e?(this.settings.canonical?r=this.settings.canonical(e):r=this.resolve(e,!0),r):""}determineType(e){var r,n,i;if(this.settings.encoding==="base64")return Dr.BASE64;if(typeof e!="string")return Dr.BINARY;if(r=new Ar(e),n=r.path(),i=n.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return Dr.DIRECTORY;if(i==="epub")return Dr.EPUB;if(i==="opf")return Dr.OPF;if(i==="json")return Dr.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(ow)).then(r=>{this.displayOptions=new ou(r),this.loading.displayOptions.resolve(this.displayOptions)}).catch(r=>{this.displayOptions=new ou,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new ou,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new A1(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(r=>{console.error(r)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let r=e.navPath||e.ncxPath,n=e.toc;return n?new Promise((i,s)=>{this.navigation=new iu(n),e.pageList&&(this.pageList=new su(e.pageList)),i(this.navigation)}):r?this.load(r,"xml").then(i=>(this.navigation=new iu(i),this.pageList=new su(i),this.navigation)):new Promise((i,s)=>{this.navigation=new iu,this.pageList=new su,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,r){return this.rendition=new Ld(this,r),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,r){return this.archive=new sw,this.archive.open(e,r)}store(e){let r=this.settings.replacements&&this.settings.replacements!=="none",n=this.url,i=this.settings.requestMethod||ia.bind(this);return this.storage=new Ev(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=r||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Ar("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=n,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,r)=>{r.output=this.resources.substitute(e,r.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var r=new ze(e),n=this.spine.get(r.spinePos),i=this.load.bind(this);return n?n.load(i).then(function(s){var a=r.toRange(n.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var r=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${fl}:${r}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}Yr(Id.prototype);function oi(t,e){return new Id(t,e)}oi.VERSION=fl;typeof global<"u"&&(global.EPUBJS_VERSION=fl);oi.Book=Id;oi.Rendition=Ld;oi.Contents=Ad;oi.CFI=ze;oi.utils=v1;class Rd{constructor(e){this.isDestroyed=!1;try{this.book=oi(e)}catch(r){throw Oe("EPUB_PARSER_INIT_FAILED",r,{fileName:e.name,fileSize:e.size}),r}}async initialize(){try{if(this.isDestroyed)throw new Error("Parser has been destroyed");return await this.book.ready,this}catch(e){throw Oe("EPUB_PARSER_READY_FAILED",e),e}}async getMetadata(){try{if(this.isDestroyed)throw new Error("Parser has been destroyed");await this.book.ready;const e=this.book.packaging.metadata;let r;try{const n=await this.book.coverUrl();if(n){const i=await fetch(n);if(!i.ok)throw new Error(`Failed to fetch cover: ${i.status}`);const s=await i.blob();if(s.size===0)throw new Error("Cover image is empty");const a=`temp-${Date.now()}`;await lf(a,s),r=URL.createObjectURL(s)}}catch(n){console.warn("Could not load cover image:",n),Oe("COVER_LOAD_FAILED",n)}return{title:e.title||"Unknown Title",author:e.creator||"Unknown Author",cover:r}}catch(e){throw Oe("GET_METADATA_FAILED",e),e}}async getTableOfContents(){try{if(this.isDestroyed)throw new Error("Parser has been destroyed");await this.book.ready;const e=await this.book.loaded.navigation,r=[],n=(i,s=0)=>{r.push({id:i.id||`chapter-${s}`,title:i.label||`Chapter ${s+1}`,content:"",href:i.href,order:s});let a=s+1;return i.subitems&&i.subitems.forEach(o=>{a=n(o,a)}),a};return e.toc&&e.toc.length>0?e.toc.forEach((i,s)=>{n(i,s)}):this.book.spine.each((i,s)=>{r.push({id:i.idref||`chapter-${s}`,title:i.href||`Chapter ${s+1}`,content:"",href:i.href,order:s})}),r}catch(e){throw Oe("GET_TOC_FAILED",e),e}}async getChapterContent(e){try{if(this.isDestroyed)throw new Error("Parser has been destroyed");const r=this.book.spine.get(e);if(!r)throw new Error(`Chapter not found: ${e}`);const n=await r.load(this.book.load.bind(this.book));if(!n)throw new Error(`Failed to load chapter content: ${e}`);return n.innerHTML||n.textContent||""}catch(r){return console.error("Error loading chapter content:",r),Oe("GET_CHAPTER_CONTENT_FAILED",r,{href:e}),"<p>Error loading chapter content.</p>"}}async getAllChapters(){try{if(this.isDestroyed)throw new Error("Parser has been destroyed");const e=await this.getTableOfContents();return await Promise.all(e.map(async n=>{try{const i=await this.getChapterContent(n.href);return{...n,content:i}}catch(i){return console.warn(`Failed to load content for chapter: ${n.title}`,i),{...n,content:"<p>Failed to load chapter content.</p>"}}}))}catch(e){throw Oe("GET_ALL_CHAPTERS_FAILED",e),e}}async searchText(e){try{if(this.isDestroyed)throw new Error("Parser has been destroyed");const r=await this.getAllChapters(),n=[];return r.forEach((i,s)=>{try{const a=this.stripHtml(i.content),o=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),l=[];let c;for(;(c=o.exec(a))!==null;){const d=Math.max(0,c.index-50),h=Math.min(a.length,c.index+c[0].length+50),v=a.substring(d,h);l.push({text:v,position:c.index,start:c.index-d,end:c.index-d+c[0].length}),o.lastIndex===c.index&&o.lastIndex++}l.length>0&&n.push({chapterIndex:s,matches:l})}catch(a){console.warn(`Search failed for chapter ${s}:`,a)}}),n}catch(r){throw Oe("SEARCH_TEXT_FAILED",r,{query:e}),r}}stripHtml(e){try{const r=document.createElement("div");return r.innerHTML=e,r.textContent||r.innerText||""}catch(r){return console.warn("Failed to strip HTML:",r),e}}async cacheCoverImage(e){try{if(this.isDestroyed)throw new Error("Parser has been destroyed");const r=await this.book.coverUrl();if(r){const n=await fetch(r);if(!n.ok)throw new Error(`Failed to fetch cover: ${n.status}`);const i=await n.blob();if(i.size===0)throw new Error("Cover image is empty");await lf(e,i)}}catch(r){console.warn("Could not cache cover image:",r),Oe("CACHE_COVER_FAILED",r,{bookId:e})}}destroy(){try{this.isDestroyed=!0,this.book&&(this.book.destroy(),this.book=null),this.rendition&&(this.rendition.destroy(),this.rendition=null)}catch(e){console.warn("Error during parser destruction:",e)}}}const lw=async t=>{try{if(!t||t.size===0)throw new Error("Invalid file: File is empty or corrupted");if(!t.name.toLowerCase().endsWith(".epub"))throw new Error("Invalid file type: Only EPUB files are supported");const e=new Rd(t);await e.initialize();const r=await e.getMetadata(),n={title:r.title,author:r.author,cover:r.cover,file:t,addedAt:new Date,progress:0,currentChapter:0,scrollPosition:0};return e.destroy(),n}catch(e){throw Oe("CREATE_BOOK_FROM_FILE_FAILED",e,{fileName:t==null?void 0:t.name,fileSize:t==null?void 0:t.size}),e}},uw={myLibrary:{en:"My Library",pt:"Minha Biblioteca",de:"Mijn Bibliotheek",es:"Mi biblioteca",ru:" ",ja:"",zh:"",fr:"Ma bibliothque"},readingHistory:{en:"My Statistics",pt:"Minhas Estatsticas",de:"Meine Statistiken",es:"Mis Estadsticas",ru:" ",ja:"",zh:"",fr:"Mes Statistiques"},trackYourProgress:{en:"Track your progress",pt:"Acompanhe seu progresso",de:"Verfolgen Sie Ihren Fortschritt",es:"Rastrea tu progreso",ru:"  ",ja:"",zh:"",fr:"Suivez vos progrs"},books:{en:"books",pt:"livros",de:"Bcher",es:"libros",ru:"",ja:"",zh:"",fr:"livres"},book:{en:"book",pt:"livro",de:"Buch",es:"libro",ru:"",ja:"",zh:"",fr:"livre"},addBook:{en:"Add Book",pt:"Adicionar Livro",de:"Buch hinzufgen",es:"Agregar Libro",ru:" ",ja:"",zh:"",fr:"Ajouter un Livre"},searchBooks:{en:"Search books by title or author...",pt:"Pesquisar livros por ttulo ou autor...",de:"Bcher nach Titel oder Autor suchen...",es:"Buscar libros por ttulo o autor...",ru:"     ...",ja:"...",zh:"...",fr:"Rechercher des livres par titre ou auteur..."},noBooksYet:{en:"No books yet",pt:"Ainda no h livros",de:"Noch keine Bcher",es:"An no hay libros",ru:"  ",ja:"",zh:"",fr:"Pas encore de livres"},addFirstBook:{en:"Add your first EPUB book to get started reading",pt:"Adicione seu primeiro livro EPUB para comear a ler",de:"Fgen Sie Ihr erstes EPUB-Buch hinzu, um mit dem Lesen zu beginnen",es:"Agrega tu primer libro EPUB para comenzar a leer",ru:"    EPUB,   ",ja:"EPUB",zh:"EPUB",fr:"Ajoutez votre premier livre EPUB pour commencer  lire"},addYourFirstBook:{en:"Add Your First Book",pt:"Adicione Seu Primeiro Livro",de:"Fgen Sie Ihr erstes Buch hinzu",es:"Agrega Tu Primer Libro",ru:"   ",ja:"",zh:"",fr:"Ajoutez Votre Premier Livre"},noBooksFound:{en:"No books found",pt:"Nenhum livro encontrado",de:"Keine Bcher gefunden",es:"No se encontraron libros",ru:"  ",ja:"",zh:"",fr:"Aucun livre trouv"},tryAdjustingSearch:{en:"Try adjusting your search terms",pt:"Tente ajustar seus termos de pesquisa",de:"Versuchen Sie, Ihre Suchbegriffe anzupassen",es:"Intenta ajustar tus trminos de bsqueda",ru:"   ",ja:"",zh:"",fr:"Essayez d'ajuster vos termes de recherche"},lastRead:{en:"Last read",pt:"ltima leitura",de:"Zuletzt gelesen",es:"ltima lectura",ru:" ",ja:"",zh:"",fr:"Dernire lecture"},delete:{en:"Delete",pt:"Excluir",de:"Lschen",es:"Eliminar",ru:"",ja:"",zh:"",fr:"Supprimer"},confirmDeleteBook:{en:"Are you sure you want to delete this book? This action cannot be undone.",pt:"Tem certeza de que deseja excluir este livro? Esta ao no pode ser desfeita.",de:"Sind Sie sicher, dass Sie dieses Buch lschen mchten? Diese Aktion kann nicht rckgngig gemacht werden.",es:"Ests seguro de que quieres eliminar este libro? Esta accin no se puede deshacer.",ru:" ,     ?    .",ja:"",zh:"",fr:"tes-vous sr de vouloir supprimer ce livre ? Cette action ne peut pas tre annule."},never:{en:"Never",pt:"Nunca",de:"Nie",es:"Nunca",ru:"",ja:"",zh:"",fr:"Jamais"},justNow:{en:"Just now",pt:"Agora mesmo",de:"Gerade eben",es:"Ahora mismo",ru:" ",ja:"",zh:"",fr:" l'instant"},hoursAgo:{en:"h ago",pt:"h atrs",de:"h her",es:"h atrs",ru:" ",ja:"",zh:"",fr:"h il y a"},daysAgo:{en:"d ago",pt:"d atrs",de:"d her",es:"d atrs",ru:" ",ja:"",zh:"",fr:"j il y a"},loadingLibrary:{en:"Loading your library...",pt:"Carregando sua biblioteca...",de:"Lade deine Bibliothek...",es:"Cargando tu biblioteca...",ru:"  ...",ja:"...",zh:"...",fr:"Chargement de votre bibliothque..."},complete:{en:"Complete",pt:"Completo",de:"Vollstndig",es:"Completo",ru:"",ja:"",zh:"",fr:"Termin"},viewMode:{en:"View Mode",pt:"Modo de Visualizao",de:"Ansichtsmodus",es:"Modo de Vista",ru:" ",ja:"",zh:"",fr:"Mode d'Affichage"},coverView:{en:"Cover View",pt:"Visualizao de Capa",de:"Cover-Ansicht",es:"Vista de Portada",ru:" ",ja:"",zh:"",fr:"Vue Couverture"},detailView:{en:"Detail View",pt:"Visualizao Detalhada",de:"Detail-Ansicht",es:"Vista Detallada",ru:" ",ja:"",zh:"",fr:"Vue Dtaille"},dragAndDropEbook:{en:"Drag & Drop eBook",pt:"Arrastar e Soltar eBook",de:"eBook hierher ziehen",es:"Arrastra y Suelta eBook",ru:" eBook",ja:"eBook&",zh:"",fr:"Glisser-Dposer eBook"},selectEbook:{en:"Select eBook",pt:"Selecionar eBook",de:"eBook auswhlen",es:"Seleccionar eBook",ru:" eBook",ja:"eBook",zh:"",fr:"Slectionner eBook"},openStatistics:{en:"Open Statistics",pt:"Abrir Estatsticas",de:"Statistiken ffnen",es:"Abrir Estadsticas",ru:" ",ja:"",zh:"",fr:"Ouvrir les Statistiques"},addNewBook:{en:"Add New Book",pt:"Adicionar Novo Livro",de:"Neues Buch hinzufgen",es:"Agregar Nuevo Libro",ru:"  ",ja:"",zh:"",fr:"Ajouter un Nouveau Livre"},uploadEpubFile:{en:"Upload an EPUB file to start reading",pt:"Carregue um arquivo EPUB para comear a ler",de:"Laden Sie eine EPUB-Datei hoch, um mit dem Lesen zu beginnen",es:"Sube un archivo EPUB para comenzar a leer",ru:"  EPUB,   ",ja:"EPUB",zh:"EPUB",fr:"Tlchargez un fichier EPUB pour commencer  lire"},dropEpubHere:{en:"Drop your EPUB file here",pt:"Solte seu arquivo EPUB aqui",de:"Legen Sie Ihre EPUB-Datei hier ab",es:"Suelta tu archivo EPUB aqu",ru:"   EPUB ",ja:"EPUB",zh:"EPUB",fr:"Dposez votre fichier EPUB ici"},dragAndDropEpub:{en:"Drag and drop your EPUB file",pt:"Arraste e solte seu arquivo EPUB",de:"Ziehen Sie Ihre EPUB-Datei hierher",es:"Arrastra y suelta tu archivo EPUB",ru:"   EPUB",ja:"EPUB&",zh:"EPUB",fr:"Glissez-dposez votre fichier EPUB"},or:{en:"or",pt:"ou",de:"oder",es:"o",ru:"",ja:"",zh:"",fr:"ou"},chooseFile:{en:"Choose File",pt:"Escolher Arquivo",de:"Datei auswhlen",es:"Elegir Archivo",ru:" ",ja:"",zh:"",fr:"Choisir un Fichier"},processing:{en:"Processing...",pt:"Processando...",de:"Verarbeitung...",es:"Procesando...",ru:"...",ja:"...",zh:"...",fr:"Traitement..."},supportedFormat:{en:"Supported format: EPUB",pt:"Formato suportado: EPUB",de:"Untersttztes Format: EPUB",es:"Formato compatible: EPUB",ru:" : EPUB",ja:": EPUB",zh:": EPUB",fr:"Format pris en charge : EPUB"},pleaseSelectEpub:{en:"Please select an EPUB file",pt:"Por favor, selecione um arquivo EPUB",de:"Bitte whlen Sie eine EPUB-Datei aus",es:"Por favor selecciona un archivo EPUB",ru:",   EPUB",ja:"EPUB",zh:"EPUB",fr:"Veuillez slectionner un fichier EPUB"},failedToProcessEpub:{en:"Failed to process EPUB file. Please ensure it is a valid EPUB format.",pt:"Falha ao processar arquivo EPUB. Certifique-se de que  um formato EPUB vlido.",de:"EPUB-Datei konnte nicht verarbeitet werden. Stellen Sie sicher, dass es sich um ein gltiges EPUB-Format handelt.",es:"Error al procesar el archivo EPUB. Asegrate de que sea un formato EPUB vlido.",ru:"    EPUB. ,     EPUB.",ja:"EPUBEPUB",zh:"EPUBEPUB",fr:"chec du traitement du fichier EPUB. Veuillez vous assurer qu'il s'agit d'un format EPUB valide."},pleaseDropEpub:{en:"Please drop an EPUB file",pt:"Por favor, solte um arquivo EPUB",de:"Bitte legen Sie eine EPUB-Datei ab",es:"Por favor suelta un archivo EPUB",ru:",   EPUB",ja:"EPUB",zh:"EPUB",fr:"Veuillez dposer un fichier EPUB"},closeUploader:{en:"Close uploader",pt:"Fechar carregador",de:"Uploader schlieen",es:"Cerrar cargador",ru:" ",ja:"",zh:"",fr:"Fermer le tlchargeur"},backToLibrary:{en:"Back to library",pt:"Voltar  biblioteca",de:"Zurck zur Bibliothek",es:"Volver a la biblioteca",ru:"  ",ja:"",zh:"",fr:"Retour  la bibliothque"},backToHome:{en:"Back to Home",pt:"Voltar ao Incio",de:"Zurck zur Startseite",es:"Volver al Inicio",ru:"  ",ja:"",zh:"",fr:"Retour  l'Accueil"},home:{en:"Home",pt:"Incio",de:"Startseite",es:"Inicio",ru:"",ja:"",zh:"",fr:"Accueil"},tableOfContents:{en:"Table of contents",pt:"ndice",de:"Inhaltsverzeichnis",es:"Tabla de contenidos",ru:"",ja:"",zh:"",fr:"Table des matires"},chapter:{en:"Chapter",pt:"Captulo",de:"Kapitel",es:"Captulo",ru:"",ja:"",zh:"",fr:"Chapitre"},of:{en:"of",pt:"de",de:"von",es:"de",ru:"",ja:"",zh:"",fr:"de"},search:{en:"Search",pt:"Pesquisar",de:"Suchen",es:"Buscar",ru:"",ja:"",zh:"",fr:"Rechercher"},bookmarks:{en:"Bookmarks",pt:"Marcadores",de:"Lesezeichen",es:"Marcadores",ru:"",ja:"",zh:"",fr:"Signets"},addToFavorites:{en:"Add to favorites",pt:"Adicionar aos favoritos",de:"Zu Favoriten hinzufgen",es:"Agregar a favoritos",ru:"  ",ja:"",zh:"",fr:"Ajouter aux favoris"},share:{en:"Share",pt:"Compartilhar",de:"Teilen",es:"Compartir",ru:"",ja:"",zh:"",fr:"Partager"},settings:{en:"Settings",pt:"Configuraes",de:"Einstellungen",es:"Configuraciones",ru:"",ja:"",zh:"",fr:"Paramtres"},homePageSettings:{en:"Settings",pt:"Configuraes",de:"Einstellungen",es:"Configuraciones",ru:"",ja:"",zh:"",fr:"Paramtres"},fullscreen:{en:"Fullscreen",pt:"Tela cheia",de:"Vollbild",es:"Pantalla completa",ru:" ",ja:"",zh:"",fr:"Plein cran"},addFavorite:{en:"Add Favorite",pt:"Adicionar Favorito",de:"Favorit hinzufgen",es:"Agregar Favorito",ru:"  ",ja:"",zh:"",fr:"Ajouter un Favori"},enterBookmarkName:{en:"Enter bookmark name...",pt:"Digite o nome do marcador...",de:"Lesezeichen-Name eingeben...",es:"Ingresa el nombre del marcador...",ru:"  ...",ja:"...",zh:"...",fr:"Entrez le nom du signet..."},save:{en:"Save",pt:"Salvar",de:"Speichern",es:"Guardar",ru:"",ja:"",zh:"",fr:"Enregistrer"},cancel:{en:"Cancel",pt:"Cancelar",de:"Abbrechen",es:"Cancelar",ru:"",ja:"",zh:"",fr:"Annuler"},noChaptersAvailable:{en:"No chapters available",pt:"Nenhum captulo disponvel",de:"Keine Kapitel verfgbar",es:"No hay captulos disponibles",ru:"  ",ja:"",zh:"",fr:"Aucun chapitre disponible"},currentlyReading:{en:"Currently reading",pt:"Lendo atualmente",de:"Derzeit lesen",es:"Leyendo actualmente",ru:" ",ja:"",zh:"",fr:"En cours de lecture"},chaptersTotal:{en:"chapters",pt:"captulos",de:"Kapitel",es:"captulos",ru:"",ja:"",zh:"",fr:"chapitres"},readingSettings:{en:"Reading Settings",pt:"Configuraes de Leitura",de:"Lese-Einstellungen",es:"Configuraciones de Lectura",ru:" ",ja:"",zh:"",fr:"Paramtres de Lecture"},language:{en:"Language",pt:"Idioma",de:"Sprache",es:"Idioma",ru:"",ja:"",zh:"",fr:"Langue"},automatic:{en:"Automatic",pt:"Automtico",de:"Automatisch",es:"Automtico",ru:"",ja:"",zh:"",fr:"Automatique"},closeSettings:{en:"Close settings",pt:"Fechar configuraes",de:"Einstellungen schlieen",es:"Cerrar configuraciones",ru:" ",ja:"",zh:"",fr:"Fermer les paramtres"},loadingReadingHistory:{en:"Loading reading history...",pt:"Carregando histrico de leitura...",de:"Lade Lesehistorie...",es:"Cargando historial de lectura...",ru:"  ...",ja:"...",zh:"...",fr:"Chargement de l'historique de lecture..."},chapterHistory:{en:"Chapter History",pt:"Histrico de Captulos",de:"Kapitel-Historie",es:"Historial de Captulos",ru:" ",ja:"",zh:"",fr:"Historique des Chapitres"},bookHistory:{en:"Book History",pt:"Histrico de Livros",de:"Buch-Historie",es:"Historial de Libros",ru:" ",ja:"",zh:"",fr:"Historique des Livres"},statistics:{en:"Statistics",pt:"Estatsticas",de:"Statistiken",es:"Estadsticas",ru:"",ja:"",zh:"",fr:"Statistiques"},trends:{en:"Trends",pt:"Tendncias",de:"Trends",es:"Tendencias",ru:"",ja:"",zh:"",fr:"Tendances"},totalTime:{en:"Total Time",pt:"Tempo Total",de:"Gesamtzeit",es:"Tiempo Total",ru:" ",ja:"",zh:"",fr:"Temps Total"},chaptersCompleted:{en:"Chapters Completed",pt:"Captulos Concludos",de:"Kapitel Abgeschlossen",es:"Captulos Completados",ru:" ",ja:"",zh:"",fr:"Chapitres Termins"},autoFormat:{en:"Auto Format",pt:"Formato Automtico",de:"Auto-Format",es:"Formato Automtico",ru:" ",ja:"",zh:"",fr:"Format Automatique"},minutes:{en:"Minutes",pt:"Minutos",de:"Minuten",es:"Minutos",ru:"",ja:"",zh:"",fr:"Minutes"},hours:{en:"Hours",pt:"Horas",de:"Stunden",es:"Horas",ru:"",ja:"",zh:"",fr:"Heures"},detailed:{en:"Detailed",pt:"Detalhado",de:"Detailliert",es:"Detallado",ru:"",ja:"",zh:"",fr:"Dtaill"},exporting:{en:"Exporting...",pt:"Exportando...",de:"Exportiere...",es:"Exportando...",ru:"...",ja:"...",zh:"...",fr:"Exportation..."},exportData:{en:"Export Data",pt:"Exportar Dados",de:"Daten exportieren",es:"Exportar Datos",ru:" ",ja:"",zh:"",fr:"Exporter les Donnes"},searchBooksOrChapters:{en:"Search books or chapters...",pt:"Pesquisar livros ou captulos...",de:"Bcher oder Kapitel suchen...",es:"Buscar libros o captulos...",ru:"   ...",ja:"...",zh:"...",fr:"Rechercher des livres ou des chapitres..."},sortByDate:{en:"Sort by Date",pt:"Ordenar por Data",de:"Nach Datum sortieren",es:"Ordenar por Fecha",ru:"  ",ja:"",zh:"",fr:"Trier par Date"},sortByDuration:{en:"Sort by Duration",pt:"Ordenar por Durao",de:"Nach Dauer sortieren",es:"Ordenar por Duracin",ru:"  ",ja:"",zh:"",fr:"Trier par Dure"},sortByBook:{en:"Sort by Book",pt:"Ordenar por Livro",de:"Nach Buch sortieren",es:"Ordenar por Libro",ru:"  ",ja:"",zh:"",fr:"Trier par Livre"},sortByChapter:{en:"Sort by Chapter",pt:"Ordenar por Captulo",de:"Nach Kapitel sortieren",es:"Ordenar por Captulo",ru:"  ",ja:"",zh:"",fr:"Trier par Chapitre"},allTime:{en:"All Time",pt:"Todo o Tempo",de:"Alle Zeit",es:"Todo el Tiempo",ru:" ",ja:"",zh:"",fr:"Tout le Temps"},today:{en:"Today",pt:"Hoje",de:"Heute",es:"Hoy",ru:"",ja:"",zh:"",fr:"Aujourd'hui"},thisWeek:{en:"This Week",pt:"Esta Semana",de:"Diese Woche",es:"Esta Semana",ru:"  ",ja:"",zh:"",fr:"Cette Semaine"},thisMonth:{en:"This Month",pt:"Este Ms",de:"Diesen Monat",es:"Este Mes",ru:"  ",ja:"",zh:"",fr:"Ce Mois"},completedOnly:{en:"Completed Only",pt:"Apenas Concludos",de:"Nur Abgeschlossene",es:"Solo Completados",ru:" ",ja:"",zh:"",fr:"Termins Seulement"},inProgress:{en:"In Progress",pt:"Em Progresso",de:"In Bearbeitung",es:"En Progreso",ru:" ",ja:"",zh:"",fr:"En Cours"},translate:{en:"Translate",pt:"Traduzir",de:"bersetzen",es:"Traducir",ru:"",ja:"",zh:"",fr:"Traduire"},originalText:{en:"Show Original",pt:"Mostrar Original",de:"Original anzeigen",es:"Mostrar Original",ru:" ",ja:"",zh:"",fr:"Afficher l'Original"},translating:{en:"Translating...",pt:"Traduzindo...",de:"bersetze...",es:"Traduciendo...",ru:"...",ja:"...",zh:"...",fr:"Traduction..."},experimentalFeature:{en:"Experimental Feature",pt:"Recurso Experimental",de:"Experimentelle Funktion",es:"Funcin Experimental",ru:" ",ja:"",zh:"",fr:"Fonctionnalit Exprimentale"},experimentalWarning:{en:"My Statistics is currently in experimental phase. Data accuracy and performance may vary as we continue to improve this feature.",pt:"Minhas Estatsticas est atualmente em fase experimental. A preciso dos dados e o desempenho podem variar conforme continuamos a melhorar este recurso.",de:"Meine Statistiken befinden sich derzeit in der experimentellen Phase. Datengenauigkeit und Leistung knnen variieren, whrend wir diese Funktion weiter verbessern.",es:"Mis Estadsticas est actualmente en fase experimental. La precisin de los datos y el rendimiento pueden variar mientras continuamos mejorando esta funcin.",ru:"        .           .",ja:"",zh:"",fr:"Mes Statistiques est actuellement en phase exprimentale. La prcision des donnes et les performances peuvent varier alors que nous continuons  amliorer cette fonctionnalit."},autoTranslate:{en:"Auto Translate (Experimental)",pt:"Traduo Automtica (Experimental)",de:"Auto-bersetzung (Experimentell)",es:"Traduccin Automtica (Experimental)",ru:" ()",ja:"",zh:"",fr:"Traduction Automatique (Exprimental)"},streakRequirement:{en:"Streak features require at least 30 minutes of daily reading time",pt:"Recursos de sequncia requerem pelo menos 30 minutos de tempo de leitura dirio",de:"Streak-Funktionen erfordern mindestens 30 Minuten tgliche Lesezeit",es:"Las funciones de racha requieren al menos 30 minutos de tiempo de lectura diario",ru:"     30    ",ja:"130",zh:"30",fr:"Les fonctionnalits de srie ncessitent au moins 30 minutes de temps de lecture quotidien"},totalReadingTime:{en:"Total Reading Time",pt:"Tempo Total de Leitura",de:"Gesamte Lesezeit",es:"Tiempo Total de Lectura",ru:"  ",ja:"",zh:"",fr:"Temps Total de Lecture"},timeSpentReadingAcrossAllBooks:{en:"Time spent reading across all books",pt:"Tempo gasto lendo todos os livros",de:"Zeit, die mit dem Lesen aller Bcher verbracht wurde",es:"Tiempo dedicado a leer todos los libros",ru:",     ",ja:"",zh:"",fr:"Temps pass  lire tous les livres"},totalChaptersFinished:{en:"Total chapters you've finished reading",pt:"Total de captulos que voc terminou de ler",de:"Gesamtzahl der Kapitel, die Sie gelesen haben",es:"Total de captulos que has terminado de leer",ru:"  ,   ",ja:"",zh:"",fr:"Nombre total de chapitres que vous avez termins"},booksStarted:{en:"Books Started",pt:"Livros Iniciados",de:"Begonnene Bcher",es:"Libros Iniciados",ru:" ",ja:"",zh:"",fr:"Livres Commencs"},numberOfBooksBegun:{en:"Number of books you've begun reading",pt:"Nmero de livros que voc comeou a ler",de:"Anzahl der Bcher, die Sie zu lesen begonnen haben",es:"Nmero de libros que has comenzado a leer",ru:" ,    ",ja:"",zh:"",fr:"Nombre de livres que vous avez commenc  lire"},booksCompleted:{en:"Books Completed",pt:"Livros Concludos",de:"Abgeschlossene Bcher",es:"Libros Completados",ru:" ",ja:"",zh:"",fr:"Livres Termins"},booksReadFromStartToFinish:{en:"Books you've read from start to finish",pt:"Livros que voc leu do incio ao fim",de:"Bcher, die Sie von Anfang bis Ende gelesen haben",es:"Libros que has ledo de principio a fin",ru:",       ",ja:"",zh:"",fr:"Livres que vous avez lus du dbut  la fin"},averageSession:{en:"Average Session",pt:"Sesso Mdia",de:"Durchschnittliche Sitzung",es:"Sesin Promedio",ru:" ",ja:"",zh:"",fr:"Session Moyenne"},averageTimePerReadingSession:{en:"Average time per reading session",pt:"Tempo mdio por sesso de leitura",de:"Durchschnittliche Zeit pro Lesesitzung",es:"Tiempo promedio por sesin de lectura",ru:"    ",ja:"",zh:"",fr:"Temps moyen par session de lecture"},longestSession:{en:"Longest Session",pt:"Sesso Mais Longa",de:"Lngste Sitzung",es:"Sesin Ms Larga",ru:"  ",ja:"",zh:"",fr:"Session la Plus Longue"},longestSingleReadingSession:{en:"Your longest single reading session",pt:"Sua sesso de leitura mais longa",de:"Ihre lngste einzelne Lesesitzung",es:"Tu sesin de lectura ms larga",ru:"    ",ja:"",zh:"",fr:"Votre plus longue session de lecture"},currentStreak:{en:"Current Streak",pt:"Sequncia Atual",de:"Aktuelle Serie",es:"Racha Actual",ru:" ",ja:"",zh:"",fr:"Srie Actuelle"},consecutiveDaysWithReadingActivity:{en:"Consecutive days with reading activity",pt:"Dias consecutivos com atividade de leitura",de:"Aufeinanderfolgende Tage mit Leseaktivitt",es:"Das consecutivos con actividad de lectura",ru:"    ",ja:"",zh:"",fr:"Jours conscutifs avec activit de lecture"},longestStreak:{en:"Longest Streak",pt:"Sequncia Mais Longa",de:"Lngste Serie",es:"Racha Ms Larga",ru:"  ",ja:"",zh:"",fr:"Plus Longue Srie"},bestReadingStreakEver:{en:"Your best reading streak ever",pt:"Sua melhor sequncia de leitura de todos os tempos",de:"Ihre beste Leseserie aller Zeiten",es:"Tu mejor racha de lectura de todos los tiempos",ru:"      ",ja:"",zh:"",fr:"Votre meilleure srie de lecture de tous les temps"},days:{en:"days",pt:"dias",de:"Tage",es:"das",ru:"",ja:"",zh:"",fr:"jours"},day:{en:"day",pt:"dia",de:"Tag",es:"da",ru:"",ja:"",zh:"",fr:"jour"},note:{en:"Note",pt:"Nota",de:"Hinweis",es:"Nota",ru:"",ja:"",zh:"",fr:"Note"},readingAverages:{en:"Reading Averages",pt:"Mdias de Leitura",de:"Lese-Durchschnitte",es:"Promedios de Lectura",ru:"  ",ja:"",zh:"",fr:"Moyennes de Lecture"},dailyAverage:{en:"Daily Average",pt:"Mdia Diria",de:"Tglicher Durchschnitt",es:"Promedio Diario",ru:" ",ja:"",zh:"",fr:"Moyenne Quotidienne"},averageReadingTimePerDay:{en:"Average reading time per day (last 90 days)",pt:"Tempo mdio de leitura por dia (ltimos 90 dias)",de:"Durchschnittliche Lesezeit pro Tag (letzte 90 Tage)",es:"Tiempo promedio de lectura por da (ltimos 90 das)",ru:"     ( 90 )",ja:"190",zh:"90",fr:"Temps de lecture moyen par jour (90 derniers jours)"},weeklyAverage:{en:"Weekly Average",pt:"Mdia Semanal",de:"Wchentlicher Durchschnitt",es:"Promedio Semanal",ru:" ",ja:"",zh:"",fr:"Moyenne Hebdomadaire"},averageReadingTimePerWeek:{en:"Average reading time per week",pt:"Tempo mdio de leitura por semana",de:"Durchschnittliche Lesezeit pro Woche",es:"Tiempo promedio de lectura por semana",ru:"    ",ja:"",zh:"",fr:"Temps de lecture moyen par semaine"},monthlyAverage:{en:"Monthly Average",pt:"Mdia Mensal",de:"Monatlicher Durchschnitt",es:"Promedio Mensual",ru:" ",ja:"",zh:"",fr:"Moyenne Mensuelle"},averageReadingTimePerMonth:{en:"Average reading time per month",pt:"Tempo mdio de leitura por ms",de:"Durchschnittliche Lesezeit pro Monat",es:"Tiempo promedio de lectura por mes",ru:"    ",ja:"",zh:"",fr:"Temps de lecture moyen par mois"},achievementHighlights:{en:"Achievement Highlights",pt:"Destaques de Conquistas",de:"Erfolgs-Highlights",es:"Aspectos Destacados de Logros",ru:" ",ja:"",zh:"",fr:"Points Forts des Ralisations"},completionRate:{en:"Completion Rate",pt:"Taxa de Concluso",de:"Abschlussrate",es:"Tasa de Finalizacin",ru:" ",ja:"",zh:"",fr:"Taux d'Achvement"},readingConsistency:{en:"Reading Consistency",pt:"Consistncia de Leitura",de:"Lese-Konsistenz",es:"Consistencia de Lectura",ru:" ",ja:"",zh:"",fr:"Cohrence de Lecture"},requires30MinDaily:{en:"Requires 30+ min daily",pt:"Requer 30+ min dirios",de:"Erfordert 30+ Min tglich",es:"Requiere 30+ min diarios",ru:" 30+  ",ja:"30",zh:"30",fr:"Ncessite 30+ min quotidiennes"},readingInsights:{en:"Reading Insights",pt:"Insights de Leitura",de:"Lese-Einblicke",es:"Perspectivas de Lectura",ru:" ",ja:"",zh:"",fr:"Aperus de Lecture"},readingHabits:{en:"Reading Habits",pt:"Hbitos de Leitura",de:"Lesegewohnheiten",es:"Hbitos de Lectura",ru:" ",ja:"",zh:"",fr:"Habitudes de Lecture"},averageSessionLength:{en:"Average session length",pt:"Durao mdia da sesso",de:"Durchschnittliche Sitzungsdauer",es:"Duracin promedio de sesin",ru:"  ",ja:"",zh:"",fr:"Dure moyenne de session"},dailyReadingGoalProgress:{en:"Daily reading goal progress",pt:"Progresso da meta diria de leitura",de:"Fortschritt des tglichen Leseziels",es:"Progreso de la meta diaria de lectura",ru:"   ",ja:"",zh:"",fr:"Progrs de l'objectif de lecture quotidien"},noData:{en:"No data",pt:"Sem dados",de:"Keine Daten",es:"Sin datos",ru:" ",ja:"",zh:"",fr:"Aucune donne"},buildDailyHabit:{en:"Build daily habit",pt:"Construir hbito dirio",de:"Tgliche Gewohnheit aufbauen",es:"Construir hbito diario",ru:"  ",ja:"",zh:"",fr:"Construire une habitude quotidienne"},excellent:{en:"Excellent",pt:"Excelente",de:"Ausgezeichnet",es:"Excelente",ru:"",ja:"",zh:"",fr:"Excellent"},good:{en:"Good",pt:"Bom",de:"Gut",es:"Bueno",ru:"",ja:"",zh:"",fr:"Bon"},gettingStarted:{en:"Getting started",pt:"Comeando",de:"Erste Schritte",es:"Empezando",ru:"",ja:"",zh:"",fr:"Commencer"},needsImprovement:{en:"Needs improvement",pt:"Precisa melhorar",de:"Verbesserung erforderlich",es:"Necesita mejorar",ru:" ",ja:"",zh:"",fr:"Ncessite une amlioration"},progressSummary:{en:"Progress Summary",pt:"Resumo do Progresso",de:"Fortschritts-Zusammenfassung",es:"Resumen de Progreso",ru:" ",ja:"",zh:"",fr:"Rsum des Progrs"},booksInProgress:{en:"Books in progress",pt:"Livros em progresso",de:"Bcher in Bearbeitung",es:"Libros en progreso",ru:"  ",ja:"",zh:"",fr:"Livres en cours"},bestStreak:{en:"Best streak",pt:"Melhor sequncia",de:"Beste Serie",es:"Mejor racha",ru:" ",ja:"",zh:"",fr:"Meilleure srie"},readingStatistics:{en:"Reading Statistics",pt:"Estatsticas de Leitura",de:"Lese-Statistiken",es:"Estadsticas de Lectura",ru:" ",ja:"",zh:"",fr:"Statistiques de Lecture"},readingTrends:{en:"Reading Trends",pt:"Tendncias de Leitura",de:"Lese-Trends",es:"Tendencias de Lectura",ru:" ",ja:"",zh:"",fr:"Tendances de Lecture"},loadingReadingTrends:{en:"Loading reading trends...",pt:"Carregando tendncias de leitura...",de:"Lade Lese-Trends...",es:"Cargando tendencias de lectura...",ru:"  ...",ja:"...",zh:"...",fr:"Chargement des tendances de lecture..."},period:{en:"Period",pt:"Perodo",de:"Zeitraum",es:"Perodo",ru:"",ja:"",zh:"",fr:"Priode"},last7Days:{en:"Last 7 days",pt:"ltimos 7 dias",de:"Letzte 7 Tage",es:"ltimos 7 das",ru:" 7 ",ja:"7",zh:"7",fr:"7 derniers jours"},last30Days:{en:"Last 30 days",pt:"ltimos 30 dias",de:"Letzte 30 Tage",es:"ltimos 30 das",ru:" 30 ",ja:"30",zh:"30",fr:"30 derniers jours"},last90Days:{en:"Last 90 days",pt:"ltimos 90 dias",de:"Letzte 90 Tage",es:"ltimos 90 das",ru:" 90 ",ja:"90",zh:"90",fr:"90 derniers jours"},lastYear:{en:"Last year",pt:"ltimo ano",de:"Letztes Jahr",es:"ltimo ao",ru:" ",ja:"1",zh:"",fr:"Dernire anne"},activeDays:{en:"Active Days",pt:"Dias Ativos",de:"Aktive Tage",es:"Das Activos",ru:" ",ja:"",zh:"",fr:"Jours Actifs"},sessions:{en:"Sessions",pt:"Sesses",de:"Sitzungen",es:"Sesiones",ru:"",ja:"",zh:"",fr:"Sessions"},dailyReadingActivity:{en:"Daily Reading Activity",pt:"Atividade Diria de Leitura",de:"Tgliche Leseaktivitt",es:"Actividad Diaria de Lectura",ru:"  ",ja:"",zh:"",fr:"Activit de Lecture Quotidienne"},noReadingDataAvailable:{en:"No reading data available for this period",pt:"Nenhum dado de leitura disponvel para este perodo",de:"Keine Lesedaten fr diesen Zeitraum verfgbar",es:"No hay datos de lectura disponibles para este perodo",ru:"      ",ja:"",zh:"",fr:"Aucune donne de lecture disponible pour cette priode"},highActivity:{en:"High activity",pt:"Alta atividade",de:"Hohe Aktivitt",es:"Alta actividad",ru:" ",ja:"",zh:"",fr:"Activit leve"},mediumActivity:{en:"Medium activity",pt:"Atividade mdia",de:"Mittlere Aktivitt",es:"Actividad media",ru:" ",ja:"",zh:"",fr:"Activit moyenne"},lowActivity:{en:"Low activity",pt:"Baixa atividade",de:"Geringe Aktivitt",es:"Baja actividad",ru:" ",ja:"",zh:"",fr:"Activit faible"},noActivity:{en:"No activity",pt:"Sem atividade",de:"Keine Aktivitt",es:"Sin actividad",ru:" ",ja:"",zh:"",fr:"Aucune activit"},weeklyBreakdown:{en:"Weekly Breakdown",pt:"Diviso Semanal",de:"Wchentliche Aufschlsselung",es:"Desglose Semanal",ru:" ",ja:"",zh:"",fr:"Rpartition Hebdomadaire"},avgPerDay:{en:"avg per day",pt:"mdia por dia",de:"Durchschnitt pro Tag",es:"promedio por da",ru:"  ",ja:"1",zh:"",fr:"moyenne par jour"},monday:{en:"Monday",pt:"Segunda",de:"Montag",es:"Lunes",ru:"",ja:"",zh:"",fr:"Lundi"},tuesday:{en:"Tuesday",pt:"Tera",de:"Dienstag",es:"Martes",ru:"",ja:"",zh:"",fr:"Mardi"},wednesday:{en:"Wednesday",pt:"Quarta",de:"Mittwoch",es:"Mircoles",ru:"",ja:"",zh:"",fr:"Mercredi"},thursday:{en:"Thursday",pt:"Quinta",de:"Donnerstag",es:"Jueves",ru:"",ja:"",zh:"",fr:"Jeudi"},friday:{en:"Friday",pt:"Sexta",de:"Freitag",es:"Viernes",ru:"",ja:"",zh:"",fr:"Vendredi"},saturday:{en:"Saturday",pt:"Sbado",de:"Samstag",es:"Sbado",ru:"",ja:"",zh:"",fr:"Samedi"},sunday:{en:"Sunday",pt:"Domingo",de:"Sonntag",es:"Domingo",ru:"",ja:"",zh:"",fr:"Dimanche"},avgPerBook:{en:"Avg. per Book",pt:"Mdia por Livro",de:"Durchschnitt pro Buch",es:"Promedio por Libro",ru:"  ",ja:"",zh:"",fr:"Moyenne par Livre"},firstRead:{en:"First read",pt:"Primeira leitura",de:"Erste Lesung",es:"Primera lectura",ru:" ",ja:"",zh:"",fr:"Premire lecture"},avgPerChapter:{en:"Avg. per Chapter",pt:"Mdia por Captulo",de:"Durchschnitt pro Kapitel",es:"Promedio por Captulo",ru:"  ",ja:"",zh:"",fr:"Moyenne par Chapitre"},readXTimes:{en:"Read {count} time{plural}",pt:"Lido {count} vez{plural}",de:"{count} Mal gelesen",es:"Ledo {count} vez{plural}",ru:" {count} {plural}",ja:"{count}",zh:"{count}",fr:"Lu {count} fois"},readingSessions:{en:"Reading Sessions",pt:"Sesses de Leitura",de:"Lesesitzungen",es:"Sesiones de Lectura",ru:" ",ja:"",zh:"",fr:"Sessions de Lecture"},time:{en:"Time",pt:"Tempo",de:"Zeit",es:"Tiempo",ru:"",ja:"",zh:"",fr:"Temps"},fontPreviewText:{en:"The quick brown fox jumps over the lazy dog",pt:"A raposa marrom salta sobre o co preguioso",de:"Der schnelle braune Fuchs springt ber den faulen Hund",es:"El rpido zorro marrn salta sobre el perro perezoso",ru:"      ",ja:"",zh:"",fr:"Le renard brun rapide saute par-dessus le chien paresseux"},reading:{en:"Reading",pt:"Leitura",de:"Lesen",es:"Lectura",ru:"",ja:"",zh:"",fr:"Lecture"},interface:{en:"Interface",pt:"Interface",de:"Benutzeroberflche",es:"Interfaz",ru:"",ja:"",zh:"",fr:"Interface"},controls:{en:"Controls",pt:"Controles",de:"Steuerung",es:"Controles",ru:"",ja:"",zh:"",fr:"Contrles"},backup:{en:"Backup",pt:"Backup",de:"Sicherung",es:"Respaldo",ru:" ",ja:"",zh:"",fr:"Sauvegarde"},typography:{en:"Typography",pt:"Tipografia",de:"Typografie",es:"Tipografa",ru:"",ja:"",zh:"",fr:"Typographie"},fontFamily:{en:"Font Family",pt:"Famlia da Fonte",de:"Schriftfamilie",es:"Familia de Fuente",ru:" ",ja:"",zh:"",fr:"Famille de Police"},fontSize:{en:"Font Size",pt:"Tamanho da Fonte",de:"Schriftgre",es:"Tamao de Fuente",ru:" ",ja:"",zh:"",fr:"Taille de Police"},lineHeight:{en:"Line Height",pt:"Altura da Linha",de:"Zeilenhhe",es:"Altura de Lnea",ru:" ",ja:"",zh:"",fr:"Hauteur de Ligne"},letterSpacing:{en:"Letter Spacing",pt:"Espaamento de Letras",de:"Buchstabenabstand",es:"Espaciado de Letras",ru:" ",ja:"",zh:"",fr:"Espacement des Lettres"},contentWidth:{en:"Content Width",pt:"Largura do Contedo",de:"Inhaltsbreite",es:"Ancho del Contenido",ru:" ",ja:"",zh:"",fr:"Largeur du Contenu"},phone:{en:"Phone",pt:"Telefone",de:"Telefon",es:"Telfono",ru:"",ja:"",zh:"",fr:"Tlphone"},normal:{en:"Normal",pt:"Normal",de:"Normal",es:"Normal",ru:"",ja:"",zh:"",fr:"Normal"},full:{en:"Full",pt:"Completo",de:"Vollstndig",es:"Completo",ru:"",ja:"",zh:"",fr:"Complet"},default:{en:"Default",pt:"Padro",de:"Standard",es:"Predeterminado",ru:" ",ja:"",zh:"",fr:"Par dfaut"},colors:{en:"Colors",pt:"Cores",de:"Farben",es:"Colores",ru:"",ja:"",zh:"",fr:"Couleurs"},readingColors:{en:"Reading Colors",pt:"Cores de Leitura",de:"Lesefarben",es:"Colores de Lectura",ru:" ",ja:"",zh:"",fr:"Couleurs de Lecture"},interfaceColors:{en:"Interface Colors",pt:"Cores da Interface",de:"Oberflchenfarben",es:"Colores de Interfaz",ru:" ",ja:"",zh:"",fr:"Couleurs d'Interface"},interfaceTheme:{en:"Interface Colors",pt:"Cores da Interface",de:"Oberflchenfarben",es:"Colores de Interfaz",ru:" ",ja:"",zh:"",fr:"Couleurs d'Interface"},currentTheme:{en:"Current Theme",pt:"Tema Atual",de:"Aktuelles Thema",es:"Tema Actual",ru:" ",ja:"",zh:"",fr:"Thme Actuel"},backgroundColor:{en:"Background Color",pt:"Cor de Fundo",de:"Hintergrundfarbe",es:"Color de Fondo",ru:" ",ja:"",zh:"",fr:"Couleur d'Arrire-plan"},textColor:{en:"Text Color",pt:"Cor do Texto",de:"Textfarbe",es:"Color del Texto",ru:" ",ja:"",zh:"",fr:"Couleur du Texte"},resetToDefault:{en:"Reset to Default",pt:"Redefinir para Padro",de:"Auf Standard zurcksetzen",es:"Restablecer a Predeterminado",ru:"   ",ja:"",zh:"",fr:"Remettre par Dfaut"},done:{en:"Done",pt:"Concludo",de:"Fertig",es:"Hecho",ru:"",ja:"",zh:"",fr:"Termin"},custom:{en:"Custom",pt:"Personalizado",de:"Benutzerdefiniert",es:"Personalizado",ru:"",ja:"",zh:"",fr:"Personnalis"},light:{en:"Light",pt:"Claro",de:"Hell",es:"Claro",ru:"",ja:"",zh:"",fr:"Clair"},dark:{en:"Dark",pt:"Escuro",de:"Dunkel",es:"Oscuro",ru:"",ja:"",zh:"",fr:"Sombre"},sepia:{en:"Sepia",pt:"Spia",de:"Sepia",es:"Sepia",ru:"",ja:"",zh:"",fr:"Spia"},highContrast:{en:"High Contrast",pt:"Alto Contraste",de:"Hoher Kontrast",es:"Alto Contraste",ru:" ",ja:"",zh:"",fr:"Contraste lev"},ocean:{en:"Ocean",pt:"Oceano",de:"Ozean",es:"Ocano",ru:"",ja:"",zh:"",fr:"Ocan"},forest:{en:"Forest",pt:"Floresta",de:"Wald",es:"Bosque",ru:"",ja:"",zh:"",fr:"Fort"},sunset:{en:"Sunset",pt:"Pr do Sol",de:"Sonnenuntergang",es:"Atardecer",ru:"",ja:"",zh:"",fr:"Coucher de Soleil"},lavender:{en:"Lavender",pt:"Lavanda",de:"Lavendel",es:"Lavanda",ru:"",ja:"",zh:"",fr:"Lavande"},lightDescription:{en:"Classic black text on white background",pt:"Texto preto clssico em fundo branco",de:"Klassischer schwarzer Text auf weiem Hintergrund",es:"Texto negro clsico sobre fondo blanco",ru:"     ",ja:"",zh:"",fr:"Texte noir classique sur fond blanc"},darkDescription:{en:"Modern dark theme perfect for low-light reading",pt:"Tema escuro moderno perfeito para leitura em pouca luz",de:"Modernes dunkles Thema perfekt fr das Lesen bei schwachem Licht",es:"Tema oscuro moderno perfecto para lectura con poca luz",ru:"        ",ja:"",zh:"",fr:"Thme sombre moderne parfait pour la lecture en faible luminosit"},sepiaDescription:{en:"Warm, paper-like reading experience",pt:"Experincia de leitura quente, semelhante ao papel",de:"Warmes, papierhnliches Leseerlebnis",es:"Experiencia de lectura clida, similar al papel",ru:",     ",ja:"",zh:"",fr:"Exprience de lecture chaleureuse, semblable au papier"},highContrastDescription:{en:"Maximum contrast for enhanced accessibility",pt:"Contraste mximo para acessibilidade aprimorada",de:"Maximaler Kontrast fr verbesserte Zugnglichkeit",es:"Contraste mximo para accesibilidad mejorada",ru:"    ",ja:"",zh:"",fr:"Contraste maximum pour une accessibilit amliore"},oceanDescription:{en:"Cool blue tones for reduced eye strain",pt:"Tons azuis frios para reduzir o cansao visual",de:"Khle Blautne zur Reduzierung der Augenbelastung",es:"Tonos azules fros para reducir la fatiga visual",ru:"      ",ja:"",zh:"",fr:"Tons bleus frais pour rduire la fatigue oculaire"},forestDescription:{en:"Natural green theme for comfortable reading",pt:"Tema verde natural para leitura confortvel",de:"Natrliches grnes Thema fr komfortables Lesen",es:"Tema verde natural para lectura cmoda",ru:"     ",ja:"",zh:"",fr:"Thme vert naturel pour une lecture confortable"},sunsetDescription:{en:"Warm orange tones for evening reading",pt:"Tons laranja quentes para leitura noturna",de:"Warme Orangetne fr das Lesen am Abend",es:"Tonos naranjas clidos para lectura nocturna",ru:"     ",ja:"",zh:"",fr:"Tons orange chauds pour la lecture du soir"},lavenderDescription:{en:"Soft purple theme for calming reading",pt:"Tema roxo suave para leitura relaxante",de:"Sanftes lila Thema fr beruhigendes Lesen",es:"Tema prpura suave para lectura relajante",ru:"     ",ja:"",zh:"",fr:"Thme violet doux pour une lecture apaisante"},lightUsage:{en:"Ideal for daytime reading and well-lit environments",pt:"Ideal para leitura diurna e ambientes bem iluminados",de:"Ideal fr das Lesen am Tag und gut beleuchtete Umgebungen",es:"Ideal para lectura diurna y ambientes bien iluminados",ru:"       ",ja:"",zh:"",fr:"Idal pour la lecture de jour et les environnements bien clairs"},darkUsage:{en:"Perfect for nighttime reading and dark environments",pt:"Perfeito para leitura noturna e ambientes escuros",de:"Perfekt fr das Lesen bei Nacht und in dunklen Umgebungen",es:"Perfecto para lectura nocturna y ambientes oscuros",ru:"      ",ja:"",zh:"",fr:"Parfait pour la lecture nocturne et les environnements sombres"},sepiaUsage:{en:"Reduces eye strain during extended reading sessions",pt:"Reduz o cansao visual durante sesses prolongadas de leitura",de:"Reduziert die Augenbelastung bei lngeren Lesesitzungen",es:"Reduce la fatiga visual durante sesiones de lectura prolongadas",ru:"      ",ja:"",zh:"",fr:"Rduit la fatigue oculaire lors de longues sessions de lecture"},highContrastUsage:{en:"Essential for users with visual impairments or reading difficulties",pt:"Essencial para usurios com deficincias visuais ou dificuldades de leitura",de:"Unerlsslich fr Benutzer mit Sehbehinderungen oder Leseschwierigkeiten",es:"Esencial para usuarios con discapacidades visuales o dificultades de lectura",ru:"        ",ja:"",zh:"",fr:"Essentiel pour les utilisateurs ayant des dficiences visuelles ou des difficults de lecture"},oceanUsage:{en:"Calming blue tones help maintain focus during long reading sessions",pt:"Tons azuis calmantes ajudam a manter o foco durante longas sesses de leitura",de:"Beruhigende Blautne helfen, die Konzentration bei langen Lesesitzungen aufrechtzuerhalten",es:"Los tonos azules calmantes ayudan a mantener el enfoque durante sesiones de lectura largas",ru:"         ",ja:"",zh:"",fr:"Les tons bleus apaisants aident  maintenir la concentration lors de longues sessions de lecture"},forestUsage:{en:"Natural green reduces digital eye strain and promotes relaxation",pt:"Verde natural reduz o cansao visual digital e promove relaxamento",de:"Natrliches Grn reduziert digitale Augenbelastung und frdert Entspannung",es:"El verde natural reduce la fatiga visual digital y promueve la relajacin",ru:"         ",ja:"",zh:"",fr:"Le vert naturel rduit la fatigue oculaire numrique et favorise la relaxation"},sunsetUsage:{en:"Warm tones are ideal for evening reading and bedtime stories",pt:"Tons quentes so ideais para leitura noturna e histrias para dormir",de:"Warme Tne sind ideal fr das Lesen am Abend und Gute-Nacht-Geschichten",es:"Los tonos clidos son ideales para lectura nocturna e historias para dormir",ru:"         ",ja:"",zh:"",fr:"Les tons chauds sont idaux pour la lecture du soir et les histoires au coucher"},lavenderUsage:{en:"Soft purple creates a peaceful atmosphere for mindful reading",pt:"Roxo suave cria uma atmosfera pacfica para leitura consciente",de:"Sanftes Lila schafft eine friedliche Atmosphre fr achtsames Lesen",es:"El prpura suave crea una atmsfera pacfica para lectura consciente",ru:"       ",ja:"",zh:"",fr:"Le violet doux cre une atmosphre paisible pour une lecture consciente"},syncInterfaceAndReadingColors:{en:"Sync Interface and Reading Colors",pt:"Sincronizar Cores da Interface e Leitura",de:"Interface- und Lesefarben synchronisieren",es:"Sincronizar Colores de Interfaz y Lectura",ru:"    ",ja:"",zh:"",fr:"Synchroniser les Couleurs d'Interface et de Lecture"},syncInterfaceWithReading:{en:"Sync Interface and Reading Colors",pt:"Sincronizar Cores da Interface e Leitura",de:"Interface- und Lesefarben synchronisieren",es:"Sincronizar Colores de Interfaz y Lectura",ru:"    ",ja:"",zh:"",fr:"Synchroniser les Couleurs d'Interface et de Lecture"},syncDescription:{en:"When enabled: Interface theme automatically matches reading color theme. Changes to either reading or interface colors will sync both themes (default enabled)",pt:"Quando ativado: O tema da interface corresponde automaticamente ao tema de cores de leitura. Mudanas nas cores de leitura ou interface sincronizaro ambos os temas (padro ativado)",de:"Wenn aktiviert: Das Interface-Thema passt automatisch zum Lesefarbthema. nderungen an Lese- oder Interface-Farben synchronisieren beide Themen (standardmig aktiviert)",es:"Cuando est habilitado: El tema de interfaz coincide automticamente con el tema de colores de lectura. Los cambios en los colores de lectura o interfaz sincronizarn ambos temas (habilitado por defecto)",ru:" :       .         (  )",ja:"",zh:"",fr:"Lorsqu'activ : Le thme d'interface correspond automatiquement au thme de couleurs de lecture. Les modifications des couleurs de lecture ou d'interface synchroniseront les deux thmes (activ par dfaut)"},syncInterfaceDescription:{en:"When enabled: Interface theme automatically matches reading color theme. Changes to either reading or interface colors will sync both themes (default enabled)",pt:"Quando ativado: O tema da interface corresponde automaticamente ao tema de cores de leitura. Mudanas nas cores de leitura ou interface sincronizaro ambos os temas (padro ativado)",de:"Wenn aktiviert: Das Interface-Thema passt automatisch zum Lesefarbthema. nderungen an Lese- oder Interface-Farben synchronisieren beide Themen (standardmig aktiviert)",es:"Cuando est habilitado: El tema de interfaz coincide automticamente con el tema de colores de lectura. Los cambios en los colores de lectura o interfaz sincronizarn ambos temas (habilitado por defecto)",ru:" :       .         (  )",ja:"",zh:"",fr:"Lorsqu'activ : Le thme d'interface correspond automatiquement au thme de couleurs de lecture. Les modifications des couleurs de lecture ou d'interface synchroniseront les deux thmes (activ par dfaut)"},applyFontGlobally:{en:"Apply text font changes globally",pt:"Aplicar mudanas de fonte de texto globalmente",de:"Textschrift-nderungen global anwenden",es:"Aplicar cambios de fuente de texto globalmente",ru:"    ",ja:"",zh:"",fr:"Appliquer les modifications de police de texte globalement"},applyFontGloballyDescription:{en:"Changes to text font will affect all interface elements including menus, table of contents, and bookmarks",pt:"Mudanas na fonte do texto afetaro todos os elementos da interface, incluindo menus, ndice e marcadores",de:"nderungen an der Textschrift wirken sich auf alle Interface-Elemente aus, einschlielich Mens, Inhaltsverzeichnis und Lesezeichen",es:"Los cambios en la fuente del texto afectarn todos los elementos de la interfaz, incluidos mens, tabla de contenidos y marcadores",ru:"       ,  ,   ",ja:"",zh:"",fr:"Les modifications de la police de texte affecteront tous les lments d'interface, y compris les menus, la table des matires et les signets"},autoHideMenu:{en:"Auto-hide menu while reading",pt:"Ocultar menu automaticamente durante a leitura",de:"Men beim Lesen automatisch ausblenden",es:"Ocultar men automticamente mientras se lee",ru:"    ",ja:"",zh:"",fr:"Masquer automatiquement le menu pendant la lecture"},autoHideMenuDescription:{en:"Menu will hide when scrolling down and show when scrolling up",pt:"O menu se ocultar ao rolar para baixo e aparecer ao rolar para cima",de:"Das Men wird beim Scrollen nach unten ausgeblendet und beim Scrollen nach oben angezeigt",es:"El men se ocultar al desplazarse hacia abajo y se mostrar al desplazarse hacia arriba",ru:"          ",ja:"",zh:"",fr:"Le menu se cachera lors du dfilement vers le bas et s'affichera lors du dfilement vers le haut"},showScrollButtons:{en:"Show scroll buttons",pt:"Mostrar botes de rolagem",de:"Scroll-Buttons anzeigen",es:"Mostrar botones de desplazamiento",ru:"  ",ja:"",zh:"",fr:"Afficher les boutons de dfilement"},showScrollButtonsDescription:{en:"Display floating buttons for quick scrolling",pt:"Exibir botes flutuantes para rolagem rpida",de:"Schwebende Buttons fr schnelles Scrollen anzeigen",es:"Mostrar botones flotantes para desplazamiento rpido",ru:"     ",ja:"",zh:"",fr:"Afficher des boutons flottants pour un dfilement rapide"},buttonSize:{en:"Button Size",pt:"Tamanho do Boto",de:"Button-Gre",es:"Tamao del Botn",ru:" ",ja:"",zh:"",fr:"Taille du Bouton"},small:{en:"Small",pt:"Pequeno",de:"Klein",es:"Pequeo",ru:"",ja:"",zh:"",fr:"Petit"},medium:{en:"Medium",pt:"Mdio",de:"Mittel",es:"Mediano",ru:"",ja:"",zh:"",fr:"Moyen"},large:{en:"Large",pt:"Grande",de:"Gro",es:"Grande",ru:"",ja:"",zh:"",fr:"Grand"},customSize:{en:"Custom Size",pt:"Tamanho Personalizado",de:"Benutzerdefinierte Gre",es:"Tamao Personalizado",ru:" ",ja:"",zh:"",fr:"Taille Personnalise"},checked:{en:"Checked",pt:"Marcado",de:"Aktiviert",es:"Marcado",ru:"",ja:"",zh:"",fr:"Coch"},unchecked:{en:"Unchecked",pt:"Desmarcado",de:"Deaktiviert",es:"Desmarcado",ru:" ",ja:"",zh:"",fr:"Dcoch"},readingExperience:{en:"Reading Experience",pt:"Experincia de Leitura",de:"Leseerfahrung",es:"Experiencia de Lectura",ru:" ",ja:"",zh:"",fr:"Exprience de Lecture"},textToSpeechSupport:{en:"Text-to-speech support",pt:"Suporte a texto para fala",de:"Text-zu-Sprache-Untersttzung",es:"Soporte de texto a voz",ru:"    ",ja:"",zh:"",fr:"Support de synthse vocale"},experimental:{en:"Experimental",pt:"Experimental",de:"Experimentell",es:"Experimental",ru:"",ja:"",zh:"",fr:"Exprimental"},textToSpeechDescription:{en:"Enable audio narration of book content. An icon will appear near the Table of Contents when enabled.",pt:"Ativar narrao em udio do contedo do livro. Um cone aparecer prximo ao ndice quando ativado.",de:"Audio-Erzhlung des Buchinhalts aktivieren. Ein Symbol erscheint in der Nhe des Inhaltsverzeichnisses, wenn aktiviert.",es:"Habilitar narracin de audio del contenido del libro. Aparecer un icono cerca de la Tabla de Contenidos cuando est habilitado.",ru:" -  .       .",ja:"",zh:"",fr:"Activer la narration audio du contenu du livre. Une icne apparatra prs de la Table des Matires lorsqu'active."},fastFavorite:{en:"Fast Favorite",pt:"Favorito Rpido",de:"Schnell-Favorit",es:"Favorito Rpido",ru:" ",ja:"",zh:"",fr:"Favori Rapide"},fastFavoriteDescription:{en:"Quickly save bookmarks without entering a name",pt:"Salvar marcadores rapidamente sem inserir um nome",de:"Lesezeichen schnell speichern ohne Namen eingeben",es:"Guardar marcadores rpidamente sin ingresar un nombre",ru:"     ",ja:"",zh:"",fr:"Enregistrer rapidement des signets sans saisir de nom"},defaultBookmarkName:{en:"Default bookmark name",pt:"Nome padro do marcador",de:"Standard-Lesezeichen-Name",es:"Nombre predeterminado del marcador",ru:"   ",ja:"",zh:"",fr:"Nom de signet par dfaut"},backupAndReset:{en:"Backup & Reset",pt:"Backup e Redefinio",de:"Sicherung & Zurcksetzen",es:"Respaldo y Reinicio",ru:"   ",ja:"",zh:"",fr:"Sauvegarde et Rinitialisation"},exportSettings:{en:"Export Settings",pt:"Exportar Configuraes",de:"Einstellungen exportieren",es:"Exportar Configuraciones",ru:" ",ja:"",zh:"",fr:"Exporter les Paramtres"},exportDescription:{en:"Download your preferences, bookmarks, and reading progress",pt:"Baixar suas preferncias, marcadores e progresso de leitura",de:"Laden Sie Ihre Einstellungen, Lesezeichen und Lesefortschritt herunter",es:"Descargar tus preferencias, marcadores y progreso de lectura",ru:"  ,    ",ja:"",zh:"",fr:"Tlcharger vos prfrences, signets et progression de lecture"},exporting:{en:"Exporting...",pt:"Exportando...",de:"Exportiere...",es:"Exportando...",ru:"...",ja:"...",zh:"...",fr:"Exportation..."},exportData:{en:"Export Data",pt:"Exportar Dados",de:"Daten exportieren",es:"Exportar Datos",ru:" ",ja:"",zh:"",fr:"Exporter les Donnes"},importSettings:{en:"Import Settings",pt:"Importar Configuraes",de:"Einstellungen importieren",es:"Importar Configuraciones",ru:" ",ja:"",zh:"",fr:"Importer les Paramtres"},importDescription:{en:"Restore your settings from a backup file",pt:"Restaurar suas configuraes de um arquivo de backup",de:"Stellen Sie Ihre Einstellungen aus einer Backup-Datei wieder her",es:"Restaurar tus configuraciones desde un archivo de respaldo",ru:"      ",ja:"",zh:"",fr:"Restaurer vos paramtres  partir d'un fichier de sauvegarde"},importing:{en:"Importing...",pt:"Importando...",de:"Importiere...",es:"Importando...",ru:"...",ja:"...",zh:"...",fr:"Importation..."},importData:{en:"Import Data",pt:"Importar Dados",de:"Daten importieren",es:"Importar Datos",ru:" ",ja:"",zh:"",fr:"Importer les Donnes"},resetDescription:{en:"Reset all settings to their default values. This cannot be undone.",pt:"Redefinir todas as configuraes para seus valores padro. Isso no pode ser desfeito.",de:"Alle Einstellungen auf ihre Standardwerte zurcksetzen. Dies kann nicht rckgngig gemacht werden.",es:"Restablecer todas las configuraciones a sus valores predeterminados. Esto no se puede deshacer.",ru:"      .   .",ja:"",zh:"",fr:"Rinitialiser tous les paramtres  leurs valeurs par dfaut. Ceci ne peut pas tre annul."},important:{en:"Important",pt:"Importante",de:"Wichtig",es:"Importante",ru:"",ja:"",zh:"",fr:"Important"},backupWarning:{en:"Backup files contain your reading preferences, bookmarks, and progress data. Keep them safe and ensure they're from trusted sources before importing. Importing will overwrite your current settings. Your books and files are not included in backups for security and privacy reasons.",pt:"Arquivos de backup contm suas preferncias de leitura, marcadores e dados de progresso. Mantenha-os seguros e certifique-se de que sejam de fontes confiveis antes de importar. A importao substituir suas configuraes atuais. Seus livros e arquivos no esto includos nos backups por razes de segurana e privacidade.",de:"Backup-Dateien enthalten Ihre Leseeinstellungen, Lesezeichen und Fortschrittsdaten. Bewahren Sie sie sicher auf und stellen Sie sicher, dass sie aus vertrauenswrdigen Quellen stammen, bevor Sie sie importieren. Das Importieren berschreibt Ihre aktuellen Einstellungen. Ihre Bcher und Dateien sind aus Sicherheits- und Datenschutzgrnden nicht in Backups enthalten.",es:"Los archivos de respaldo contienen tus preferencias de lectura, marcadores y datos de progreso. Mantnlos seguros y asegrate de que sean de fuentes confiables antes de importar. La importacin sobrescribir tus configuraciones actuales. Tus libros y archivos no estn incluidos en los respaldos por razones de seguridad y privacidad.",ru:"      ,     .      ,       .     .              .",ja:"",zh:"",fr:"Les fichiers de sauvegarde contiennent vos prfrences de lecture, signets et donnes de progression. Gardez-les en scurit et assurez-vous qu'ils proviennent de sources fiables avant l'importation. L'importation crasera vos paramtres actuels. Vos livres et fichiers ne sont pas inclus dans les sauvegardes pour des raisons de scurit et de confidentialit."},confirmResetSettings:{en:"Are you sure you want to reset all settings to default? This action cannot be undone.",pt:"Tem certeza de que deseja redefinir todas as configuraes para o padro? Esta ao no pode ser desfeita.",de:"Sind Sie sicher, dass Sie alle Einstellungen auf Standard zurcksetzen mchten? Diese Aktion kann nicht rckgngig gemacht werden.",es:"Ests seguro de que quieres restablecer todas las configuraciones a los valores predeterminados? Esta accin no se puede deshacer.",ru:" ,         ?    .",ja:"",zh:"",fr:"tes-vous sr de vouloir rinitialiser tous les paramtres par dfaut ? Cette action ne peut pas tre annule."},failedToResetSettings:{en:"Failed to reset settings. Please try again.",pt:"Falha ao redefinir configuraes. Tente novamente.",de:"Einstellungen konnten nicht zurckgesetzt werden. Bitte versuchen Sie es erneut.",es:"Error al restablecer configuraciones. Intntalo de nuevo.",ru:"   .  .",ja:"",zh:"",fr:"chec de la rinitialisation des paramtres. Veuillez ressayer."},exportFailed:{en:"Export failed. Please try again.",pt:"Falha na exportao. Tente novamente.",de:"Export fehlgeschlagen. Bitte versuchen Sie es erneut.",es:"Error en la exportacin. Intntalo de nuevo.",ru:"  .  .",ja:"",zh:"",fr:"chec de l'exportation. Veuillez ressayer."},importSuccess:{en:"Settings imported successfully! The page will reload to apply changes.",pt:"Configuraes importadas com sucesso! A pgina ser recarregada para aplicar as mudanas.",de:"Einstellungen erfolgreich importiert! Die Seite wird neu geladen, um die nderungen anzuwenden.",es:"Configuraciones importadas exitosamente! La pgina se recargar para aplicar los cambios.",ru:"  !     .",ja:"",zh:"",fr:"Paramtres imports avec succs ! La page va se recharger pour appliquer les modifications."},importFailed:{en:"Import failed. Please check the file format and try again.",pt:"Falha na importao. Verifique o formato do arquivo e tente novamente.",de:"Import fehlgeschlagen. Bitte berprfen Sie das Dateiformat und versuchen Sie es erneut.",es:"Error en la importacin. Verifica el formato del archivo e intntalo de nuevo.",ru:"  .      .",ja:"",zh:"",fr:"chec de l'importation. Veuillez vrifier le format du fichier et ressayer."}},cw=()=>{const t=navigator.language.toLowerCase();return t.startsWith("pt")?"pt":t.startsWith("de")?"de":t.startsWith("es")?"es":t.startsWith("ru")?"ru":t.startsWith("ja")?"ja":t.startsWith("zh")?"zh":t.startsWith("fr")?"fr":"en"};let Rs="auto";const dw=t=>{Rs=t,localStorage.setItem("ebook-reader-language",t)},Sv=()=>{if(Rs==="auto"){const t=localStorage.getItem("ebook-reader-language");return t&&t!=="auto"?(Rs=t,t):"auto"}return Rs},hw=()=>{const t=Sv();return t==="auto"?cw():t},zd=()=>{const t=localStorage.getItem("ebook-reader-language");t&&(Rs=t)},A=t=>{const e=hw(),r=uw[t];return r?r[e]||r.en||t:(console.warn(`Translation key "${t}" not found`),t)},fw=()=>[{code:"auto",name:A("automatic")},{code:"en",name:"English"},{code:"pt",name:"Portugus"},{code:"de",name:"Deutsch"},{code:"es",name:"Espaol"},{code:"ru",name:""},{code:"ja",name:""},{code:"zh",name:""},{code:"fr",name:"Franais"}],ya=({onClose:t})=>{const e=$.useRef(null),r=Sv(),n=fw();$.useEffect(()=>{const s=a=>{e.current&&!e.current.contains(a.target)&&t()};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[t]);const i=s=>{dw(s),t(),window.dispatchEvent(new CustomEvent("languageChanged"))};return u.jsxs("div",{ref:e,className:"w-full",children:[u.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:u.jsx("h3",{className:"text-sm font-medium text-gray-900",children:A("language")})}),u.jsx("div",{className:"py-1",children:n.map(s=>u.jsxs("button",{onClick:()=>i(s.code),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 hover:bg-opacity-20 transition-colors duration-200 flex items-center justify-between rounded-lg mx-1",children:[u.jsx("span",{className:"text-gray-900",children:s.name}),r===s.code&&u.jsx(w2,{className:"w-4 h-4 text-blue-600"})]},s.code))})]})};class _v{constructor(e={}){this.isDragActive=!1,this.dragCounter=0,this.originalDragHandlers=new Map,this.handleDocumentDragOver=r=>{if(this.config.preventDefaultDragBehavior){const n=r.target;this.isValidDropZone(n)||(r.preventDefault(),r.stopPropagation(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))}},this.handleDocumentDrop=r=>{const n=r.target;this.isValidDropZone(n)||(r.preventDefault(),r.stopPropagation()),this.resetDragState()},this.handleDocumentDragEnter=r=>{r.preventDefault(),this.dragCounter++;const n=r.target;!this.isValidDropZone(n)&&this.config.preventDefaultDragBehavior&&r.stopPropagation()},this.handleDocumentDragLeave=r=>{r.preventDefault(),this.dragCounter--,this.dragCounter<=0&&this.resetDragState()},this.handleDragStart=r=>{const n=r.target;(n.tagName==="IMG"||n.tagName==="A"||n.hasAttribute("draggable")===!1||n.closest("[data-no-drag]"))&&(r.preventDefault(),r.stopPropagation())},this.config={enableDragOverlay:!1,allowedFileTypes:[".epub"],preventDefaultDragBehavior:!0,...e}}init(){this.attachGlobalListeners(),this.disableDefaultDragBehavior()}destroy(){this.removeGlobalListeners(),this.restoreDefaultDragBehavior()}attachGlobalListeners(){document.addEventListener("dragover",this.handleDocumentDragOver,{passive:!1}),document.addEventListener("drop",this.handleDocumentDrop,{passive:!1}),document.addEventListener("dragenter",this.handleDocumentDragEnter,{passive:!1}),document.addEventListener("dragleave",this.handleDocumentDragLeave,{passive:!1}),document.addEventListener("dragstart",this.handleDragStart,{passive:!1})}removeGlobalListeners(){document.removeEventListener("dragover",this.handleDocumentDragOver),document.removeEventListener("drop",this.handleDocumentDrop),document.removeEventListener("dragenter",this.handleDocumentDragEnter),document.removeEventListener("dragleave",this.handleDocumentDragLeave),document.removeEventListener("dragstart",this.handleDragStart)}isValidDropZone(e){return["[data-drop-zone]",".drop-zone",".book-uploader",".drag-drop-area","[onDrop]","[onDragOver]"].some(n=>{var i,s;return((i=e.matches)==null?void 0:i.call(e,n))||((s=e.closest)==null?void 0:s.call(e,n))})}resetDragState(){this.isDragActive=!1,this.dragCounter=0}disableDefaultDragBehavior(){document.body.style.userSelect="none",document.body.style.webkitUserSelect="none";const e=document.createElement("style");e.textContent=`
      * {
        -webkit-user-drag: none;
        -khtml-user-drag: none;
        -moz-user-drag: none;
        -o-user-drag: none;
        user-drag: none;
      }
      
      [data-drop-zone] {
        -webkit-user-drag: auto !important;
        -khtml-user-drag: auto !important;
        -moz-user-drag: auto !important;
        -o-user-drag: auto !important;
        user-drag: auto !important;
      }
      
      .no-drag-overlay::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: transparent;
        z-index: 9999;
        pointer-events: none;
      }
    `,document.head.appendChild(e)}restoreDefaultDragBehavior(){document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.head.querySelectorAll("style[data-drag-controller]").forEach(r=>r.remove())}enableDragForElement(e){e.setAttribute("data-drop-zone","true"),e.style.webkitUserDrag="auto",e.style.userDrag="auto"}disableDragForElement(e){e.removeAttribute("data-drop-zone"),e.setAttribute("data-no-drag","true"),e.style.webkitUserDrag="none",e.style.userDrag="none"}updateConfig(e){this.config={...this.config,...e}}}const Nv=new _v({enableDragOverlay:!1,allowedFileTypes:[".epub"],preventDefaultDragBehavior:!0}),Dv=t=>{const e=$.useRef(null);return $.useEffect(()=>{const r=t?new _v(t):Nv;return e.current=r,r.init(),()=>{t&&r.destroy()}},[t]),{enableDragForElement:r=>{var n;(n=e.current)==null||n.enableDragForElement(r)},disableDragForElement:r=>{var n;(n=e.current)==null||n.disableDragForElement(r)},updateConfig:r=>{var n;(n=e.current)==null||n.updateConfig(r)}}},pw=({onBookAdded:t,onClose:e})=>{const[r,n]=$.useState(!1),[i,s]=$.useState(!1),[a,o]=$.useState(null),[l,c]=$.useState(!1),d=$.useRef(null),{enableDragForElement:h,disableDragForElement:v}=Dv({enableDragOverlay:!1,allowedFileTypes:[".epub"],preventDefaultDragBehavior:!0});$.useEffect(()=>{d.current&&h(d.current)},[h]);const b=$.useCallback(async g=>{if(!g.name.toLowerCase().endsWith(".epub")){o(A("pleaseSelectEpub"));return}s(!0),o(null);try{const w=await lw(g),x={id:`book-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...w};if(x.cover)try{const C=new Rd(g);await C.initialize(),await C.cacheCoverImage(x.id),C.destroy()}catch(C){console.warn("Could not cache cover image:",C)}await to(x),t(x),e==null||e()}catch(w){console.error("Error processing EPUB file:",w),o(A("failedToProcessEpub"))}finally{s(!1)}},[t,e]),N=$.useCallback(g=>{var C;g.preventDefault(),g.stopPropagation(),n(!1);const x=Array.from(((C=g.dataTransfer)==null?void 0:C.files)||[]).find(E=>E.name.toLowerCase().endsWith(".epub"));x?b(x):o(A("pleaseDropEpub"))},[b]),k=$.useCallback(g=>{var x;const w=(x=g.target.files)==null?void 0:x[0];w&&b(w)},[b]),y=$.useCallback(g=>{g.preventDefault(),g.stopPropagation(),n(!0)},[]),p=$.useCallback(g=>{var x;g.preventDefault(),g.stopPropagation();const w=(x=d.current)==null?void 0:x.getBoundingClientRect();if(w){const{clientX:C,clientY:E}=g;(C<w.left||C>w.right||E<w.top||E>w.bottom)&&n(!1)}},[]),m=$.useCallback(g=>{g.preventDefault(),g.stopPropagation(),n(!0)},[]);return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 relative animate-scale-in",children:[e&&u.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-lg transition-all duration-300","aria-label":A("closeUploader"),children:u.jsx(is,{className:"w-5 h-5"})}),u.jsx("div",{className:"absolute top-4 left-4",children:u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>c(!l),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-300","aria-label":A("language"),children:u.jsx(dn,{className:"w-5 h-5"})}),l&&u.jsx("div",{className:"absolute top-full left-0 mt-2 z-50",children:u.jsx(ya,{onClose:()=>c(!1)})})]})}),u.jsxs("div",{className:"text-center mb-6 mt-8",children:[u.jsx(sr,{className:"w-12 h-12 text-blue-600 mx-auto mb-3"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:A("addNewBook")}),u.jsx("p",{className:"text-gray-600",children:A("uploadEpubFile")})]}),u.jsxs("div",{ref:d,className:`border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 ${r?"border-blue-500 bg-blue-50 transform scale-105":"border-gray-300 hover:border-gray-400"} ${i?"opacity-50 pointer-events-none":""}`,onDrop:N,onDragOver:y,onDragLeave:p,onDragEnter:m,"data-drop-zone":"true",children:[u.jsx(Ui,{className:`w-12 h-12 mx-auto mb-4 transition-all duration-300 ${r?"text-blue-600 transform scale-110":"text-gray-400"}`}),u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:A(r?"dropEpubHere":"dragAndDropEpub")}),u.jsx("p",{className:"text-gray-600",children:A("or")})]}),u.jsxs("label",{className:"inline-block",children:[u.jsx("input",{type:"file",accept:".epub",onChange:k,className:"hidden",disabled:i}),u.jsx("span",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-300 cursor-pointer inline-block font-medium transform hover:scale-105",children:A(i?"processing":"chooseFile")})]})]}),a&&u.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg animate-fade-in",children:u.jsx("p",{className:"text-red-800 text-sm",children:a})}),u.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:A("supportedFormat")})]})})};let wt=null,Zr=null,aa=Date.now();const Tv=(t,e,r,n,i)=>{wt&&Pd(),wt={bookId:t,bookTitle:e,bookAuthor:r,chapterIndex:n,chapterTitle:i,startTime:new Date},aa=Date.now(),Zr=setInterval(()=>{Date.now()-aa>5*60*1e3&&Av()},3e4),console.log("Reading session started:",wt)},mw=()=>{aa=Date.now(),wt&&!Zr&&gw()},Av=()=>{Zr&&(clearInterval(Zr),Zr=null)},gw=()=>{wt&&!Zr&&(aa=Date.now(),Zr=setInterval(()=>{Date.now()-aa>5*60*1e3&&Av()},3e4))},Pd=async(t=!1)=>{if(!wt)return;const e=new Date,r=e.getTime()-wt.startTime.getTime();if(r>1e4){const n={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,bookId:wt.bookId,bookTitle:wt.bookTitle,bookAuthor:wt.bookAuthor,chapterIndex:wt.chapterIndex,chapterTitle:wt.chapterTitle,startTime:wt.startTime,endTime:e,duration:r,completed:t};await vw(n)}wt=null,Zr&&(clearInterval(Zr),Zr=null),console.log("Reading session ended")},Ua=async(t,e,r=!1)=>{if(!wt)return;const n=wt.bookId,i=wt.bookTitle,s=wt.bookAuthor;await Pd(r),Tv(n,i,s,t,e)},vw=async t=>{try{await(await ft()).put("readingSessions",t),console.log("Reading session saved:",t)}catch(e){console.error("Error saving reading session:",e)}},vl=async t=>{try{return(await(await ft()).getAll("readingSessions")).sort((n,i)=>i.startTime.getTime()-n.startTime.getTime())}catch(e){return console.error("Error getting reading sessions:",e),[]}},yw=async t=>{const e=await vl(t),r=new Map;return e.forEach(n=>{const i=`${n.bookId}-${n.chapterIndex}`;if(r.has(i)){const s=r.get(i);s.totalTime+=n.duration,s.lastRead=n.endTime>s.lastRead?n.endTime:s.lastRead,s.timesRead+=1,n.completed&&(s.completed=!0)}else r.set(i,{bookId:n.bookId,bookTitle:n.bookTitle,bookAuthor:n.bookAuthor,chapterIndex:n.chapterIndex,chapterTitle:n.chapterTitle,totalTime:n.duration,firstRead:n.startTime,lastRead:n.endTime,timesRead:1,completed:n.completed})}),Array.from(r.values()).sort((n,i)=>i.lastRead.getTime()-n.lastRead.getTime())},jv=async()=>{const t=await vl(),e=new Map;return t.forEach(r=>{if(e.has(r.bookId)){const n=e.get(r.bookId);n.totalTime+=r.duration,n.lastRead=r.endTime>n.lastRead?r.endTime:n.lastRead,n.sessions.push(r);const i=new Set(n.sessions.map(s=>s.chapterIndex));n.chaptersRead=i.size}else e.set(r.bookId,{bookId:r.bookId,bookTitle:r.bookTitle,bookAuthor:r.bookAuthor,totalTime:r.duration,firstRead:r.startTime,lastRead:r.endTime,chaptersRead:1,totalChapters:0,completionPercentage:0,sessions:[r]})}),Array.from(e.values()).sort((r,n)=>n.lastRead.getTime()-r.lastRead.getTime())},Bv=async(t=30)=>{const e=await vl(),r=new Map,n=new Date,i=new Date(n.getTime()-t*24*60*60*1e3);for(let s=new Date(i);s<=n;s.setDate(s.getDate()+1)){const a=s.toISOString().split("T")[0];r.set(a,{date:a,totalTime:0,sessionsCount:0,booksRead:[],chaptersCompleted:0})}return e.forEach(s=>{const a=s.startTime.toISOString().split("T")[0];if(r.has(a)){const o=r.get(a);o.totalTime+=s.duration,o.sessionsCount+=1,o.booksRead.includes(s.bookId)||o.booksRead.push(s.bookId),s.completed&&(o.chaptersCompleted+=1)}}),Array.from(r.values()).sort((s,a)=>s.date.localeCompare(a.date))},xw=async()=>{const t=await vl(),e=await jv();if(t.length===0)return{totalReadingTime:0,totalChaptersCompleted:0,totalBooksStarted:0,totalBooksCompleted:0,averageSessionDuration:0,longestSession:0,currentStreak:0,longestStreak:0,dailyAverage:0,weeklyAverage:0,monthlyAverage:0};const r=t.reduce((k,y)=>k+y.duration,0),n=t.filter(k=>k.completed).length,i=e.length,s=e.filter(k=>k.completionPercentage>=100).length,a=r/t.length,o=Math.max(...t.map(k=>k.duration)),{currentStreak:l,longestStreak:c}=bw(t),h=(await Bv(90)).map(k=>k.totalTime),v=h.reduce((k,y)=>k+y,0)/h.length,b=v*7,N=v*30;return{totalReadingTime:r,totalChaptersCompleted:n,totalBooksStarted:i,totalBooksCompleted:s,averageSessionDuration:a,longestSession:o,currentStreak:l,longestStreak:c,dailyAverage:v,weeklyAverage:b,monthlyAverage:N}},bw=t=>{if(t.length===0)return{currentStreak:0,longestStreak:0};const e=new Map;t.forEach(l=>{const c=l.startTime.toISOString().split("T")[0];e.set(c,!0)});const r=Array.from(e.keys()).sort();let n=0,i=0,s=0;const a=new Date().toISOString().split("T")[0],o=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(e.has(a)||e.has(o)){let l=new Date;for(e.has(a)||l.setDate(l.getDate()-1);e.has(l.toISOString().split("T")[0]);)n++,l.setDate(l.getDate()-1)}for(let l=0;l<r.length;l++)if(l===0)s=1;else{const c=new Date(r[l-1]);(new Date(r[l]).getTime()-c.getTime())/(24*60*60*1e3)===1?s++:(i=Math.max(i,s),s=1)}return i=Math.max(i,s),{currentStreak:n,longestStreak:i}},Dt=(t,e="auto")=>{if(t===0)return"0 minutes";const r=Math.floor(t/1e3),n=Math.floor(r/60),i=Math.floor(n/60),s=Math.floor(i/24);switch(e){case"minutes":return`${Math.ceil(t/(1e3*60))} minutes`;case"hours":return`${(t/(1e3*60*60)).toFixed(1)} hours`;case"detailed":const o=[];return s>0&&o.push(`${s} day${s!==1?"s":""}`),i%24>0&&o.push(`${i%24} hour${i%24!==1?"s":""}`),n%60>0&&o.push(`${n%60} minute${n%60!==1?"s":""}`),o.join(", ")||"0 minutes";case"auto":default:return s>0?`${s} day${s!==1?"s":""} ${i%24}h`:i>0?`${i} hour${i!==1?"s":""} ${n%60}m`:n>0?`${n} minute${n!==1?"s":""}`:`${r} second${r!==1?"s":""}`}},$f=t=>{const e=Math.floor(t/6e4),r=Math.floor(e/60),n=Math.floor(r/24);return n>0?`${n}d ${r%24}h`:r>0?`${r}h ${e%60}m`:`${e}m`},Lv=t=>{const r=new Date().getTime()-t.getTime(),n=Math.floor(r/(1e3*60)),i=Math.floor(n/60),s=Math.floor(i/24);return n<1?"Just now":n<60?`${n} minute${n!==1?"s":""} ago`:i<24?`${i} hour${i!==1?"s":""} ago`:s<7?`${s} day${s!==1?"s":""} ago`:t.toLocaleDateString()},ww=t=>{const e=Math.floor(t/36e5),r=Math.floor(t%(1e3*60*60)/(1e3*60));return e>0?`You've spent ${e} hour${e!==1?"s":""} ${r>0?`${r} minute${r!==1?"s":""}`:""} reading this book`:r>0?`You've spent ${r} minute${r!==1?"s":""} reading this book`:"You haven't spent much time reading this book yet"},kw=async(t,e)=>new Promise(r=>{setTimeout(()=>{r(`[${e.toUpperCase()}] ${t}`)},1e3)}),Cw=({timeFormat:t,sortBy:e,filterBy:r,searchQuery:n,preferences:i})=>{const[s,a]=$.useState([]),[o,l]=$.useState(!0),[c,d]=$.useState({});$.useEffect(()=>{h()},[]);const h=async()=>{try{l(!0);const g=await yw();a(g)}catch(g){console.error("Error loading chapter history:",g)}finally{l(!1)}},b=i!=null&&i.interfaceColors?{backgroundColor:i.interfaceColors.headerBackground||"#ffffff",color:i.interfaceColors.headerText||"#1f2937",borderColor:i.interfaceColors.headerBorder||"#e5e7eb",panelBackground:i.interfaceColors.panelBackground||"#ffffff",panelSecondaryBackground:i.interfaceColors.panelSecondaryBackground||"#f9fafb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb",panelBackground:"#ffffff",panelSecondaryBackground:"#f9fafb"},N=async(g,w,x="en")=>{d(C=>({...C,[g]:{isTranslating:!0,originalText:w,targetLanguage:x}}));try{const C=await kw(w,x);d(E=>({...E,[g]:{...E[g],isTranslating:!1,translatedText:C}}))}catch(C){console.error("Translation failed:",C),d(E=>({...E,[g]:{...E[g],isTranslating:!1}}))}},k=g=>{const w=c[g];w!=null&&w.translatedText&&d(x=>{const C={...x};return delete C[g],C})},y=(g,w)=>{const x=c[g];return x!=null&&x.translatedText?x.translatedText:w},p=g=>{const w=A("readXTimes"),x=g!==1?"s":"";return w.replace("{count}",g.toString()).replace("{plural}",x)},m=rp.useMemo(()=>{let g=s;if(n.trim()){const S=n.toLowerCase();g=g.filter(I=>I.bookTitle.toLowerCase().includes(S)||I.bookAuthor.toLowerCase().includes(S)||I.chapterTitle.toLowerCase().includes(S))}const w=new Date,x=new Date(w.getFullYear(),w.getMonth(),w.getDate()),C=new Date(x.getTime()-7*24*60*60*1e3),E=new Date(x.getTime()-30*24*60*60*1e3);switch(r){case"today":g=g.filter(S=>S.lastRead>=x);break;case"week":g=g.filter(S=>S.lastRead>=C);break;case"month":g=g.filter(S=>S.lastRead>=E);break;case"completed":g=g.filter(S=>S.completed);break;case"in-progress":g=g.filter(S=>!S.completed);break}switch(e){case"date":g.sort((S,I)=>I.lastRead.getTime()-S.lastRead.getTime());break;case"duration":g.sort((S,I)=>I.totalTime-S.totalTime);break;case"book":g.sort((S,I)=>S.bookTitle.localeCompare(I.bookTitle));break;case"chapter":g.sort((S,I)=>S.chapterIndex-I.chapterIndex);break}return g},[s,n,r,e]);return o?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx(zr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4 animate-pulse"}),u.jsx("p",{style:{color:b.color},children:A("loadingReadingHistory")})]})}):m.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(sr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-medium mb-2",style:{color:b.color},children:A("noBooksFound")}),u.jsx("p",{style:{color:b.color,opacity:.7},children:n.trim()||r!=="all"?A("tryAdjustingSearch"):"Start reading to see your chapter history here"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:b.panelBackground,borderColor:b.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(sr,{className:"w-8 h-8 text-blue-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:b.color,opacity:.7},children:A("chaptersTotal")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:b.color},children:m.length})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:b.panelBackground,borderColor:b.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Kh,{className:"w-8 h-8 text-green-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:b.color,opacity:.7},children:A("complete")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:b.color},children:m.filter(g=>g.completed).length})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:b.panelBackground,borderColor:b.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(zr,{className:"w-8 h-8 text-purple-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:b.color,opacity:.7},children:A("totalTime")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:b.color},children:Dt(m.reduce((g,w)=>g+w.totalTime,0),"auto")})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:b.panelBackground,borderColor:b.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ki,{className:"w-8 h-8 text-orange-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:b.color,opacity:.7},children:A("avgPerChapter")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:b.color},children:Dt(m.reduce((g,w)=>g+w.totalTime,0)/m.length,"auto")})]})]})})]}),u.jsx("div",{className:"rounded-lg shadow-sm border overflow-hidden",style:{backgroundColor:b.panelBackground,borderColor:b.borderColor},children:u.jsx("div",{className:"divide-y",style:{borderColor:b.borderColor},children:m.map(g=>{var C,E,S;const w=`${g.bookId}-${g.chapterIndex}`,x=c[w];return u.jsxs("div",{className:"p-6 hover:bg-gray-50 hover:bg-opacity-20 transition-colors",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.completed?u.jsx(Kh,{className:"w-5 h-5 text-green-600 flex-shrink-0"}):u.jsx(E2,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),u.jsx("h3",{className:"text-lg font-semibold truncate",style:{color:b.color},children:y(`${w}-title`,g.chapterTitle)}),u.jsx("button",{onClick:()=>{x!=null&&x.translatedText?k(`${w}-title`):N(`${w}-title`,g.chapterTitle)},disabled:x==null?void 0:x.isTranslating,className:"p-1 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:x!=null&&x.translatedText?A("originalText"):A("translate"),children:x!=null&&x.isTranslating?u.jsx(Mi,{className:"w-4 h-4 animate-spin"}):u.jsx(dn,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsxs("p",{style:{color:b.color,opacity:.7},children:[u.jsx("span",{className:"font-medium",children:y(`${w}-book`,g.bookTitle)})," by ",y(`${w}-author`,g.bookAuthor)]}),u.jsx("button",{onClick:()=>{const I=`${g.bookTitle} by ${g.bookAuthor}`,R=c[`${w}-book`];R!=null&&R.translatedText?k(`${w}-book`):N(`${w}-book`,I)},disabled:(C=c[`${w}-book`])==null?void 0:C.isTranslating,className:"p-1 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:(E=c[`${w}-book`])!=null&&E.translatedText?A("originalText"):A("translate"),children:(S=c[`${w}-book`])!=null&&S.isTranslating?u.jsx(Mi,{className:"w-4 h-4 animate-spin"}):u.jsx(dn,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",style:{color:b.color,opacity:.6},children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(zr,{className:"w-4 h-4"}),u.jsx("span",{children:Dt(g.totalTime,t)})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Ki,{className:"w-4 h-4"}),u.jsxs("span",{children:[A("lastRead")," ",Lv(g.lastRead)]})]}),u.jsx("span",{children:p(g.timesRead)})]})]}),u.jsxs("div",{className:"ml-4 text-right",children:[u.jsxs("div",{className:"text-lg font-bold",style:{color:b.color},children:[A("chapter")," ",g.chapterIndex+1]}),u.jsx("div",{className:"text-sm",style:{color:b.color,opacity:.6},children:g.firstRead.toLocaleDateString()})]})]}),(x==null?void 0:x.isTranslating)&&u.jsxs("div",{className:"mt-2 text-sm text-blue-600 flex items-center gap-2",children:[u.jsx(Mi,{className:"w-4 h-4 animate-spin"}),A("translating")]})]},w)})})})]})},Ew=async(t,e)=>new Promise(r=>{setTimeout(()=>{r(`[${e.toUpperCase()}] ${t}`)},1e3)}),Sw=({timeFormat:t,sortBy:e,filterBy:r,searchQuery:n,preferences:i})=>{const[s,a]=$.useState([]),[o,l]=$.useState(null),[c,d]=$.useState(!0),[h,v]=$.useState({});$.useEffect(()=>{b()},[]);const b=async()=>{try{d(!0);const w=await jv();a(w)}catch(w){console.error("Error loading book history:",w)}finally{d(!1)}},k=i!=null&&i.interfaceColors?{backgroundColor:i.interfaceColors.headerBackground||"#ffffff",color:i.interfaceColors.headerText||"#1f2937",borderColor:i.interfaceColors.headerBorder||"#e5e7eb",panelBackground:i.interfaceColors.panelBackground||"#ffffff",panelSecondaryBackground:i.interfaceColors.panelSecondaryBackground||"#f9fafb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb",panelBackground:"#ffffff",panelSecondaryBackground:"#f9fafb"},y=async(w,x,C="en")=>{v(E=>({...E,[w]:{isTranslating:!0,originalText:x,targetLanguage:C}}));try{const E=await Ew(x,C);v(S=>({...S,[w]:{...S[w],isTranslating:!1,translatedText:E}}))}catch(E){console.error("Translation failed:",E),v(S=>({...S,[w]:{...S[w],isTranslating:!1}}))}},p=w=>{const x=h[w];x!=null&&x.translatedText&&v(C=>{const E={...C};return delete E[w],E})},m=(w,x)=>{const C=h[w];return C!=null&&C.translatedText?C.translatedText:x},g=rp.useMemo(()=>{let w=s;if(n.trim()){const I=n.toLowerCase();w=w.filter(R=>R.bookTitle.toLowerCase().includes(I)||R.bookAuthor.toLowerCase().includes(I))}const x=new Date,C=new Date(x.getFullYear(),x.getMonth(),x.getDate()),E=new Date(C.getTime()-7*24*60*60*1e3),S=new Date(C.getTime()-30*24*60*60*1e3);switch(r){case"today":w=w.filter(I=>I.lastRead>=C);break;case"week":w=w.filter(I=>I.lastRead>=E);break;case"month":w=w.filter(I=>I.lastRead>=S);break;case"completed":w=w.filter(I=>I.completionPercentage>=100);break;case"in-progress":w=w.filter(I=>I.completionPercentage<100);break}switch(e){case"date":w.sort((I,R)=>R.lastRead.getTime()-I.lastRead.getTime());break;case"duration":w.sort((I,R)=>R.totalTime-I.totalTime);break;case"book":w.sort((I,R)=>I.bookTitle.localeCompare(R.bookTitle));break}return w},[s,n,r,e]);return c?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx(zr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4 animate-pulse"}),u.jsx("p",{style:{color:k.color},children:A("loadingReadingHistory")})]})}):g.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(sr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-medium mb-2",style:{color:k.color},children:A("noBooksFound")}),u.jsx("p",{style:{color:k.color,opacity:.7},children:n.trim()||r!=="all"?A("tryAdjustingSearch"):"Start reading to see your book history here"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:k.panelBackground,borderColor:k.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(sr,{className:"w-8 h-8 text-blue-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:k.color,opacity:.7},children:A("booksStarted")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:k.color},children:g.length})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:k.panelBackground,borderColor:k.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(ol,{className:"w-8 h-8 text-green-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:k.color,opacity:.7},children:A("complete")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:k.color},children:g.filter(w=>w.completionPercentage>=100).length})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:k.panelBackground,borderColor:k.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(zr,{className:"w-8 h-8 text-purple-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:k.color,opacity:.7},children:A("totalTime")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:k.color},children:Dt(g.reduce((w,x)=>w+x.totalTime,0),"auto")})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:k.panelBackground,borderColor:k.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ki,{className:"w-8 h-8 text-orange-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:k.color,opacity:.7},children:A("avgPerBook")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:k.color},children:Dt(g.reduce((w,x)=>w+x.totalTime,0)/g.length,"auto")})]})]})})]}),u.jsx("div",{className:"rounded-lg shadow-sm border overflow-hidden",style:{backgroundColor:k.panelBackground,borderColor:k.borderColor},children:u.jsx("div",{className:"divide-y",style:{borderColor:k.borderColor},children:g.map(w=>{var C,E,S,I;const x=h[w.bookId];return u.jsxs("div",{className:"transition-colors",children:[u.jsx("div",{className:"p-6 hover:bg-gray-50 hover:bg-opacity-20 cursor-pointer",onClick:()=>l(o===w.bookId?null:w.bookId),children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx(dd,{className:`w-5 h-5 text-gray-400 transition-transform ${o===w.bookId?"rotate-90":""}`}),u.jsx("h3",{className:"text-lg font-semibold truncate",style:{color:k.color},children:m(`${w.bookId}-title`,w.bookTitle)}),u.jsx("button",{onClick:R=>{R.stopPropagation(),x!=null&&x.translatedText?p(`${w.bookId}-title`):y(`${w.bookId}-title`,w.bookTitle)},disabled:x==null?void 0:x.isTranslating,className:"p-1 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:x!=null&&x.translatedText?A("originalText"):A("translate"),children:x!=null&&x.isTranslating?u.jsx(Mi,{className:"w-4 h-4 animate-spin"}):u.jsx(dn,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsxs("p",{style:{color:k.color,opacity:.7},children:["by ",m(`${w.bookId}-author`,w.bookAuthor)]}),u.jsx("button",{onClick:R=>{R.stopPropagation();const B=h[`${w.bookId}-author`];B!=null&&B.translatedText?p(`${w.bookId}-author`):y(`${w.bookId}-author`,w.bookAuthor)},disabled:(C=h[`${w.bookId}-author`])==null?void 0:C.isTranslating,className:"p-1 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:(E=h[`${w.bookId}-author`])!=null&&E.translatedText?A("originalText"):A("translate"),children:(S=h[`${w.bookId}-author`])!=null&&S.isTranslating?u.jsx(Mi,{className:"w-4 h-4 animate-spin"}):u.jsx(dn,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"mb-3",children:u.jsx("p",{className:"text-blue-600 font-medium",children:ww(w.totalTime)})}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",style:{color:k.color,opacity:.6},children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(zr,{className:"w-4 h-4"}),u.jsx("span",{children:Dt(w.totalTime,t)})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Ki,{className:"w-4 h-4"}),u.jsxs("span",{children:[A("lastRead")," ",Lv(w.lastRead)]})]}),u.jsxs("span",{children:[w.chaptersRead," ",A("chaptersTotal")," read"]}),w.completionPercentage>0&&u.jsxs("span",{children:[Math.round(w.completionPercentage),"% ",A("complete")]})]}),((x==null?void 0:x.isTranslating)||((I=h[`${w.bookId}-author`])==null?void 0:I.isTranslating))&&u.jsxs("div",{className:"mt-2 text-sm text-blue-600 flex items-center gap-2",children:[u.jsx(Mi,{className:"w-4 h-4 animate-spin"}),A("translating")]})]}),u.jsxs("div",{className:"ml-4 text-right",children:[u.jsx("div",{className:"text-sm mb-1",style:{color:k.color,opacity:.6},children:A("firstRead")}),u.jsx("div",{className:"text-sm font-medium",style:{color:k.color},children:w.firstRead.toLocaleDateString()})]})]})}),o===w.bookId&&u.jsxs("div",{className:"px-6 pb-6",style:{backgroundColor:k.panelSecondaryBackground},children:[u.jsx("h4",{className:"text-sm font-medium mb-3",style:{color:k.color},children:A("readingSessions")}),u.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:w.sessions.sort((R,B)=>B.startTime.getTime()-R.startTime.getTime()).map(R=>u.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded border",style:{backgroundColor:k.panelBackground,borderColor:k.borderColor},children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-sm font-medium",style:{color:k.color},children:R.chapterTitle}),u.jsxs("div",{className:"text-xs",style:{color:k.color,opacity:.6},children:[R.startTime.toLocaleDateString(),"  ",Dt(R.duration,t)]})]}),R.completed&&u.jsx("div",{className:"text-xs text-green-600 font-medium",children:A("complete")})]},R.id))})]})]},w.bookId)})})})]})},_w=({stats:t,timeFormat:e,preferences:r})=>{const n=t.dailyAverage>=18e5,s=r!=null&&r.interfaceColors?{backgroundColor:r.interfaceColors.headerBackground||"#ffffff",color:r.interfaceColors.headerText||"#1f2937",borderColor:r.interfaceColors.headerBorder||"#e5e7eb",panelBackground:r.interfaceColors.panelBackground||"#ffffff",panelSecondaryBackground:r.interfaceColors.panelSecondaryBackground||"#f9fafb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb",panelBackground:"#ffffff",panelSecondaryBackground:"#f9fafb"},a=[{title:A("totalReadingTime"),value:Dt(t.totalReadingTime,e),icon:zr,color:"blue",description:A("timeSpentReadingAcrossAllBooks")},{title:A("chaptersCompleted"),value:t.totalChaptersCompleted.toLocaleString(),icon:sr,color:"green",description:A("totalChaptersFinished")},{title:A("booksStarted"),value:t.totalBooksStarted.toLocaleString(),icon:ol,color:"purple",description:A("numberOfBooksBegun")},{title:A("booksCompleted"),value:t.totalBooksCompleted.toLocaleString(),icon:ef,color:"orange",description:A("booksReadFromStartToFinish")},{title:A("averageSession"),value:Dt(t.averageSessionDuration,e),icon:Oi,color:"indigo",description:A("averageTimePerReadingSession")},{title:A("longestSession"),value:Dt(t.longestSession,e),icon:b2,color:"yellow",description:A("longestSingleReadingSession")},{title:A("currentStreak"),value:n?`${t.currentStreak} ${A(t.currentStreak!==1?"days":"day")}`:"N/A",icon:tf,color:"red",description:A("consecutiveDaysWithReadingActivity"),disabled:!n},{title:A("longestStreak"),value:n?`${t.longestStreak} ${A(t.longestStreak!==1?"days":"day")}`:"N/A",icon:Ki,color:"teal",description:A("bestReadingStreakEver"),disabled:!n}],o=[{title:A("dailyAverage"),value:Dt(t.dailyAverage,e),description:A("averageReadingTimePerDay")},{title:A("weeklyAverage"),value:Dt(t.weeklyAverage,e),description:A("averageReadingTimePerWeek")},{title:A("monthlyAverage"),value:Dt(t.monthlyAverage,e),description:A("averageReadingTimePerMonth")}],l=(d,h=!1)=>{if(h)return"text-gray-400 bg-gray-100";const v={blue:"text-blue-600 bg-blue-100",green:"text-green-600 bg-green-100",purple:"text-purple-600 bg-purple-100",orange:"text-orange-600 bg-orange-100",indigo:"text-indigo-600 bg-indigo-100",yellow:"text-yellow-600 bg-yellow-100",red:"text-red-600 bg-red-100",teal:"text-teal-600 bg-teal-100"};return v[d]||v.blue},c=t.totalBooksStarted>0?(t.totalBooksCompleted/t.totalBooksStarted*100).toFixed(1):"0";return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold mb-6",style:{color:s.color},children:A("readingStatistics")}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(d=>{const h=d.icon,v=l(d.color,d.disabled);return u.jsxs("div",{className:`rounded-lg p-6 shadow-sm border hover:shadow-md transition-shadow ${d.disabled?"opacity-60":""}`,style:{backgroundColor:s.panelBackground,borderColor:s.borderColor},children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`p-3 rounded-lg ${v}`,children:u.jsx(h,{className:"w-6 h-6"})}),u.jsxs("div",{className:"ml-4 flex-1",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:s.color,opacity:.7},children:d.title}),u.jsx("p",{className:`text-2xl font-bold ${d.disabled?"text-gray-400":""}`,style:{color:d.disabled?"#9ca3af":s.color},children:d.value})]})]}),u.jsx("p",{className:"mt-3 text-sm",style:{color:s.color,opacity:.6},children:d.description})]},d.title)})})]}),!n&&u.jsx("div",{className:"border-l-4 border-yellow-400 p-4 rounded-lg",style:{backgroundColor:"#fefce8"},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(ag,{className:"w-5 h-5 text-yellow-400 mr-3"}),u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsxs("span",{className:"font-medium",children:[A("note"),":"]})," ",A("streakRequirement")]})})]})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold mb-6",style:{color:s.color},children:A("readingAverages")}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(d=>u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:s.panelBackground,borderColor:s.borderColor},children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-sm font-medium mb-2",style:{color:s.color,opacity:.7},children:d.title}),u.jsx("p",{className:"text-3xl font-bold text-blue-600 mb-2",children:d.value}),u.jsx("p",{className:"text-sm",style:{color:s.color,opacity:.6},children:d.description})]})},d.title))})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold mb-6",style:{color:s.color},children:A("achievementHighlights")}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:A("completionRate")}),u.jsxs("p",{className:"text-3xl font-bold",children:[c,"%"]}),u.jsxs("p",{className:"text-blue-100 text-sm",children:[t.totalBooksCompleted," ",A("of")," ",t.totalBooksStarted," ",A("booksCompleted")]})]}),u.jsx(ef,{className:"w-12 h-12 text-blue-200"})]})}),u.jsx("div",{className:`bg-gradient-to-r rounded-lg p-6 text-white ${n?"from-green-500 to-teal-600":"from-gray-400 to-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:A("readingConsistency")}),u.jsx("p",{className:"text-3xl font-bold",children:n?t.currentStreak:"N/A"}),u.jsx("p",{className:`text-sm ${n?"text-green-100":"text-gray-200"}`,children:n?`${A(t.currentStreak!==1?"days":"day")} ${A("currentStreak")}`:A("requires30MinDaily")})]}),u.jsx(tf,{className:`w-12 h-12 ${n?"text-green-200":"text-gray-300"}`})]})})]})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold mb-6",style:{color:s.color},children:A("readingInsights")}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:s.panelBackground,borderColor:s.borderColor},children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:s.color},children:A("readingHabits")}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{style:{color:s.color,opacity:.7},children:[A("averageSessionLength"),":"]}),u.jsx("span",{className:"font-medium",style:{color:s.color},children:Dt(t.averageSessionDuration,"auto")})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{style:{color:s.color,opacity:.7},children:[A("dailyReadingGoalProgress"),":"]}),u.jsx("span",{className:"font-medium",style:{color:s.color},children:t.dailyAverage>0?Dt(t.dailyAverage,"auto"):A("noData")})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{style:{color:s.color,opacity:.7},children:[A("readingConsistency"),":"]}),u.jsx("span",{className:"font-medium",style:{color:s.color},children:n?t.currentStreak>7?A("excellent"):t.currentStreak>3?A("good"):t.currentStreak>0?A("gettingStarted"):A("needsImprovement"):A("buildDailyHabit")})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:s.color},children:A("progressSummary")}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{style:{color:s.color,opacity:.7},children:[A("booksInProgress"),":"]}),u.jsx("span",{className:"font-medium",style:{color:s.color},children:t.totalBooksStarted-t.totalBooksCompleted})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{style:{color:s.color,opacity:.7},children:[A("completionRate"),":"]}),u.jsxs("span",{className:"font-medium",style:{color:s.color},children:[c,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{style:{color:s.color,opacity:.7},children:[A("bestStreak"),":"]}),u.jsx("span",{className:"font-medium",style:{color:s.color},children:n?`${t.longestStreak} ${A(t.longestStreak!==1?"days":"day")}`:"N/A"})]})]})]})]})})]})]})},Nw=({timeFormat:t,preferences:e})=>{const[r,n]=$.useState([]),[i,s]=$.useState(30),[a,o]=$.useState(!0);$.useEffect(()=>{l()},[i]);const l=async()=>{try{o(!0);const w=await Bv(i);n(w)}catch(w){console.error("Error loading reading trends:",w)}finally{o(!1)}},d=e!=null&&e.interfaceColors?{backgroundColor:e.interfaceColors.headerBackground||"#ffffff",color:e.interfaceColors.headerText||"#1f2937",borderColor:e.interfaceColors.headerBorder||"#e5e7eb",panelBackground:e.interfaceColors.panelBackground||"#ffffff",panelSecondaryBackground:e.interfaceColors.panelSecondaryBackground||"#f9fafb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb",panelBackground:"#ffffff",panelSecondaryBackground:"#f9fafb"},h=Math.max(...r.map(w=>w.totalTime),1),v=r.reduce((w,x)=>w+x.totalTime,0),b=r.reduce((w,x)=>w+x.sessionsCount,0),N=r.reduce((w,x)=>w+x.chaptersCompleted,0),k=r.filter(w=>w.totalTime>0).length,y=w=>Math.max(w/h*100,2),p=w=>{const x=w/h;return x>.8?"bg-blue-600":x>.6?"bg-blue-500":x>.4?"bg-blue-400":x>.2?"bg-blue-300":x>0?"bg-blue-200":"bg-gray-100"},m=w=>new Date(w).toLocaleDateString([],{month:"short",day:"numeric"}),g=w=>{const x=new Date(w);return[A("sunday"),A("monday"),A("tuesday"),A("wednesday"),A("thursday"),A("friday"),A("saturday")][x.getDay()]};return a?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx(Oi,{className:"w-12 h-12 text-gray-400 mx-auto mb-4 animate-pulse"}),u.jsx("p",{style:{color:d.color},children:A("loadingReadingTrends")})]})}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-bold",style:{color:d.color},children:A("readingTrends")}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("label",{className:"text-sm font-medium",style:{color:d.color},children:[A("period"),":"]}),u.jsxs("select",{value:i,onChange:w=>s(Number(w.target.value)),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",style:{backgroundColor:d.panelBackground,borderColor:d.borderColor,color:d.color},children:[u.jsx("option",{value:7,children:A("last7Days")}),u.jsx("option",{value:30,children:A("last30Days")}),u.jsx("option",{value:90,children:A("last90Days")}),u.jsx("option",{value:365,children:A("lastYear")})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:d.panelBackground,borderColor:d.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(zr,{className:"w-8 h-8 text-blue-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:d.color,opacity:.7},children:A("totalTime")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:d.color},children:Dt(v,"auto")})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:d.panelBackground,borderColor:d.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ki,{className:"w-8 h-8 text-green-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:d.color,opacity:.7},children:A("activeDays")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:d.color},children:k})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:d.panelBackground,borderColor:d.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(ol,{className:"w-8 h-8 text-purple-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:d.color,opacity:.7},children:A("sessions")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:d.color},children:b})]})]})}),u.jsx("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:d.panelBackground,borderColor:d.borderColor},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Oi,{className:"w-8 h-8 text-orange-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium",style:{color:d.color,opacity:.7},children:A("chaptersTotal")}),u.jsx("p",{className:"text-2xl font-bold",style:{color:d.color},children:N})]})]})})]}),u.jsxs("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:d.panelBackground,borderColor:d.borderColor},children:[u.jsx("h3",{className:"text-lg font-semibold mb-6",style:{color:d.color},children:A("dailyReadingActivity")}),r.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Oi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("p",{style:{color:d.color},children:A("noReadingDataAvailable")})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"relative",children:u.jsx("div",{className:"flex items-end justify-between h-64 px-2",children:r.map((w,x)=>u.jsxs("div",{className:"flex flex-col items-center group relative",children:[u.jsx("div",{className:`w-6 rounded-t transition-all duration-200 hover:opacity-80 ${p(w.totalTime)}`,style:{height:`${y(w.totalTime)}%`}}),u.jsx("div",{className:"mt-2 text-xs transform -rotate-45 origin-top-left",style:{color:d.color,opacity:.6},children:i<=7?g(w.date):m(w.date)}),u.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 text-white text-xs rounded py-2 px-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",style:{backgroundColor:"#1f2937"},children:[u.jsx("div",{className:"font-medium",children:new Date(w.date).toLocaleDateString()}),u.jsxs("div",{children:[A("time"),": ",$f(w.totalTime)]}),u.jsxs("div",{children:[A("sessions"),": ",w.sessionsCount]}),u.jsxs("div",{children:[A("chaptersTotal"),": ",w.chaptersCompleted]}),u.jsxs("div",{children:[A("books"),": ",w.booksRead.length]})]})]},w.date))})}),u.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",style:{color:d.color,opacity:.7},children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),u.jsx("span",{children:A("highActivity")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded"}),u.jsx("span",{children:A("mediumActivity")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-200 rounded"}),u.jsx("span",{children:A("lowActivity")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),u.jsx("span",{children:A("noActivity")})]})]})]})]}),i>=30&&r.length>0&&u.jsxs("div",{className:"rounded-lg p-6 shadow-sm border",style:{backgroundColor:d.panelBackground,borderColor:d.borderColor},children:[u.jsx("h3",{className:"text-lg font-semibold mb-6",style:{color:d.color},children:A("weeklyBreakdown")}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{key:"monday",dayIndex:1},{key:"tuesday",dayIndex:2},{key:"wednesday",dayIndex:3},{key:"thursday",dayIndex:4},{key:"friday",dayIndex:5},{key:"saturday",dayIndex:6},{key:"sunday",dayIndex:0}].map(({key:w,dayIndex:x})=>{const C=r.filter(S=>new Date(S.date).getDay()===x),E=C.reduce((S,I)=>S+I.totalTime,0)/Math.max(C.length,1);return u.jsxs("div",{className:"text-center p-4 rounded-lg",style:{backgroundColor:d.panelSecondaryBackground},children:[u.jsx("div",{className:"text-sm font-medium mb-2",style:{color:d.color},children:A(w)}),u.jsx("div",{className:"text-lg font-bold text-blue-600",children:$f(E)}),u.jsx("div",{className:"text-xs",style:{color:d.color,opacity:.6},children:A("avgPerDay")})]},w)})})]})]})},Iv=({preferences:t,onPreferencesChange:e,onClose:r})=>{const n=$.useRef(null),[i,s]=$.useState(null),[a,o]=$.useState(!1);$.useEffect(()=>{const k=y=>{n.current&&!n.current.contains(y.target)&&r()};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[r]);const c=t!=null&&t.interfaceColors?{backgroundColor:t.interfaceColors.panelBackground||"#ffffff",color:t.interfaceColors.panelText||"#1f2937",borderColor:t.interfaceColors.borderColor||"#e5e7eb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb"},d=k=>{const y=Ct(k),p={...t,selectedInterfaceTheme:k,interfaceTheme:k,interfaceColors:y.colors};if(t.syncInterfaceWithReading){const m=Ls.find(g=>g.id===k);m&&(p.selectedColorTheme=k,p.colors=m.colors,p.useThemeBasedColors=!0)}vr(y),e(p)},h=k=>{s(k);const y=Ct(k);vr(y)},v=()=>{s(null);const k=Ct(t.selectedInterfaceTheme||"light");vr(k)},b=k=>{const y={...t,syncInterfaceWithReading:k};if(k&&t.selectedInterfaceTheme){const p=Ls.find(m=>m.id===t.selectedInterfaceTheme);p&&(y.selectedColorTheme=p.id,y.colors=p.colors,y.useThemeBasedColors=!0)}e(y)},N=k=>{e({...t,applyFontGlobally:k})};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end animate-fade-in",children:u.jsxs("div",{ref:n,className:"w-full max-w-md h-full shadow-xl overflow-y-auto animate-slide-in-right",style:{backgroundColor:c.backgroundColor,fontFamily:t!=null&&t.applyFontGlobally?t.fontFamily==="Inter"?"Inter, sans-serif":t.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":t.fontFamily==="Crimson Text"?"Crimson Text, serif":t.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},"data-settings-panel":!0,children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0",style:{backgroundColor:c.backgroundColor,borderColor:c.borderColor},children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(I2,{className:"w-6 h-6",style:{color:"#007BFF"}}),u.jsx("h2",{className:"text-lg font-semibold",style:{color:c.color},children:A("homePageSettings")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>o(!a),className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:c.color},"aria-label":A("language"),children:u.jsx(dn,{className:"w-5 h-5"})}),a&&u.jsx("div",{className:"absolute top-full right-0 mt-2 z-50",children:u.jsx(ya,{onClose:()=>o(!1)})})]}),u.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:c.color},"aria-label":"Close settings",children:u.jsx(is,{className:"w-5 h-5"})})]})]}),u.jsxs("div",{className:"p-4 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(hd,{className:"w-5 h-5",style:{color:"#007BFF"}}),u.jsx("h3",{className:"text-lg font-semibold",style:{color:c.color},children:A("interfaceTheme")})]}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:Js.map(k=>u.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-300 ${(i||t.selectedInterfaceTheme)===k.id?"transform scale-105":"hover:transform hover:scale-102"}`,style:{borderColor:(i||t.selectedInterfaceTheme)===k.id?"#007BFF":c.borderColor,backgroundColor:(i||t.selectedInterfaceTheme)===k.id?"#007BFF10":"transparent"},onClick:()=>d(k.id),onMouseEnter:()=>h(k.id),onMouseLeave:v,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h4",{className:"font-medium",style:{color:c.color},children:k.name}),(i||t.selectedInterfaceTheme)===k.id&&u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#007BFF"}})]}),u.jsx("p",{className:"text-sm mb-3",style:{color:c.color,opacity:.7},children:k.description}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:k.colors.headerBackground,borderColor:c.borderColor},title:"Header"}),u.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:k.colors.panelBackground,borderColor:c.borderColor},title:"Panel"}),u.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:k.colors.buttonPrimary,borderColor:c.borderColor},title:"Accent"}),u.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:k.colors.textPrimary,borderColor:c.borderColor},title:"Text"})]})]},k.id))})]}),u.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:c.borderColor,backgroundColor:c.backgroundColor,opacity:.95},children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(_2,{className:"w-5 h-5",style:{color:"#007BFF"}}),u.jsx("span",{className:"font-medium",style:{color:c.color},children:A("syncInterfaceWithReading")})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.syncInterfaceWithReading||!1,onChange:k=>b(k.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.jsx("p",{className:"text-sm",style:{color:c.color,opacity:.7},children:A("syncInterfaceDescription")}),t.syncInterfaceWithReading&&u.jsx("div",{className:"mt-2 p-2 rounded",style:{backgroundColor:"#007BFF10"},children:u.jsxs("p",{className:"text-xs",style:{color:"#007BFF"},children:[" ",A("syncEnabled")," - ",A("themeChangesWillSync")]})})]}),u.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:c.borderColor,backgroundColor:c.backgroundColor,opacity:.95},children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("span",{className:"font-medium",style:{color:c.color},children:A("applyFontGlobally")}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.applyFontGlobally||!1,onChange:k=>N(k.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.jsx("p",{className:"text-sm",style:{color:c.color,opacity:.7},children:A("applyFontGloballyDescription")})]}),u.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:c.borderColor,backgroundColor:"#007BFF10"},children:[u.jsx("h4",{className:"font-medium mb-2",style:{color:c.color},children:A("currentTheme")}),u.jsx("p",{className:"text-sm",style:{color:c.color,opacity:.8},children:Ct(t.selectedInterfaceTheme||"light").name}),u.jsx("p",{className:"text-xs mt-1",style:{color:c.color,opacity:.6},children:Ct(t.selectedInterfaceTheme||"light").description}),t.syncInterfaceWithReading&&u.jsx("p",{className:"text-xs mt-2",style:{color:"#007BFF"},children:A("readingThemeWillMatch")})]})]}),u.jsx("div",{className:"p-4 border-t",style:{borderColor:c.borderColor,backgroundColor:c.backgroundColor,opacity:.8},children:u.jsx("p",{className:"text-sm text-center",style:{color:c.color},children:A("homePageThemeNote")})})]})})},Dw=({onClose:t,preferences:e,onPreferencesChange:r})=>{const[n,i]=$.useState("chapters"),[s,a]=$.useState(null),[o,l]=$.useState(null),[c,d]=$.useState("auto"),[h,v]=$.useState("date"),[b,N]=$.useState("all"),[k,y]=$.useState(""),[p,m]=$.useState(!0),[g,w]=$.useState(!1),[x,C]=$.useState(!1);$.useEffect(()=>{zd()},[]),$.useEffect(()=>{e?l(e):S()},[e]),$.useEffect(()=>{E()},[]);const E=async()=>{try{m(!0);const U=await xw();a(U)}catch(U){console.error("Error loading reading history stats:",U)}finally{m(!1)}},S=async()=>{try{const U=await ul();l(U)}catch(U){console.error("Error loading preferences:",U)}},I=async U=>{if(l(U),U.selectedInterfaceTheme){const Q=Ct(U.selectedInterfaceTheme);vr(Q)}try{await fd(U),r&&r(U)}catch(Q){console.error("Error saving preferences:",Q)}},B=o!=null&&o.interfaceColors?{backgroundColor:o.interfaceColors.headerBackground||"#ffffff",color:o.interfaceColors.headerText||"#1f2937",borderColor:o.interfaceColors.headerBorder||"#e5e7eb",panelBackground:o.interfaceColors.panelBackground||"#ffffff",panelSecondaryBackground:o.interfaceColors.panelSecondaryBackground||"#f9fafb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb",panelBackground:"#ffffff",panelSecondaryBackground:"#f9fafb"};return p?u.jsx("div",{className:"min-h-screen flex items-center justify-center transition-all duration-300",style:{backgroundColor:B.panelSecondaryBackground,fontFamily:o!=null&&o.applyFontGlobally?o.fontFamily==="Inter"?"Inter, sans-serif":o.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":o.fontFamily==="Crimson Text"?"Crimson Text, serif":o.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},children:u.jsxs("div",{className:"text-center",children:[u.jsx(zr,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-pulse"}),u.jsx("p",{style:{color:B.color},children:A("loadingReadingHistory")})]})}):u.jsxs("div",{className:"min-h-screen transition-all duration-300",style:{backgroundColor:B.panelSecondaryBackground,fontFamily:o!=null&&o.applyFontGlobally?o.fontFamily==="Inter"?"Inter, sans-serif":o.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":o.fontFamily==="Crimson Text"?"Crimson Text, serif":o.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},children:[u.jsx("div",{className:"border-l-4 border-yellow-400 p-4",style:{backgroundColor:"#fefce8"},children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(ag,{className:"w-5 h-5 text-yellow-400 mr-3"}),u.jsx("div",{children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsxs("span",{className:"font-medium",children:[A("experimentalFeature"),":"]})," ",A("experimentalWarning")]})})]})}),u.jsx("header",{className:"shadow-sm border-b transition-all duration-300",style:{backgroundColor:B.backgroundColor,borderColor:B.borderColor},children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300 transform hover:scale-105",style:{color:B.color},"aria-label":A("backToHome"),children:[u.jsx(T2,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:A("home")})]}),u.jsx("div",{className:"h-6 w-px",style:{backgroundColor:B.borderColor}}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",style:{color:B.color},children:[u.jsx(zr,{className:"w-8 h-8 text-blue-600"}),A("readingHistory")]}),s&&u.jsxs("p",{className:"mt-1",style:{color:B.color,opacity:.7},children:[Dt(s.totalReadingTime)," ",A("totalTime"),"  ",s.totalChaptersCompleted," ",A("chaptersCompleted")]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>C(!0),className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:B.color},"aria-label":A("homePageSettings"),children:u.jsx(al,{className:"w-5 h-5"})}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>w(!g),className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:B.color},"aria-label":A("language"),children:u.jsx(dn,{className:"w-5 h-5"})}),g&&u.jsx("div",{className:"absolute top-full right-0 mt-2 z-50",children:u.jsx("div",{className:"bg-white rounded-lg shadow-xl border-2 border-gray-300 py-2 min-w-48 animate-fade-in",style:{backgroundColor:B.panelBackground,borderColor:B.borderColor,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:u.jsx(ya,{onClose:()=>w(!1)})})})]}),u.jsxs("select",{value:c,onChange:U=>d(U.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm transition-all duration-300",style:{backgroundColor:B.panelBackground,borderColor:B.borderColor,color:B.color},children:[u.jsx("option",{value:"auto",children:A("autoFormat")}),u.jsx("option",{value:"minutes",children:A("minutes")}),u.jsx("option",{value:"hours",children:A("hours")}),u.jsx("option",{value:"detailed",children:A("detailed")})]})]})]}),u.jsx("div",{className:"mt-6 border-b",style:{borderColor:B.borderColor},children:u.jsx("nav",{className:"flex space-x-8",children:[{id:"chapters",label:A("chapterHistory"),icon:sr},{id:"books",label:A("bookHistory"),icon:zr},{id:"stats",label:A("statistics"),icon:ol},{id:"trends",label:A("trends"),icon:Oi}].map(U=>{const Q=U.icon;return u.jsxs("button",{onClick:()=>i(U.id),className:`flex items-center gap-2 py-3 px-1 border-b-2 font-medium text-sm transition-all duration-300 rounded-t-lg ${n===U.id?"border-blue-500 text-blue-600 transform scale-105":"border-transparent hover:border-gray-300 hover:bg-gray-100 hover:bg-opacity-20"}`,style:{color:n===U.id?"#007BFF":B.color,opacity:n===U.id?1:.7,backgroundColor:n===U.id?`${B.panelBackground}20`:"transparent"},children:[u.jsx(Q,{className:"w-4 h-4"}),U.label]},U.id)})})}),(n==="chapters"||n==="books")&&u.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),u.jsx("input",{type:"text",placeholder:A("searchBooksOrChapters"),value:k,onChange:U=>y(U.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",style:{backgroundColor:B.panelBackground,borderColor:B.borderColor,color:B.color}})]}),u.jsxs("select",{value:h,onChange:U=>v(U.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",style:{backgroundColor:B.panelBackground,borderColor:B.borderColor,color:B.color},children:[u.jsx("option",{value:"date",children:A("sortByDate")}),u.jsx("option",{value:"duration",children:A("sortByDuration")}),u.jsx("option",{value:"book",children:A("sortByBook")}),u.jsx("option",{value:"chapter",children:A("sortByChapter")})]}),u.jsxs("select",{value:b,onChange:U=>N(U.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",style:{backgroundColor:B.panelBackground,borderColor:B.borderColor,color:B.color},children:[u.jsx("option",{value:"all",children:A("allTime")}),u.jsx("option",{value:"today",children:A("today")}),u.jsx("option",{value:"week",children:A("thisWeek")}),u.jsx("option",{value:"month",children:A("thisMonth")}),u.jsx("option",{value:"completed",children:A("completedOnly")}),u.jsx("option",{value:"in-progress",children:A("inProgress")})]})]})]})}),u.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n==="chapters"&&u.jsx(Cw,{timeFormat:c,sortBy:h,filterBy:b,searchQuery:k,preferences:o}),n==="books"&&u.jsx(Sw,{timeFormat:c,sortBy:h,filterBy:b,searchQuery:k,preferences:o}),n==="stats"&&s&&u.jsx(_w,{stats:s,timeFormat:c,preferences:o}),n==="trends"&&u.jsx(Nw,{timeFormat:c,preferences:o})]}),x&&o&&u.jsx(Iv,{preferences:o,onPreferencesChange:I,onClose:()=>C(!1)})]})},Tw=({onOpenBook:t})=>{var pe,Ae,Se,Ve;const[e,r]=$.useState([]),[n,i]=$.useState([]),[s,a]=$.useState(""),[o,l]=$.useState(!1),[c,d]=$.useState(null),[h,v]=$.useState(!0),[b,N]=$.useState({}),[k,y]=$.useState(!1),[p,m]=$.useState(!1),[g,w]=$.useState(!1),[x,C]=$.useState("cover"),[E,S]=$.useState(!1),[I,R]=$.useState(null);Dv({enableDragOverlay:!1,allowedFileTypes:[".epub"],preventDefaultDragBehavior:!0}),$.useEffect(()=>{zd()},[]),$.useEffect(()=>{(async()=>{try{const X=await ul();if(R(X),X.selectedInterfaceTheme){const ce=Ct(X.selectedInterfaceTheme);vr(ce)}}catch(X){console.error("Error loading preferences:",X)}})()},[]),$.useEffect(()=>{(async()=>{try{const X=await hg();r(X),i(X);const ce={};for(const Ce of X){const Ne=await uf(Ce.id);Ne&&(ce[Ce.id]=Ne)}N(ce)}catch(X){console.error("Error loading books:",X)}finally{v(!1)}})()},[]),$.useEffect(()=>{if(!s.trim())i(e);else{const H=e.filter(X=>X.title.toLowerCase().includes(s.toLowerCase())||X.author.toLowerCase().includes(s.toLowerCase()));i(H)}},[e,s]);const B=$.useCallback(H=>{var Ce;H.preventDefault(),H.stopPropagation(),Array.from(((Ce=H.dataTransfer)==null?void 0:Ce.items)||[]).some(Ne=>Ne.kind==="file"&&Ne.type==="application/epub+zip")&&S(!0)},[]),U=$.useCallback(H=>{var Ce;H.preventDefault(),H.stopPropagation();const X=H.target,ce=H.relatedTarget;(Ce=X.closest(".library-container"))!=null&&Ce.contains(ce)||S(!1)},[]),Q=$.useCallback(H=>{var Ce;H.preventDefault(),H.stopPropagation(),S(!1),Array.from(((Ce=H.dataTransfer)==null?void 0:Ce.files)||[]).find(Ne=>Ne.name.toLowerCase().endsWith(".epub"))&&l(!0)},[]),fe=async H=>{r(ce=>[H,...ce]);const X=await uf(H.id);X&&N(ce=>({...ce,[H.id]:X}))},oe=async H=>{if(window.confirm(A("confirmDeleteBook")))try{await ex(H),r(X=>X.filter(ce=>ce.id!==H)),N(X=>{const ce={...X};return delete ce[H],ce}),d(null)}catch(X){console.error("Error deleting book:",X)}},ue=async H=>{if(R(H),H.selectedInterfaceTheme){const X=Ct(H.selectedInterfaceTheme);vr(X)}try{await fd(H)}catch(X){console.error("Error saving preferences:",X)}},le=H=>Math.round(H*100),V=H=>{if(!H)return A("never");const ce=(new Date().getTime()-H.getTime())/(1e3*60*60);return ce<1?A("justNow"):ce<24?`${Math.round(ce)}${A("hoursAgo")}`:ce<168?`${Math.round(ce/24)}${A("daysAgo")}`:H.toLocaleDateString()},he=()=>{const H=[...n];return H.push(null),H},ve=()=>I!=null&&I.interfaceColors?{backgroundColor:I.interfaceColors.headerBackground||"#ffffff",color:I.interfaceColors.headerText||"#1f2937",borderColor:I.interfaceColors.headerBorder||"#e5e7eb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb"};if(p)return u.jsx(Dw,{onClose:()=>m(!1),preferences:I,onPreferencesChange:ue});if(h)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx(sr,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-pulse"}),u.jsx("p",{className:"text-gray-600",children:A("loadingLibrary")})]})});const re=ve();return u.jsxs("div",{className:"library-container min-h-screen transition-all duration-300",style:{backgroundColor:((pe=I==null?void 0:I.interfaceColors)==null?void 0:pe.panelSecondaryBackground)||"#f9fafb",fontFamily:I!=null&&I.applyFontGlobally?I.fontFamily==="Inter"?"Inter, sans-serif":I.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":I.fontFamily==="Crimson Text"?"Crimson Text, serif":I.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},onDragOver:B,onDragLeave:U,onDrop:Q,children:[E&&u.jsx("div",{className:"fixed inset-0 bg-blue-500 bg-opacity-20 z-50 flex items-center justify-center pointer-events-none",children:u.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-xl border-2 border-dashed border-blue-500",children:[u.jsx(Ui,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),u.jsx("p",{className:"text-xl font-semibold text-gray-900",children:A("dropEpubHere")})]})}),u.jsx("header",{className:"shadow-sm border-b transition-all duration-300",style:{backgroundColor:re.backgroundColor,borderColor:re.borderColor},children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg border-2",style:{backgroundColor:"#007BFF20",borderColor:"#007BFF"},children:[u.jsx(A2,{className:"w-8 h-8 text-blue-600"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",style:{color:re.color},children:A("myLibrary")}),u.jsxs("p",{className:"text-sm",style:{color:re.color,opacity:.7},children:[e.length," ",e.length===1?A("book"):A("books")]})]})]}),u.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-3 px-4 py-2 rounded-lg border-2 hover:border-gray-300 transition-all duration-300 transform hover:scale-105",style:{backgroundColor:((Ae=I==null?void 0:I.interfaceColors)==null?void 0:Ae.panelSecondaryBackground)||"#f9fafb",borderColor:re.borderColor,color:re.color},"aria-label":"My Statistics",children:[u.jsx(Oi,{className:"w-8 h-8 text-gray-600"}),u.jsxs("div",{className:"text-left",children:[u.jsx("h2",{className:"text-xl font-bold",children:A("readingHistory")}),u.jsx("p",{className:"text-sm opacity-70",children:A("trackYourProgress")})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center rounded-lg p-1",style:{backgroundColor:((Se=I==null?void 0:I.interfaceColors)==null?void 0:Se.panelSecondaryBackground)||"#f3f4f6"},children:[u.jsx("button",{onClick:()=>C("cover"),className:`p-2 rounded-md transition-all duration-200 ${x==="cover"?"shadow-sm":""}`,style:{backgroundColor:x==="cover"?re.backgroundColor:"transparent",color:x==="cover"?"#007BFF":re.color},title:A("coverView"),children:u.jsx(N2,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>C("detail"),className:`p-2 rounded-md transition-all duration-200 ${x==="detail"?"shadow-sm":""}`,style:{backgroundColor:x==="detail"?re.backgroundColor:"transparent",color:x==="detail"?"#007BFF":re.color},title:A("detailView"),children:u.jsx(j2,{className:"w-4 h-4"})})]}),u.jsx("button",{onClick:()=>w(!0),className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:re.color},"aria-label":A("homePageSettings"),children:u.jsx(al,{className:"w-5 h-5"})}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>y(!k),className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:re.color},"aria-label":A("language"),children:u.jsx(dn,{className:"w-5 h-5"})}),k&&u.jsx("div",{className:"absolute top-full right-0 mt-2 z-50",children:u.jsx(ya,{onClose:()=>y(!1)})})]}),u.jsxs("button",{onClick:()=>l(!0),className:"text-white px-4 py-2 rounded-lg hover:opacity-90 transition-all duration-300 flex items-center gap-2 transform hover:scale-105",style:{backgroundColor:"#007BFF"},children:[u.jsx(lg,{className:"w-5 h-5"}),A("addBook")]})]})]}),u.jsxs("div",{className:"mt-6 relative",children:[u.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:A("searchBooks"),value:s,onChange:H=>a(H.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",style:{backgroundColor:re.backgroundColor,borderColor:re.borderColor,color:re.color}})]})]})}),u.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.length===0&&e.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(sr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-medium mb-2",style:{color:re.color},children:A("noBooksYet")}),u.jsx("p",{className:"mb-6",style:{color:re.color,opacity:.7},children:A("addFirstBook")}),u.jsx("button",{onClick:()=>l(!0),className:"text-white px-6 py-3 rounded-lg hover:opacity-90 transition-all duration-300 transform hover:scale-105",style:{backgroundColor:"#007BFF"},children:A("addYourFirstBook")})]}):n.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Kn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-medium mb-2",style:{color:re.color},children:A("noBooksFound")}),u.jsx("p",{style:{color:re.color,opacity:.7},children:A("tryAdjustingSearch")})]}):x==="cover"?u.jsx("div",{className:"grid grid-cols-5 gap-6",children:he().map((H,X)=>{var ce;return H?u.jsxs("div",{className:"rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border overflow-hidden group transform hover:scale-105",style:{backgroundColor:re.backgroundColor,borderColor:re.borderColor},children:[u.jsxs("div",{className:"aspect-[3/4] bg-gradient-to-br from-blue-100 to-purple-100 relative overflow-hidden cursor-pointer",onClick:()=>t(H),children:[b[H.id]||H.cover?u.jsx("img",{src:b[H.id]||H.cover,alt:`${H.title} cover`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:Ce=>{var De,Fe;const Ne=Ce.target;Ne.style.display="none",(Fe=(De=Ne.parentElement)==null?void 0:De.querySelector(".fallback-cover"))==null||Fe.classList.remove("hidden")}}):null,u.jsx("div",{className:`fallback-cover w-full h-full flex items-center justify-center ${b[H.id]||H.cover?"hidden":""}`,children:u.jsx(sr,{className:"w-16 h-16 text-gray-400"})}),u.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),d(c===H.id?null:H.id)},className:"bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-all duration-300",children:u.jsx(Qh,{className:"w-4 h-4"})}),c===H.id&&u.jsx("div",{className:"absolute top-full right-0 mt-1 rounded-lg shadow-lg border py-1 z-10 animate-fade-in",style:{backgroundColor:re.backgroundColor,borderColor:re.borderColor},children:u.jsxs("button",{onClick:Ce=>{Ce.stopPropagation(),oe(H.id)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 hover:bg-opacity-20 flex items-center gap-2 transition-colors duration-300",children:[u.jsx(tc,{className:"w-4 h-4"}),A("delete")]})})]})})]}),H.progress>0&&u.jsxs("div",{className:"px-4 pt-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",style:{color:re.color,opacity:.7},children:[u.jsx("span",{children:A("complete")}),u.jsxs("span",{className:"font-medium",children:[le(H.progress),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${le(H.progress)}%`}})})]}),u.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>t(H),children:[u.jsx("h3",{className:"font-semibold mb-1 line-clamp-2 leading-tight text-sm",style:{color:re.color},children:H.title}),u.jsxs("p",{className:"text-xs mb-2 line-clamp-1",style:{color:re.color,opacity:.7},children:["by ",H.author]}),u.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:re.color,opacity:.6},children:u.jsxs("span",{children:[A("lastRead"),": ",V(H.lastRead)]})})]})]},H.id):u.jsxs("div",{className:"aspect-[3/4] border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-gray-400 hover:border-gray-400 transition-all duration-300 cursor-pointer group",style:{borderColor:re.borderColor,backgroundColor:((ce=I==null?void 0:I.interfaceColors)==null?void 0:ce.panelSecondaryBackground)||"#f9fafb"},onClick:()=>l(!0),"data-drop-zone":"true",children:[u.jsx(Ui,{className:"w-8 h-8 mb-2 group-hover:scale-110 transition-transform duration-300"}),u.jsx("span",{className:"text-sm font-medium text-center px-2",children:A("dragAndDropEbook")}),u.jsxs("span",{className:"text-xs text-center px-2 mt-1",children:[A("or")," ",A("selectEbook")]})]},`placeholder-${X}`)})}):u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"rounded-xl shadow-sm border-2 border-dashed p-6 hover:border-gray-400 transition-all duration-300 cursor-pointer group",style:{backgroundColor:re.backgroundColor,borderColor:re.borderColor},onClick:()=>l(!0),"data-drop-zone":"true",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-16 h-20 rounded-lg flex items-center justify-center",style:{backgroundColor:((Ve=I==null?void 0:I.interfaceColors)==null?void 0:Ve.panelSecondaryBackground)||"#f3f4f6"},children:u.jsx(Ui,{className:"w-6 h-6 text-gray-400 group-hover:scale-110 transition-transform duration-300"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-1",style:{color:re.color,opacity:.7},children:A("selectEbook")}),u.jsx("p",{className:"text-sm",style:{color:re.color,opacity:.5},children:A("dragAndDropEbook")})]})]})}),n.map(H=>u.jsx("div",{className:"rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border overflow-hidden group",style:{backgroundColor:re.backgroundColor,borderColor:re.borderColor},children:u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsxs("div",{className:"w-16 h-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg overflow-hidden flex-shrink-0 cursor-pointer",onClick:()=>t(H),children:[b[H.id]||H.cover?u.jsx("img",{src:b[H.id]||H.cover,alt:`${H.title} cover`,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300",onError:X=>{var Ce,Ne;const ce=X.target;ce.style.display="none",(Ne=(Ce=ce.parentElement)==null?void 0:Ce.querySelector(".fallback-cover"))==null||Ne.classList.remove("hidden")}}):null,u.jsx("div",{className:`fallback-cover w-full h-full flex items-center justify-center ${b[H.id]||H.cover?"hidden":""}`,children:u.jsx(sr,{className:"w-6 h-6 text-gray-400"})})]}),u.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>t(H),children:[u.jsx("h3",{className:"font-semibold mb-1 text-lg",style:{color:re.color},children:H.title}),u.jsxs("p",{className:"mb-2",style:{color:re.color,opacity:.7},children:["by ",H.author]}),H.progress>0&&u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",style:{color:re.color,opacity:.7},children:[u.jsx("span",{children:A("complete")}),u.jsxs("span",{className:"font-medium",children:[le(H.progress),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${le(H.progress)}%`}})})]}),u.jsx("div",{className:"flex items-center justify-between text-sm",style:{color:re.color,opacity:.6},children:u.jsxs("span",{children:[A("lastRead"),": ",V(H.lastRead)]})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:X=>{X.stopPropagation(),d(c===H.id?null:H.id)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",children:u.jsx(Qh,{className:"w-5 h-5"})}),c===H.id&&u.jsx("div",{className:"absolute top-full right-0 mt-1 rounded-lg shadow-lg border py-1 z-10 animate-fade-in",style:{backgroundColor:re.backgroundColor,borderColor:re.borderColor},children:u.jsxs("button",{onClick:X=>{X.stopPropagation(),oe(H.id)},className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 hover:bg-opacity-20 flex items-center gap-2 transition-colors duration-300",children:[u.jsx(tc,{className:"w-4 h-4"}),A("delete")]})})]})]})})},H.id))]})}),o&&u.jsx("div",{className:"animate-fade-in",children:u.jsx(pw,{onBookAdded:fe,onClose:()=>l(!1)})}),g&&I&&u.jsx(Iv,{preferences:I,onPreferencesChange:ue,onClose:()=>w(!1)})]})},Aw=({book:t,currentChapter:e,chapterProgress:r,totalChapters:n,onBackToLibrary:i,onToggleMenu:s,onToggleSettings:a,onToggleSearch:o,onToggleBookmarks:l,onToggleFullscreen:c,isFullscreen:d,hideMenuWhileReading:h,preferences:v})=>{const[b,N]=$.useState(!0),[k,y]=$.useState(0),[p,m]=$.useState(!1),[g,w]=$.useState(!1),[x,C]=$.useState(""),[E,S]=$.useState(!1),I=r/n*100;$.useEffect(()=>{if(!h){N(!0);return}const ue=()=>{const V=window.scrollY;V<50?N(!0):V>k&&V>100?N(!1):V<k&&N(!0),y(V)},le=()=>{requestAnimationFrame(ue)};return window.addEventListener("scroll",le),()=>window.removeEventListener("scroll",le)},[k,h]);const R=async()=>{if(navigator.share)try{await navigator.share({title:t.title,text:`Reading "${t.title}" by ${t.author}`,url:window.location.href})}catch(ue){console.log("Error sharing:",ue)}else navigator.clipboard.writeText(window.location.href)},B=()=>{v!=null&&v.enableFastFavorite&&(v!=null&&v.fastFavoriteName)?U(v.fastFavoriteName):(w(!0),C(""))},U=async ue=>{if(!e||!ue.trim())return;const le={id:`bookmark-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,bookId:t.id,chapterIndex:r-1,position:window.scrollY,text:`Chapter: ${e.title}`,label:ue.trim(),createdAt:new Date};try{await oc(le),w(!1),C("");const V=document.querySelector("[data-favorite-button]");V&&(V.style.transform="scale(1.2)",setTimeout(()=>{V.style.transform="scale(1)"},200))}catch(V){console.error("Error saving favorite:",V),alert("Failed to save favorite. Please try again.")}},Q=()=>{if(!(!e||!(v!=null&&v.enableTextToSpeech)))if(E)speechSynthesis.cancel(),S(!1);else{const ue=e.content.replace(/<[^>]*>/g,""),le=new SpeechSynthesisUtterance(ue);le.onstart=()=>S(!0),le.onend=()=>S(!1),le.onerror=()=>S(!1),speechSynthesis.speak(le)}},fe=()=>{if(!(v!=null&&v.selectedInterfaceTheme))return{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb"};const ue=Ct(v.selectedInterfaceTheme);return{backgroundColor:ue.colors.headerBackground,color:ue.colors.headerText,borderColor:ue.colors.headerBorder}};if(d)return null;const oe=fe();return u.jsxs("header",{className:`shadow-sm border-b sticky top-0 z-40 transition-transform duration-300 ${b||p?"translate-y-0":"-translate-y-full"}`,style:{backgroundColor:oe.backgroundColor,borderColor:oe.borderColor,fontFamily:v!=null&&v.applyFontGlobally?v.fontFamily==="Inter"?"Inter, sans-serif":v.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":v.fontFamily==="Crimson Text"?"Crimson Text, serif":v.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[u.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors",style:{color:oe.color},"aria-label":A("backToLibrary"),children:u.jsx(y2,{className:"w-5 h-5"})}),u.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors",style:{color:oe.color},"aria-label":A("tableOfContents"),children:u.jsx(L2,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex-1 min-w-0 mx-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-lg font-semibold truncate",style:{color:oe.color},children:(e==null?void 0:e.title)||t.title}),u.jsxs("p",{className:"text-sm truncate",style:{color:oe.color,opacity:.7},children:[t.author,"  ",A("chapter")," ",r," ",A("of")," ",n]})]}),u.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-1",children:u.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${I}%`,backgroundColor:"#007BFF"}})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors",style:{color:oe.color},"aria-label":A("search"),children:u.jsx(Kn,{className:"w-5 h-5"})}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors",style:{color:oe.color},"aria-label":A("bookmarks"),children:u.jsx(ec,{className:"w-5 h-5"})}),u.jsx("button",{onClick:B,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:oe.color},"aria-label":A("addToFavorites"),"data-favorite-button":!0,children:u.jsx(D2,{className:"w-5 h-5"})}),(v==null?void 0:v.enableTextToSpeech)&&u.jsx("button",{onClick:Q,className:`p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors ${E?"bg-blue-100 bg-opacity-20":""}`,style:{color:E?"#007BFF":oe.color},"aria-label":E?"Stop reading":"Start reading",children:u.jsx(ug,{className:"w-5 h-5"})}),u.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors",style:{color:oe.color},"aria-label":A("share"),children:u.jsx(P2,{className:"w-5 h-5"})}),u.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors",style:{color:oe.color},"aria-label":A("settings"),children:u.jsx(al,{className:"w-5 h-5"})}),u.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-colors",style:{color:oe.color},"aria-label":A("fullscreen"),children:u.jsx(B2,{className:"w-5 h-5"})})]})]})}),g&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4 animate-scale-in",style:{backgroundColor:oe.backgroundColor,color:oe.color},children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:A("addFavorite")}),u.jsx("input",{type:"text",placeholder:A("enterBookmarkName"),value:x,onChange:ue=>C(ue.target.value),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",style:{backgroundColor:oe.backgroundColor,color:oe.color,borderColor:oe.borderColor},autoFocus:!0,onKeyPress:ue=>{ue.key==="Enter"&&x.trim()&&U(x)}}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>x.trim()&&U(x),disabled:!x.trim(),className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:A("save")}),u.jsx("button",{onClick:()=>{w(!1),C("")},className:"px-4 py-2 border rounded-lg hover:bg-gray-50 hover:bg-opacity-20 transition-all duration-300",style:{borderColor:oe.borderColor,color:oe.color},children:A("cancel")})]})]})}),h&&!b&&u.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1 bg-gray-600 text-white px-3 py-1 rounded-b-lg text-xs opacity-75 hover:opacity-100 transition-opacity",children:u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(S2,{className:"w-3 h-3"}),u.jsx("span",{children:"Menu hidden - hover to show"})]})})]})},jw=({preferences:t})=>{const e=()=>{window.scrollTo({top:0,behavior:"smooth"})},r=()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})};if(!t.scrollButtons.visible)return null;const n=()=>{if(t.scrollButtons.size==="custom"&&t.scrollButtons.customSize){const c=t.scrollButtons.customSize;return{width:`${c}px`,height:`${c}px`}}switch(t.scrollButtons.size){case"small":return{width:"40px",height:"40px"};case"large":return{width:"64px",height:"64px"};default:return{width:"48px",height:"48px"}}},i=()=>{if(t.scrollButtons.size==="custom"&&t.scrollButtons.customSize){const c=Math.max(16,Math.min(32,t.scrollButtons.customSize*.4));return{width:`${c}px`,height:`${c}px`}}switch(t.scrollButtons.size){case"small":return{width:"16px",height:"16px"};case"large":return{width:"32px",height:"32px"};default:return{width:"24px",height:"24px"}}},a=document.querySelector("[data-settings-panel]")!==null?"bottom-6 left-6":"bottom-20 right-6",o=n(),l=i();return u.jsxs("div",{className:`fixed ${a} flex flex-col gap-2 z-30 transition-all duration-300`,children:[u.jsx("button",{onClick:e,className:"bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-110 flex items-center justify-center",style:{...o,borderRadius:"8px",border:"2px solid #ffffff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},"aria-label":"Scroll to top",children:u.jsx(C2,{style:l})}),u.jsx("button",{onClick:r,className:"bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-110 flex items-center justify-center",style:{...o,borderRadius:"8px",border:"2px solid #ffffff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},"aria-label":"Scroll to bottom",children:u.jsx(k2,{style:l})})]})},Bw=({chapter:t,preferences:e,onNextChapter:r,onPreviousChapter:n,canGoNext:i,canGoPrevious:s,onContentClick:a})=>{var y;const o=$.useRef(null),l=()=>{var p,m;return{backgroundColor:((p=e.colors)==null?void 0:p.backgroundColor)||"#ffffff",color:((m=e.colors)==null?void 0:m.textColor)||"#000000"}},c=()=>{const p={Georgia:"Georgia, serif",Inter:"Inter, -apple-system, BlinkMacSystemFont, sans-serif","JetBrains Mono":"JetBrains Mono, monospace"};return p[e.fontFamily]||p.Inter},d=()=>{const p={phone:"100%",normal:"75ch",full:"100%"};return p[e.maxWidth]||p.full},h=()=>e.maxWidth==="phone"?"w-full px-4 max-w-sm mx-auto":e.maxWidth==="full"?"w-full px-4 sm:px-6 lg:px-8":"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",v={...l(),fontSize:`${e.fontSize}px`,fontFamily:c(),lineHeight:e.lineHeight,padding:`${e.marginSize}em`,maxWidth:d(),margin:e.maxWidth==="full"?"0":"0 auto"};$.useEffect(()=>{const p=()=>{};return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]),$.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[t==null?void 0:t.id]),$.useEffect(()=>{const p=()=>{const m=window.innerWidth;let g=1;if(m<=480?g=.7:m<=768?g=.8:m<=1024?g=.9:m<=1440?g=1:g=1.2,m>=2560&&(g*=1.3),o.current){const w=Math.max(12,e.fontSize*g);o.current.style.fontSize=`${w}px`}};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[e.fontSize]);const b=()=>{r()},N=()=>{n()},k=p=>{var w;const m=document.createElement("div");m.innerHTML=p;const g=m.querySelector("h1, h2, h3");if(g&&(t!=null&&t.title)){const x=(w=g.textContent)==null?void 0:w.trim().toLowerCase(),C=t.title.trim().toLowerCase();(x===C||x===`chapter ${C}`||x!=null&&x.includes(C))&&g.remove()}return m.innerHTML};return t?u.jsxs("div",{className:"min-h-screen transition-all duration-300",style:l(),children:[u.jsxs("main",{className:h(),onClick:a,children:[u.jsx("article",{ref:o,className:"prose prose-lg max-w-none transition-all duration-300",style:v,children:u.jsx("div",{dangerouslySetInnerHTML:{__html:k(t.content)},className:"chapter-content","data-custom-font":"true",style:{fontSize:`${e.fontSize}px`,lineHeight:e.lineHeight,fontFamily:c(),color:((y=e.colors)==null?void 0:y.textColor)||"#000000"}})}),u.jsxs("div",{className:"flex justify-between items-center py-8 px-4",children:[u.jsxs("button",{onClick:N,disabled:!s,className:`flex items-center gap-2 px-6 py-3 rounded-lg transition-all duration-300 ${s?"bg-blue-600 text-white hover:bg-blue-700 transform hover:scale-105":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[u.jsx(og,{className:"w-5 h-5"}),"Previous Chapter"]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-sm text-gray-500 transition-colors duration-300",style:{color:e.theme==="dark"?"#9ca3af":"#6b7280"},children:"Scroll to read  Use arrow keys to navigate"})}),u.jsxs("button",{onClick:b,disabled:!i,className:`flex items-center gap-2 px-6 py-3 rounded-lg transition-all duration-300 ${i?"bg-blue-600 text-white hover:bg-blue-700 transform hover:scale-105":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Next Chapter",u.jsx(dd,{className:"w-5 h-5"})]})]})]}),u.jsx(jw,{preferences:e})]}):u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("p",{className:"text-gray-500",children:"No chapter content available"})})},Lw=({chapters:t,currentChapterIndex:e,onChapterSelect:r,onClose:n,preferences:i})=>{const s=$.useRef(null);$.useEffect(()=>{const l=c=>{s.current&&!s.current.contains(c.target)&&n()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[n]);const o=i!=null&&i.interfaceColors?{backgroundColor:i.interfaceColors.panelBackground||"#ffffff",color:i.interfaceColors.textPrimary||"#1f2937",borderColor:i.interfaceColors.panelBorder||"#e5e7eb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb"};return u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex animate-fade-in",children:[u.jsxs("div",{ref:s,className:"w-full max-w-md h-full shadow-xl flex flex-col animate-slide-in-left overflow-hidden",style:{backgroundColor:o.backgroundColor,fontFamily:i!=null&&i.applyFontGlobally?i.fontFamily==="Inter"?"Inter, sans-serif":i.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":i.fontFamily==="Crimson Text"?"Crimson Text, serif":i.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",style:{borderColor:o.borderColor},children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sr,{className:"w-6 h-6",style:{color:"#007BFF"}}),u.jsx("h2",{className:"text-lg font-semibold",style:{color:o.color},children:A("tableOfContents")})]}),u.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:o.color},"aria-label":"Close table of contents",children:u.jsx(is,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:t.length===0?u.jsxs("div",{className:"p-4 text-center",style:{color:o.color,opacity:.6},children:[u.jsx(sr,{className:"w-12 h-12 mx-auto mb-3",style:{color:o.color,opacity:.3}}),u.jsx("p",{children:A("noChaptersAvailable")})]}):u.jsx("div",{className:"p-2",children:t.map((l,c)=>u.jsx("button",{onClick:()=>r(c),className:`w-full text-left p-3 rounded-lg mb-1 transition-all duration-300 ${c===e?"transform scale-105":"hover:transform hover:scale-105"}`,style:{backgroundColor:c===e?"#007BFF20":"transparent",borderLeft:c===e?"4px solid #007BFF":"4px solid transparent",color:c===e?"#007BFF":o.color},children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-sm font-medium mt-0.5 flex-shrink-0",style:{color:c===e?"#007BFF":o.color,opacity:c===e?1:.6},children:c+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-medium mb-1 break-words",children:l.title}),c===e&&u.jsx("span",{className:"text-xs font-medium",style:{color:"#007BFF"},children:A("currentlyReading")})]})]})},l.id))})}),u.jsx("div",{className:"p-4 border-t flex-shrink-0",style:{borderColor:o.borderColor,backgroundColor:o.backgroundColor,opacity:.8},children:u.jsxs("p",{className:"text-sm text-center",style:{color:o.color},children:[t.length," ",A("chaptersTotal"),"  Use arrow keys to navigate"]})})]}),u.jsx("div",{className:"flex-1",onClick:n})]})},qf=({color:t,onChange:e,label:r,defaultColor:n,disabled:i=!1})=>{const[s,a]=$.useState(!1),[o,l]=$.useState(t),c=$.useRef(null);$.useEffect(()=>{const v=b=>{c.current&&!c.current.contains(b.target)&&a(!1)};return s&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[s]);const d=v=>{l(v),e(v)},h=t===n;return u.jsxs("div",{className:"relative",ref:c,children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:r}),u.jsxs("button",{onClick:()=>!i&&a(!s),disabled:i,className:`w-full h-12 rounded-lg border-2 flex items-center justify-between px-3 transition-all duration-300 ${i?"opacity-50 cursor-not-allowed bg-gray-100":"hover:border-gray-400 cursor-pointer"}`,style:{backgroundColor:i?"#f3f4f6":t,borderColor:h?"#007BFF":"#d1d5db"},children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:t}}),u.jsxs("span",{className:"text-sm font-medium",style:{color:i?"#6b7280":"#1f2937"},children:[h&&u.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs mr-2",children:A("default")}),t.toUpperCase()]})]}),!i&&u.jsx(hd,{className:"w-4 h-4 text-gray-400"})]}),s&&!i&&u.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 animate-fade-in",children:u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"color",value:o,onChange:v=>d(v.target.value),className:"w-full h-10 rounded border border-gray-300 cursor-pointer"}),u.jsx("input",{type:"text",value:o,onChange:v=>d(v.target.value),placeholder:"#000000",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>d(n),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors text-sm",children:A("resetToDefault")}),u.jsx("button",{onClick:()=>a(!1),className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:A("done")})]})]})})]})},Iw=({preferences:t,onPreferencesChange:e,onClose:r})=>{const[n,i]=$.useState("reading"),[s,a]=$.useState(!1),[o,l]=$.useState(!1),[c,d]=$.useState(t.fastFavoriteName||"Quick Bookmark"),[h,v]=$.useState(!1),[b,N]=$.useState(!1),k=$.useRef(null),y=$.useRef(null);$.useEffect(()=>{if(t.selectedInterfaceTheme){const B=Ct(t.selectedInterfaceTheme);vr(B)}},[t.selectedInterfaceTheme]),$.useEffect(()=>{const B=U=>{k.current&&!k.current.contains(U.target)&&r()};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[r]),$.useEffect(()=>{const B=()=>{i(U=>U)};return window.addEventListener("languageChanged",B),()=>{window.removeEventListener("languageChanged",B)}},[]);const p=B=>{const U=Ct(B),Q={...t,selectedInterfaceTheme:B,interfaceTheme:B,interfaceColors:U.colors};if(t.syncInterfaceWithReading){const fe=Ls.find(oe=>oe.id===B);fe&&(Q.selectedColorTheme=B,Q.colors=fe.colors)}vr(U),e(Q)},m=B=>{const U=Ls.find(fe=>fe.id===B);if(!U)return;const Q={...t,selectedColorTheme:B,colors:U.colors,useThemeBasedColors:!0};if(t.syncInterfaceWithReading){const fe=Ct(B);Q.selectedInterfaceTheme=fe.id,Q.interfaceColors=fe.colors,vr(fe)}e(Q)},g=B=>{const U={...t,syncInterfaceWithReading:B};if(B&&t.selectedColorTheme){const Q=Ct(t.selectedColorTheme);U.selectedInterfaceTheme=Q.id,U.interfaceColors=Q.colors,vr(Q)}e(U)},w=async()=>{if(window.confirm(A("confirmResetSettings")))try{await tx(),window.location.reload()}catch(B){console.error("Error resetting to defaults:",B),alert(A("failedToResetSettings"))}},x=async()=>{try{a(!0);const B=await sx(),U=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),Q=URL.createObjectURL(U),fe=document.createElement("a");fe.href=Q,fe.download=`ebook-reader-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(Q)}catch(B){console.error("Export failed:",B),alert(A("exportFailed"))}finally{a(!1)}},C=async B=>{var Q;const U=(Q=B.target.files)==null?void 0:Q[0];if(U)try{l(!0);const fe=await U.text(),oe=JSON.parse(fe);await ax(oe),alert(A("importSuccess")),window.location.reload()}catch(fe){console.error("Import failed:",fe),alert(A("importFailed"))}finally{l(!1),y.current&&(y.current.value="")}},E=Ct(t.selectedInterfaceTheme||"light"),S={backgroundColor:E.colors.panelBackground,color:E.colors.textPrimary,borderColor:E.colors.panelBorder},I=[{id:"reading",label:A("reading"),icon:F2},{id:"interface",label:A("interface"),icon:hd},{id:"controls",label:A("controls"),icon:R2},{id:"backup",label:A("backup"),icon:al}],R=B=>{const U={Inter:"Inter, -apple-system, BlinkMacSystemFont, sans-serif",Georgia:"Georgia, serif","JetBrains Mono":"JetBrains Mono, monospace"};return{fontFamily:U[B]||U.Inter}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end animate-fade-in",children:u.jsxs("div",{ref:k,className:"w-full max-w-md h-full shadow-xl overflow-hidden flex flex-col animate-slide-in-right",style:{backgroundColor:S.backgroundColor,fontFamily:t!=null&&t.applyFontGlobally?t.fontFamily==="Inter"?"Inter, sans-serif":t.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":t.fontFamily==="Georgia"?"Georgia, serif":"Inter, sans-serif":void 0},"data-settings-panel":"true",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:S.borderColor},children:[u.jsx("h2",{className:"text-lg font-semibold",style:{color:S.color},children:A("readingSettings")}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>v(!h),className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:S.color},"aria-label":A("language"),children:u.jsx(dn,{className:"w-5 h-5"})}),h&&u.jsx("div",{className:"absolute top-full right-0 mt-2 z-50",children:u.jsx(ya,{onClose:()=>v(!1)})})]}),u.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:S.color},"aria-label":A("closeSettings"),children:u.jsx(is,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"flex border-b",style:{borderColor:S.borderColor},children:I.map(B=>{const U=B.icon;return u.jsxs("button",{onClick:()=>i(B.id),className:`flex-1 flex items-center justify-center gap-2 py-3 px-2 text-sm font-medium transition-all duration-300 ${n===B.id?"border-b-2":"hover:bg-gray-100 hover:bg-opacity-20"}`,style:{color:n===B.id?"#007BFF":S.color,borderColor:n===B.id?"#007BFF":"transparent"},children:[u.jsx(U,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:B.label})]},B.id)})}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[n==="reading"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:S.color},children:A("typography")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:S.color},children:A("fontFamily")}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{value:"Inter",label:"Inter (Sans-Serif)",isDefault:!0},{value:"Georgia",label:"Georgia (Serif)",isDefault:!1},{value:"JetBrains Mono",label:"JetBrains Mono (Monospace)",isDefault:!1}].map(B=>u.jsxs("button",{onClick:()=>e({...t,fontFamily:B.value}),className:`p-3 text-left rounded-lg border-2 transition-all duration-300 transform hover:scale-105 ${t.fontFamily===B.value?"border-blue-500":"border-gray-200 hover:border-gray-300"}`,style:{backgroundColor:t.fontFamily===B.value?`${E.colors.accent}20`:"transparent",borderColor:t.fontFamily===B.value?E.colors.accent:S.borderColor,color:S.color,...R(B.value)},children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("span",{className:"font-medium",children:[B.label,B.isDefault&&u.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:A("default")})]})}),u.jsx("div",{className:"text-sm mt-1 opacity-70",style:R(B.value),children:A("fontPreviewText")})]},B.value))})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:S.color},children:[A("fontSize"),": ",t.fontSize,"px",t.fontSize===38&&u.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[A("default"),": 38px"]})]}),u.jsx("input",{type:"range",min:"12",max:"64",value:t.fontSize,onChange:B=>e({...t,fontSize:parseInt(B.target.value)}),className:"slider w-full",style:{background:`linear-gradient(to right, #007BFF 0%, #007BFF ${(t.fontSize-12)/52*100}%, #e5e7eb ${(t.fontSize-12)/52*100}%, #e5e7eb 100%)`}}),u.jsxs("div",{className:"flex justify-between text-xs mt-1",style:{color:S.color,opacity:.6},children:[u.jsx("span",{children:"12px"}),u.jsx("span",{children:"64px"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:S.color},children:[A("lineHeight"),": ",t.lineHeight,t.lineHeight===1.6&&u.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[A("default"),": 1.6"]})]}),u.jsx("input",{type:"range",min:"1.2",max:"2.5",step:"0.1",value:t.lineHeight,onChange:B=>e({...t,lineHeight:parseFloat(B.target.value)}),className:"slider w-full",style:{background:`linear-gradient(to right, #007BFF 0%, #007BFF ${(t.lineHeight-1.2)/(2.5-1.2)*100}%, #e5e7eb ${(t.lineHeight-1.2)/(2.5-1.2)*100}%, #e5e7eb 100%)`}}),u.jsxs("div",{className:"flex justify-between text-xs mt-1",style:{color:S.color,opacity:.6},children:[u.jsx("span",{children:"1.2"}),u.jsx("span",{children:"2.5"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:S.color},children:[A("letterSpacing"),": ",t.marginSize,"em",t.marginSize===.5&&u.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[A("default"),": 0.5em"]})]}),u.jsx("input",{type:"range",min:"0",max:"3",step:"0.1",value:t.marginSize,onChange:B=>e({...t,marginSize:parseFloat(B.target.value)}),className:"slider w-full",style:{background:`linear-gradient(to right, #007BFF 0%, #007BFF ${t.marginSize/3*100}%, #e5e7eb ${t.marginSize/3*100}%, #e5e7eb 100%)`}}),u.jsxs("div",{className:"flex justify-between text-xs mt-1",style:{color:S.color,opacity:.6},children:[u.jsx("span",{children:"0em"}),u.jsx("span",{children:"3em"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:S.color},children:A("contentWidth")}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"phone",label:A("phone")},{value:"normal",label:A("normal")},{value:"full",label:A("full")}].map(B=>u.jsxs("button",{onClick:()=>e({...t,maxWidth:B.value}),className:`p-4 text-sm rounded-lg border transition-all duration-300 ${t.maxWidth===B.value?"border-blue-500 bg-blue-50 bg-opacity-20":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:t.maxWidth===B.value?`${E.colors.accent}20`:"transparent",borderColor:t.maxWidth===B.value?E.colors.accent:S.borderColor,color:S.color,minHeight:"64px"},children:[B.label,B.value==="full"&&u.jsx("span",{className:"block mt-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:A("default")})]},B.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:S.color},children:A("colors")}),u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"text-md font-medium mb-3",style:{color:S.color},children:A("readingColors")}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:Ls.filter(B=>B.id!=="custom").map(B=>u.jsxs("button",{onClick:()=>m(B.id),className:`p-4 rounded-lg border-2 text-left transition-all duration-300 transform hover:scale-105 ${t.selectedColorTheme===B.id?"border-blue-500":"border-gray-200 hover:border-gray-300"}`,style:{backgroundColor:t.selectedColorTheme===B.id?`${E.colors.accent}20`:B.colors.backgroundColor,borderColor:t.selectedColorTheme===B.id?E.colors.accent:B.colors.textColor,color:B.colors.textColor},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("span",{className:"font-medium",children:[A(B.id),B.id==="light"&&u.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:A("default")})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:B.colors.backgroundColor}}),u.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:B.colors.textColor}}),u.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:B.colors.chapterTitleColor}})]})]}),u.jsx("p",{className:"text-sm opacity-80 mb-1",children:A(`${B.id}Description`)}),u.jsx("p",{className:"text-xs opacity-60",children:A(`${B.id}Usage`)})]},B.id))})]}),u.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 bg-opacity-20 rounded-lg",children:[u.jsx("h4",{className:"font-medium",style:{color:S.color},children:A("custom")}),u.jsx(qf,{color:t.colors.backgroundColor,onChange:B=>e({...t,selectedColorTheme:"custom",colors:{...t.colors,backgroundColor:B}}),label:A("backgroundColor"),defaultColor:"#ffffff"}),u.jsx(qf,{color:t.colors.textColor,onChange:B=>e({...t,selectedColorTheme:"custom",colors:{...t.colors,textColor:B}}),label:A("textColor"),defaultColor:"#000000"})]})]})]}),n==="interface"&&u.jsx(u.Fragment,{children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:S.color},children:A("interfaceColors")}),u.jsx("div",{className:"grid grid-cols-1 gap-3 mb-4",children:Js.map(B=>u.jsxs("button",{onClick:()=>p(B.id),className:`p-4 rounded-lg border-2 text-left transition-all duration-300 transform hover:scale-105 ${t.selectedInterfaceTheme===B.id?"border-blue-500":"border-gray-200 hover:border-gray-300"}`,style:{backgroundColor:t.selectedInterfaceTheme===B.id?`${B.colors.accent}20`:B.colors.panelBackground,borderColor:t.selectedInterfaceTheme===B.id?B.colors.accent:B.colors.panelBorder,color:B.colors.textPrimary},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("span",{className:"font-medium",children:[A(B.id),B.isDefault&&u.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:A("default")})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:B.colors.headerBackground}}),u.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:B.colors.accent}}),u.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:B.colors.panelBackground}})]})]}),u.jsx("p",{className:"text-sm opacity-80",children:B.description})]},B.id))}),u.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 bg-opacity-20 rounded-lg",children:[u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.syncInterfaceWithReading||!1,onChange:B=>g(B.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 mt-0.5"}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm font-medium",style:{color:S.color},children:A("syncInterfaceAndReadingColors")}),u.jsx("p",{className:"text-xs mt-1",style:{color:S.color,opacity:.7},children:A("syncDescription")})]})]}),u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.applyFontGlobally||!1,onChange:B=>e({...t,applyFontGlobally:B.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 mt-0.5"}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm font-medium",style:{color:S.color},children:A("applyFontGlobally")}),u.jsx("p",{className:"text-xs mt-1",style:{color:S.color,opacity:.7},children:A("applyFontGloballyDescription")})]})]})]})]})}),n==="controls"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:S.color},children:A("interface")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.hideMenuWhileReading,onChange:B=>e({...t,hideMenuWhileReading:B.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm font-medium",style:{color:S.color},children:[A("autoHideMenu"),u.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[A("default"),": ",A("checked")]})]}),u.jsx("p",{className:"text-xs mt-1",style:{color:S.color,opacity:.7},children:A("autoHideMenuDescription")})]})]}),u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.scrollButtons.visible,onChange:B=>{e({...t,scrollButtons:{...t.scrollButtons,visible:B.target.checked}}),N(B.target.checked)},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm font-medium",style:{color:S.color},children:[A("showScrollButtons"),u.jsxs("span",{className:"ml-2 bg-gray-100 text-gray-800 px-2 py-0.5 rounded text-xs",children:[A("default"),": ",A("unchecked")]})]}),u.jsx("p",{className:"text-xs mt-1",style:{color:S.color,opacity:.7},children:A("showScrollButtonsDescription")})]})]}),(t.scrollButtons.visible||b)&&u.jsxs("div",{className:"ml-7 space-y-3 animate-fade-in",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:S.color},children:A("buttonSize")}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"small",label:A("small"),size:"40px"},{value:"medium",label:A("medium"),size:"48px"},{value:"large",label:A("large"),size:"64px"},{value:"custom",label:A("custom"),size:"Custom"}].map(B=>u.jsxs("button",{onClick:()=>e({...t,scrollButtons:{...t.scrollButtons,size:B.value}}),className:`p-2 text-sm rounded border transition-all duration-300 ${t.scrollButtons.size===B.value?"border-blue-500 bg-blue-50 bg-opacity-20":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:t.scrollButtons.size===B.value?`${E.colors.accent}20`:"transparent",borderColor:t.scrollButtons.size===B.value?E.colors.accent:S.borderColor,color:S.color},children:[u.jsx("div",{children:B.label}),u.jsxs("div",{className:"text-xs opacity-60",children:[B.value==="medium"&&u.jsx("span",{className:"bg-blue-100 text-blue-800 px-1 py-0.5 rounded text-xs",children:A("default")}),B.value!=="custom"&&` (${B.size})`]})]},B.value))})]}),t.scrollButtons.size==="custom"&&u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:S.color},children:[A("customSize"),": ",t.scrollButtons.customSize||48,"px"]}),u.jsx("input",{type:"range",min:"24",max:"80",value:t.scrollButtons.customSize||48,onChange:B=>e({...t,scrollButtons:{...t.scrollButtons,customSize:parseInt(B.target.value)||48}}),className:"slider w-full",style:{background:`linear-gradient(to right, #007BFF 0%, #007BFF ${((t.scrollButtons.customSize||48)-24)/56*100}%, #e5e7eb ${((t.scrollButtons.customSize||48)-24)/56*100}%, #e5e7eb 100%)`}}),u.jsxs("div",{className:"flex justify-between text-xs mt-1",style:{color:S.color,opacity:.6},children:[u.jsx("span",{children:"24px"}),u.jsx("span",{children:"80px"})]})]})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:S.color},children:A("readingExperience")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.enableTextToSpeech||!1,onChange:B=>e({...t,enableTextToSpeech:B.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",style:{color:S.color},children:[u.jsx(ug,{className:"w-4 h-4"}),A("textToSpeechSupport"),u.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs",children:A("experimental")})]}),u.jsx("p",{className:"text-xs mt-1",style:{color:S.color,opacity:.7},children:A("textToSpeechDescription")})]})]}),u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:t.enableFastFavorite||!1,onChange:B=>e({...t,enableFastFavorite:B.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 mt-0.5"}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm font-medium",style:{color:S.color},children:A("fastFavorite")}),u.jsx("p",{className:"text-xs mt-1",style:{color:S.color,opacity:.7},children:A("fastFavoriteDescription")})]})]}),t.enableFastFavorite&&u.jsxs("div",{className:"ml-7 animate-fade-in",children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:S.color},children:[A("defaultBookmarkName"),":"]}),u.jsx("input",{type:"text",value:c,onChange:B=>{d(B.target.value),e({...t,fastFavoriteName:B.target.value})},placeholder:"Quick Bookmark",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",style:{backgroundColor:E.colors.inputBackground,color:E.colors.inputText,borderColor:E.colors.inputBorder}})]})]})]})]}),n==="backup"&&u.jsx(u.Fragment,{children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:S.color},children:A("backupAndReset")}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:`${E.colors.accent}15`},children:[u.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",style:{color:S.color},children:[u.jsx(Xh,{className:"w-4 h-4",style:{color:E.colors.accent}}),A("exportSettings")]}),u.jsx("p",{className:"text-sm mb-3",style:{color:S.color,opacity:.8},children:A("exportDescription")}),u.jsxs("button",{onClick:x,disabled:s,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 transition-all duration-300 transform hover:scale-105 text-sm",style:{backgroundColor:E.colors.buttonPrimary,color:E.colors.buttonPrimaryText},children:[u.jsx(Xh,{className:"w-4 h-4"}),A(s?"exporting":"exportData")]})]}),u.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:`${E.colors.success}15`},children:[u.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",style:{color:S.color},children:[u.jsx(Ui,{className:"w-4 h-4",style:{color:E.colors.success}}),A("importSettings")]}),u.jsx("p",{className:"text-sm mb-3",style:{color:S.color,opacity:.8},children:A("importDescription")}),u.jsx("input",{ref:y,type:"file",accept:".json",onChange:C,className:"hidden"}),u.jsxs("button",{onClick:()=>{var B;return(B=y.current)==null?void 0:B.click()},disabled:o,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 transition-all duration-300 transform hover:scale-105 text-sm",style:{backgroundColor:E.colors.success,color:"#ffffff"},children:[u.jsx(Ui,{className:"w-4 h-4"}),A(o?"importing":"importData")]})]}),u.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:`${E.colors.error}15`},children:[u.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",style:{color:S.color},children:[u.jsx(Jh,{className:"w-4 h-4",style:{color:E.colors.error}}),A("resetToDefault")]}),u.jsx("p",{className:"text-sm mb-3",style:{color:S.color,opacity:.8},children:A("resetDescription")}),u.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:opacity-90 transition-all duration-300 transform hover:scale-105 text-sm",style:{backgroundColor:E.colors.error,color:"#ffffff"},children:[u.jsx(Jh,{className:"w-4 h-4"}),A("resetToDefault")]})]})]}),u.jsx("div",{className:"mt-4 p-4 rounded-lg border-l-4",style:{backgroundColor:`${E.colors.warning}15`,borderColor:E.colors.warning},children:u.jsxs("p",{className:"text-sm",style:{color:S.color},children:[u.jsxs("strong",{children:[" ",A("important"),":"]})," ",A("backupWarning")]})})]})})]})]})})},Rw=({onSearch:t,searchResults:e,onResultClick:r,onClose:n,preferences:i})=>{const[s,a]=$.useState(""),[o,l]=$.useState(!1),c=$.useRef(null),d=$.useRef(null);$.useEffect(()=>{var k;(k=c.current)==null||k.focus()},[]),$.useEffect(()=>{const k=y=>{d.current&&!d.current.contains(y.target)&&n()};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[n]),$.useEffect(()=>{if(!s.trim()){t("");return}l(!0);const k=setTimeout(()=>{t(s),l(!1)},300);return()=>clearTimeout(k)},[s,t]);const h=k=>{k.preventDefault(),s.trim()&&t(s)},v=(k,y,p)=>u.jsxs(u.Fragment,{children:[k.slice(0,y),u.jsx("mark",{className:"bg-yellow-200 text-yellow-900 px-1 rounded",children:k.slice(y,p)}),k.slice(p)]}),N=i!=null&&i.interfaceColors?{backgroundColor:i.interfaceColors.panelBackground||"#ffffff",color:i.interfaceColors.panelText||"#1f2937",borderColor:i.interfaceColors.borderColor||"#e5e7eb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb"};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-20 animate-fade-in",children:u.jsxs("div",{ref:d,className:"rounded-xl shadow-xl w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden animate-scale-in",style:{backgroundColor:N.backgroundColor,fontFamily:i!=null&&i.applyFontGlobally?i.fontFamily==="Inter"?"Inter, sans-serif":i.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":i.fontFamily==="Crimson Text"?"Crimson Text, serif":i.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},children:[u.jsxs("div",{className:"flex items-center gap-4 p-4 border-b",style:{borderColor:N.borderColor},children:[u.jsx(Kn,{className:"w-5 h-5",style:{color:N.color,opacity:.6}}),u.jsx("form",{onSubmit:h,className:"flex-1",children:u.jsx("input",{ref:c,type:"text",placeholder:"Search in book...",value:s,onChange:k=>a(k.target.value),className:"w-full text-lg border-none outline-none placeholder-gray-400 transition-all duration-300 bg-transparent",style:{color:N.color}})}),u.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:N.color},"aria-label":"Close search",children:u.jsx(is,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.trim()?o?u.jsxs("div",{className:"p-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3",style:{borderColor:"#007BFF"}}),u.jsx("p",{style:{color:N.color},children:"Searching..."})]}):e.length===0?u.jsxs("div",{className:"p-8 text-center",style:{color:N.color},children:[u.jsx(Kn,{className:"w-12 h-12 mx-auto mb-3",style:{color:N.color,opacity:.3}}),u.jsx("p",{className:"text-lg font-medium mb-2",children:"No results found"}),u.jsx("p",{style:{opacity:.7},children:"Try different keywords or check your spelling"})]}):u.jsx("div",{className:"divide-y",style:{borderColor:N.borderColor},children:e.map((k,y)=>u.jsx("button",{onClick:()=>r(k),className:"w-full text-left p-4 hover:bg-gray-50 hover:bg-opacity-20 transition-all duration-300",children:u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx("span",{className:"text-sm font-medium",style:{color:"#007BFF"},children:k.chapterTitle})}),u.jsx("p",{className:"leading-relaxed",style:{color:N.color},children:v(k.text,k.matchStart,k.matchEnd)})]}),u.jsx(x2,{className:"w-4 h-4 flex-shrink-0 mt-1",style:{color:N.color,opacity:.4}})]})},y))}):u.jsxs("div",{className:"p-8 text-center",style:{color:N.color},children:[u.jsx(Kn,{className:"w-12 h-12 mx-auto mb-3",style:{color:N.color,opacity:.3}}),u.jsx("p",{children:"Enter a search term to find text in your book"}),u.jsxs("div",{className:"mt-4 text-sm",children:[u.jsx("p",{className:"mb-1",children:"Tips:"}),u.jsxs("ul",{className:"text-left inline-block space-y-1",style:{opacity:.7},children:[u.jsx("li",{children:" Search is case-insensitive"}),u.jsx("li",{children:" Use specific words for better results"}),u.jsx("li",{children:" Click on results to jump to that location"})]})]})]})}),e.length>0&&u.jsx("div",{className:"p-4 border-t",style:{borderColor:N.borderColor,backgroundColor:N.backgroundColor,opacity:.8},children:u.jsxs("p",{className:"text-sm text-center",style:{color:N.color},children:["Found ",e.length," ",e.length===1?"result":"results",' for "',s,'"']})})]})})},zw=({bookId:t,chapters:e,currentChapterIndex:r,onBookmarkClick:n,onClose:i,preferences:s})=>{const[a,o]=$.useState([]),[l,c]=$.useState(!1),[d,h]=$.useState(""),[v,b]=$.useState(null),[N,k]=$.useState(""),y=$.useRef(null);$.useEffect(()=>{(async()=>{try{const S=await fg(t);o(S.sort((I,R)=>R.createdAt.getTime()-I.createdAt.getTime()))}catch(S){console.error("Error loading bookmarks:",S)}})()},[t]),$.useEffect(()=>((async()=>{await cf(t,!0)})(),()=>{cf(t,!1)}),[t]),$.useEffect(()=>{const E=S=>{y.current&&!y.current.contains(S.target)&&i()};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[i]);const p=async()=>{if(!d.trim())return;const E=e[r];if(!E)return;const S={id:`bookmark-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,bookId:t,chapterIndex:r,position:window.scrollY,text:`Chapter: ${E.title}`,label:d.trim(),createdAt:new Date};try{await oc(S),o(I=>[S,...I]),h(""),c(!1)}catch(I){console.error("Error saving bookmark:",I)}},m=async E=>{if(window.confirm("Are you sure you want to delete this bookmark?"))try{await nx(E),o(S=>S.filter(I=>I.id!==E))}catch(S){console.error("Error deleting bookmark:",S)}},g=async E=>{if(!N.trim())return;const S=a.find(R=>R.id===E);if(!S)return;const I={...S,label:N.trim()};try{await oc(I),o(R=>R.map(B=>B.id===E?I:B)),b(null),k("")}catch(R){console.error("Error updating bookmark:",R)}},w=E=>{const I=(new Date().getTime()-E.getTime())/(1e3*60*60);return I<1?"Just now":I<24?`${Math.round(I)}h ago`:I<168?`${Math.round(I/24)}d ago`:E.toLocaleDateString()},C=s!=null&&s.interfaceColors?{backgroundColor:s.interfaceColors.panelBackground||"#ffffff",color:s.interfaceColors.panelText||"#1f2937",borderColor:s.interfaceColors.borderColor||"#e5e7eb"}:{backgroundColor:"#ffffff",color:"#1f2937",borderColor:"#e5e7eb"};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end animate-fade-in",children:u.jsxs("div",{ref:y,className:"w-full max-w-md h-full shadow-xl overflow-y-auto animate-slide-in-right",style:{backgroundColor:C.backgroundColor,fontFamily:s!=null&&s.applyFontGlobally?s.fontFamily==="Inter"?"Inter, sans-serif":s.fontFamily==="JetBrains Mono"?"JetBrains Mono, monospace":s.fontFamily==="Crimson Text"?"Crimson Text, serif":s.fontFamily==="Source Sans Pro"?"Source Sans Pro, sans-serif":"Georgia, serif":void 0},children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0",style:{backgroundColor:C.backgroundColor,borderColor:C.borderColor},children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ec,{className:"w-6 h-6",style:{color:"#007BFF"}}),u.jsx("h2",{className:"text-lg font-semibold",style:{color:C.color},children:"Bookmarks"})]}),u.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 hover:bg-opacity-20 rounded-lg transition-all duration-300",style:{color:C.color},"aria-label":"Close bookmarks",children:u.jsx(is,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"p-4 border-b",style:{borderColor:C.borderColor,backgroundColor:C.backgroundColor,opacity:.95},children:l?u.jsxs("div",{className:"space-y-3 animate-fade-in",children:[u.jsx("input",{type:"text",placeholder:"Bookmark label...",value:d,onChange:E=>h(E.target.value),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",style:{borderColor:C.borderColor,backgroundColor:C.backgroundColor,color:C.color},autoFocus:!0}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:p,disabled:!d.trim(),className:"flex-1 py-2 px-4 rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105",style:{backgroundColor:"#007BFF",color:"#ffffff"},children:"Save"}),u.jsx("button",{onClick:()=>{c(!1),h("")},className:"px-4 py-2 border rounded-lg hover:bg-gray-50 hover:bg-opacity-20 transition-all duration-300",style:{borderColor:C.borderColor,color:C.color},children:"Cancel"})]})]}):u.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 p-3 border-2 border-dashed rounded-lg hover:border-gray-400 transition-all duration-300 hover:bg-gray-100 hover:bg-opacity-20",style:{borderColor:C.borderColor,color:C.color},children:[u.jsx(lg,{className:"w-5 h-5"}),"Add Bookmark Here"]})}),u.jsx("div",{className:"flex-1",children:a.length===0?u.jsxs("div",{className:"p-8 text-center",style:{color:C.color},children:[u.jsx(ec,{className:"w-12 h-12 mx-auto mb-3",style:{color:C.color,opacity:.3}}),u.jsx("h3",{className:"text-lg font-medium mb-2",children:"No bookmarks yet"}),u.jsx("p",{className:"text-sm opacity-60",children:"Add bookmarks to save your favorite passages and important locations"})]}):u.jsx("div",{className:"divide-y",style:{borderColor:C.borderColor},children:a.map(E=>u.jsx("div",{className:"p-4 hover:bg-gray-50 hover:bg-opacity-20 transition-all duration-300",children:u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>n(E.chapterIndex),children:v===E.id?u.jsxs("div",{className:"space-y-2 animate-fade-in",children:[u.jsx("input",{type:"text",value:N,onChange:S=>k(S.target.value),className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",style:{borderColor:C.borderColor,backgroundColor:C.backgroundColor,color:C.color},autoFocus:!0}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>g(E.id),className:"text-sm px-3 py-1 rounded hover:opacity-90 transition-all duration-300",style:{backgroundColor:"#007BFF",color:"#ffffff"},children:"Save"}),u.jsx("button",{onClick:()=>{b(null),k("")},className:"text-sm border px-3 py-1 rounded hover:bg-gray-50 hover:bg-opacity-20 transition-all duration-300",style:{borderColor:C.borderColor,color:C.color},children:"Cancel"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("h4",{className:"font-medium mb-1",style:{color:C.color},children:E.label}),u.jsx("p",{className:"text-sm mb-2",style:{color:C.color,opacity:.7},children:E.text}),u.jsxs("div",{className:"flex items-center gap-4 text-xs",style:{color:C.color,opacity:.6},children:[u.jsxs("span",{children:["Chapter ",E.chapterIndex+1]}),u.jsx("span",{children:w(E.createdAt)})]})]})}),v!==E.id&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>{b(E.id),k(E.label)},className:"p-1 hover:bg-gray-200 hover:bg-opacity-20 rounded transition-all duration-300",style:{color:C.color,opacity:.6},"aria-label":"Edit bookmark",children:u.jsx(z2,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>m(E.id),className:"p-1 hover:bg-red-100 hover:bg-opacity-20 rounded transition-all duration-300",style:{color:"#ef4444"},"aria-label":"Delete bookmark",children:u.jsx(tc,{className:"w-4 h-4"})})]})]})},E.id))})}),a.length>0&&u.jsx("div",{className:"p-4 border-t",style:{borderColor:C.borderColor,backgroundColor:C.backgroundColor,opacity:.8},children:u.jsxs("p",{className:"text-sm text-center",style:{color:C.color},children:[a.length," ",a.length===1?"bookmark":"bookmarks"," saved"]})})]})})},Pw=({onNextChapter:t,onPreviousChapter:e,canGoNext:r,canGoPrevious:n,preferences:i})=>{const a=i!=null&&i.interfaceColors?{backgroundColor:i.interfaceColors.buttonBackground||"#3b82f6",color:i.interfaceColors.buttonText||"#ffffff"}:{backgroundColor:"#3b82f6",color:"#ffffff"};return u.jsxs(u.Fragment,{children:[n&&u.jsx("button",{onClick:e,className:"fixed bottom-6 left-6 p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 z-30",style:a,"aria-label":"Previous chapter",children:u.jsx(og,{className:"w-6 h-6"})}),r&&u.jsx("button",{onClick:t,className:"fixed bottom-6 right-6 p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 z-30",style:a,"aria-label":"Next chapter",children:u.jsx(dd,{className:"w-6 h-6"})})]})},Fw=t=>{const[e,r]=$.useState(null),[n,i]=$.useState(!0),[s,a]=$.useState(new Date);$.useEffect(()=>{t&&(async()=>{try{const d=await J2(t);d&&r(d)}catch(d){console.error("Error loading book:",d)}finally{i(!1)}})()},[t]),$.useEffect(()=>{if(!e)return;const c=setInterval(async()=>{try{await to(e),a(new Date)}catch(d){console.error("Error auto-saving progress:",d)}},3e4);return()=>clearInterval(c)},[e]);const o=$.useCallback(async c=>{if(!e)return;const d={...e,...c,lastRead:new Date};if(r(d),c.currentChapter!==void 0&&c.currentChapter!==e.currentChapter)try{await to(d),a(new Date)}catch(h){console.error("Error saving progress on chapter change:",h)}},[e]),l=$.useCallback(async()=>{if(e)try{await to(e),a(new Date)}catch(c){console.error("Error manually saving progress:",c)}},[e]);return{book:e,isLoading:n,lastSave:s,updateProgress:o,saveProgress:l}},Ow=t=>{$.useEffect(()=>{const e=r=>{var l,c,d,h,v,b,N,k,y;if(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)return;const{key:n,ctrlKey:i,metaKey:s,shiftKey:a}=r,o=i||s;switch(!0){case(n==="ArrowRight"&&!o):r.preventDefault(),(l=t.onNextChapter)==null||l.call(t);break;case(n==="ArrowLeft"&&!o):r.preventDefault(),(c=t.onPreviousChapter)==null||c.call(t);break;case(n==="m"&&!o):r.preventDefault(),(d=t.onToggleMenu)==null||d.call(t);break;case(n==="s"&&!o):r.preventDefault(),(h=t.onToggleSettings)==null||h.call(t);break;case(n==="f"&&!o):r.preventDefault(),(v=t.onToggleFullscreen)==null||v.call(t);break;case(n==="/"&&!o):case(n==="f"&&o):r.preventDefault(),(b=t.onSearch)==null||b.call(t);break;case(n==="b"&&!o):r.preventDefault(),(N=t.onBookmark)==null||N.call(t);break;case(n==="="&&o):case(n==="+"&&o):r.preventDefault(),(k=t.onIncreaseFontSize)==null||k.call(t);break;case(n==="-"&&o):r.preventDefault(),(y=t.onDecreaseFontSize)==null||y.call(t);break}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t])},Mw=({book:t,onBackToLibrary:e})=>{var Ve;const[r,n]=$.useState([]),[i,s]=$.useState(t.currentChapter),[a,o]=$.useState(null),[l,c]=$.useState(!1),[d,h]=$.useState(!1),[v,b]=$.useState(!1),[N,k]=$.useState(!1),[y,p]=$.useState(!1),[m,g]=$.useState(!1),[w,x]=$.useState(!0),[C,E]=$.useState(null),[S,I]=$.useState([]),[R,B]=$.useState(0),{updateProgress:U}=Fw(t.id),Q=H=>H.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();$.useEffect(()=>{if(r.length>0){const X=`/${Q(t.title)}/chapter/${i+1}`;window.history.pushState({bookId:t.id,chapterIndex:i},`${t.title} - Chapter ${i+1}`,X),rx(t.id,i,window.scrollY)}},[i,r.length,t.id,t.title]),$.useEffect(()=>{const H=X=>{X.state&&X.state.bookId===t.id&&s(X.state.chapterIndex)};return window.addEventListener("popstate",H),()=>window.removeEventListener("popstate",H)},[t.id]),$.useEffect(()=>((async()=>{var X,ce;try{if(x(!0),!t.file||t.file.size===0)throw new Error("Invalid or corrupted file");const Ce=new Rd(t.file);await Ce.initialize();const Ne=await Ce.getAllChapters();if(!Ne||Ne.length===0)throw new Error("No chapters found in EPUB file");n(Ne),E(Ce);const De=await ul();if(o(De),De.selectedInterfaceTheme){const Pe=Ct(De.selectedInterfaceTheme);vr(Pe)}const Fe=Ne[i];Fe&&Tv(t.id,t.title,t.author,i,Fe.title),console.log("Reader initialized successfully")}catch(Ce){console.error("Error initializing reader:",Ce),Oe("READER_INIT_FAILED",Ce,{bookId:t.id,fileSize:(X=t.file)==null?void 0:X.size,fileName:(ce=t.file)==null?void 0:ce.name}),alert("Failed to load the book. The file may be corrupted or invalid. Returning to library."),e()}finally{x(!1)}})(),()=>{if(Pd(),C)try{C.destroy()}catch(X){console.warn("Error destroying parser:",X)}}),[t.file,t.id,e]),$.useEffect(()=>{i!==t.currentChapter&&U({currentChapter:i,progress:i/Math.max(r.length-1,1)})},[i,r.length,t.currentChapter,U]),$.useEffect(()=>{const H=()=>{mw()},X=["scroll","click","keydown","mousemove","touchstart"];return X.forEach(ce=>{window.addEventListener(ce,H,{passive:!0})}),()=>{X.forEach(ce=>{window.removeEventListener(ce,H)})}},[]),$.useEffect(()=>{let H;const X=()=>{B(Ce=>Ce+1),clearTimeout(H),H=setTimeout(()=>{R>=2?g(Ce=>!Ce):R===1&&(c(!1),h(!1),b(!1),k(!1)),B(0)},300)},ce=document.querySelector(".reader-content");return ce?(ce.addEventListener("click",X),()=>{ce.removeEventListener("click",X),clearTimeout(H)}):()=>clearTimeout(H)},[R]);const fe=$.useCallback(async()=>{if(i<r.length-1){const H=i+1,X=r[H];await Ua(H,X.title,!0),s(H)}},[i,r.length,r]),oe=$.useCallback(async()=>{if(i>0){const H=i-1,X=r[H];await Ua(H,X.title,!1),s(H)}},[i,r]),ue=$.useCallback(async H=>{const X=r[H];X&&(await Ua(H,X.title,!1),s(H),c(!1))},[r]),le=$.useCallback(async H=>{if(o(H),H.selectedInterfaceTheme){const X=Ct(H.selectedInterfaceTheme);vr(X)}try{await fd(H)}catch(X){console.error("Error saving preferences:",X),Oe("SAVE_PREFERENCES_FAILED",X)}},[]),V=$.useCallback(async H=>{if(!C||!H.trim()){I([]);return}try{const X=await C.searchText(H),ce=[];X.forEach(({chapterIndex:Ce,matches:Ne})=>{Ne.forEach(De=>{var Fe;ce.push({chapterIndex:Ce,chapterTitle:((Fe=r[Ce])==null?void 0:Fe.title)||`Chapter ${Ce+1}`,text:De.text,position:De.position,matchStart:De.start,matchEnd:De.end})})}),I(ce)}catch(X){console.error("Error searching:",X),Oe("SEARCH_FAILED",X,{query:H}),I([])}},[C,r]),he=$.useCallback(async H=>{const X=r[H.chapterIndex];X&&(await Ua(H.chapterIndex,X.title,!1),s(H.chapterIndex),b(!1),setTimeout(()=>{const ce=document.querySelector(`[data-search-position="${H.position}"]`);ce==null||ce.scrollIntoView({behavior:"smooth",block:"center"})},100))},[r]),ve=$.useCallback(()=>{document.fullscreenElement?(document.exitFullscreen(),p(!1)):(document.documentElement.requestFullscreen(),p(!0))},[]),re=$.useCallback(()=>{a&&a.fontSize<64&&le({...a,fontSize:Math.min(64,a.fontSize+2)})},[a,le]),pe=$.useCallback(()=>{a&&a.fontSize>12&&le({...a,fontSize:Math.max(12,a.fontSize-2)})},[a,le]),Ae=$.useCallback(()=>{c(!1),h(!1),b(!1),k(!1)},[]);if(Ow({onNextChapter:fe,onPreviousChapter:oe,onToggleMenu:()=>c(H=>!H),onToggleSettings:()=>h(H=>!H),onToggleFullscreen:ve,onSearch:()=>b(!0),onIncreaseFontSize:re,onDecreaseFontSize:pe}),$.useEffect(()=>{const H=()=>{p(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",H),()=>document.removeEventListener("fullscreenchange",H)},[]),w||!a)return u.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading book..."})]})});const Se=r[i];return u.jsxs("div",{className:"min-h-screen bg-white",children:[u.jsx(Aw,{book:t,currentChapter:Se,chapterProgress:i+1,totalChapters:r.length,onBackToLibrary:e,onToggleMenu:()=>c(H=>!H),onToggleSettings:()=>h(H=>!H),onToggleSearch:()=>b(H=>!H),onToggleBookmarks:()=>k(H=>!H),onToggleFullscreen:ve,isFullscreen:y||m,hideMenuWhileReading:a.hideMenuWhileReading,preferences:a}),u.jsx("div",{className:"reader-content",children:u.jsx(Bw,{chapter:Se,preferences:a,onNextChapter:fe,onPreviousChapter:oe,canGoNext:i<r.length-1,canGoPrevious:i>0,onContentClick:Ae})}),((Ve=a.cornerNavigation)==null?void 0:Ve.visible)&&!m&&u.jsx(Pw,{onNextChapter:fe,onPreviousChapter:oe,canGoNext:i<r.length-1,canGoPrevious:i>0,preferences:a}),m&&u.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-75 text-white px-4 py-2 rounded-lg text-sm z-50 animate-fade-in",children:"Fullscreen Reading Mode - Double tap to exit"}),l&&!m&&u.jsx(Lw,{chapters:r,currentChapterIndex:i,onChapterSelect:ue,onClose:()=>c(!1),preferences:a}),d&&!m&&u.jsx(Iw,{preferences:a,onPreferencesChange:le,onClose:()=>h(!1)}),v&&!m&&u.jsx(Rw,{onSearch:V,searchResults:S,onResultClick:he,onClose:()=>b(!1),preferences:a}),N&&!m&&u.jsx(zw,{bookId:t.id,chapters:r,currentChapterIndex:i,onBookmarkClick:H=>{ue(H),k(!1)},onClose:()=>k(!1),preferences:a})]})};function Uw(){const[t,e]=$.useState(null),[r,n]=$.useState(!1),[i,s]=$.useState(null);$.useEffect(()=>((async()=>{try{zd(),Nv.init(),await ft(),n(!0),console.log("Application initialized successfully")}catch(c){console.error("Error initializing database:",c),Oe("APP_INIT_FAILED",c),s("Failed to initialize the application. Please refresh the page."),n(!0)}})(),()=>{}),[]),$.useEffect(()=>{const l=()=>{const d=window.location.pathname.match(/^\/([^\/]+)\/chapter\/(\d+)$/);if(d&&t){const h=parseInt(d[2],10);h-1!==t.currentChapter&&e(v=>v?{...v,currentChapter:h-1}:null)}};return l(),window.addEventListener("popstate",l),()=>{window.removeEventListener("popstate",l)}},[t]);const a=l=>{try{if(!l.file||l.file.size===0)throw new Error("Book file is corrupted or missing");e(l);const d=`/${l.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}/chapter/${l.currentChapter+1}`;window.history.pushState({bookId:l.id,chapterIndex:l.currentChapter},`${l.title} - Chapter ${l.currentChapter+1}`,d)}catch(c){console.error("Error opening book:",c),Oe("OPEN_BOOK_FAILED",c,{bookId:l.id}),alert("Failed to open the book. The file may be corrupted.")}},o=()=>{e(null),window.history.pushState(null,"eBook Reader Pro","/")};return r?i?u.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:u.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[u.jsx("div",{className:"text-red-600 mb-4",children:u.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Initialization Error"}),u.jsx("p",{className:"text-gray-600 mb-4",children:i}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"})]})}):u.jsx("div",{className:"App",children:t?u.jsx(Mw,{book:t,onBackToLibrary:o}):u.jsx(Tw,{onOpenBook:a})}):u.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Initializing eBook Reader..."})]})})}sg(document.getElementById("root")).render(u.jsx($.StrictMode,{children:u.jsx(Uw,{})}));
